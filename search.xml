<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>K8s RBACæƒé™ç®¡ç†</title>
      <link href="/2024/01/21/rbac-quan-xian-guan-li/"/>
      <url>/2024/01/21/rbac-quan-xian-guan-li/</url>
      
        <content type="html"><![CDATA[<h1 id="K8s-RBACæƒé™ç®¡ç†"><a href="#K8s-RBACæƒé™ç®¡ç†" class="headerlink" title="K8s RBACæƒé™ç®¡ç†"></a>K8s RBACæƒé™ç®¡ç†</h1><h2 id="RBACä¸­çš„ä¸‰ä¸ªé‡è¦æ¦‚å¿µ"><a href="#RBACä¸­çš„ä¸‰ä¸ªé‡è¦æ¦‚å¿µ" class="headerlink" title="RBACä¸­çš„ä¸‰ä¸ªé‡è¦æ¦‚å¿µ"></a>RBACä¸­çš„ä¸‰ä¸ªé‡è¦æ¦‚å¿µ</h2><ul><li>Roleï¼šå®šä¹‰ä¸€ä¸ªæƒé™çš„é›†åˆä½“ã€‚</li><li>Subjectï¼šè¢«æˆäºˆæƒé™çš„ä¸»ä½“ã€‚</li><li>RoleBindingï¼šå®šä¹‰â€œRoleâ€å’Œâ€œSubjectâ€çš„ç»‘å®šå…³ç³»ã€‚</li></ul><img src="/2024/01/21/rbac-quan-xian-guan-li/fig1.png" class=""><p>ä»ä¸Šå›¾ä¸­å¯ä»¥çœ‹å‡ºï¼ŒBindingæ“ä½œæ˜¯å°†Subjectå’ŒRoleç»‘å®šåœ¨ä¸€èµ·ï¼Œå®ç°å°†ä¸€ä¸ªè§’è‰²ï¼ˆRoleï¼‰èµ‹äºˆä¸€ä¸ªä¸»ä½“è´¦å·ï¼ˆSubjectï¼‰çš„åŠŸèƒ½ã€‚Roleå®šä¹‰äº†æƒé™çš„é›†åˆï¼Œä¹Ÿå¯ä»¥ç§°ä¸º<strong>æƒé™è§„åˆ™</strong>ï¼Œå³è¿™ä¸ªè§’è‰²å…·å¤‡å“ªäº›æƒé™ã€‚</p><p>ruleså®šä¹‰äº†æƒé™çš„è¯¦ç»†ä¿¡æ¯ï¼ŒapiGroupså®šä¹‰äº†<strong>èµ„æºç»„ç±»åˆ«</strong>ï¼Œ*apiGroups&#x3D;â€â€*è¡¨ç¤ºä½¿ç”¨ç¼ºçœçš„coreç»„èµ„æºç±»åˆ«ï¼ˆå±äºcoreç»„èµ„æºçš„æœ‰Podã€Namespaceã€Depolymentã€DaemonSetç­‰ï¼‰ã€‚resourceså®šä¹‰äº†<strong>èµ„æºèŒƒå›´</strong>ï¼ˆPodã€Namespaceã€Depolymentã€DaemonSetç­‰ï¼‰ï¼Œverbså®šä¹‰äº†é’ˆå¯¹<strong>èµ„æºçš„åŠ¨ä½œ</strong>ï¼ˆgetã€listã€watchã€createã€deleteã€updateç­‰ï¼‰ã€‚</p><h2 id="ä¸‰ç§ç»‘å®šæ–¹æ¡ˆ"><a href="#ä¸‰ç§ç»‘å®šæ–¹æ¡ˆ" class="headerlink" title="ä¸‰ç§ç»‘å®šæ–¹æ¡ˆ"></a>ä¸‰ç§ç»‘å®šæ–¹æ¡ˆ</h2><h3 id="Role-RoleBinding"><a href="#Role-RoleBinding" class="headerlink" title="Role &amp; RoleBinding"></a>Role &amp; RoleBinding</h3><blockquote><p>è¿™ç§ç»‘å®šæ–¹å¼æ˜¯æœ€å¸¸è§çš„ï¼Œä¸ºäº†å°†æƒé™é™åˆ¶åœ¨æŸä¸ªç‰¹å®šçš„namespaceä¸‹ã€‚</p></blockquote><img src="/2024/01/21/rbac-quan-xian-guan-li/fig2.png" class=""><p>ä»å›¾ä¸­ä¸éš¾çœ‹å‡ºï¼Œé€šè¿‡RoleBindingå°†Subjectå’ŒRoleç»‘å®šï¼Œå¯ä»¥å°†Subjectçš„æƒé™æ”¶æ•›åœ¨ä¸€ä¸ªnamespace:Aï¼Œè¯¥Subjectçš„ä»»ä½•æ“ä½œåªèƒ½é’ˆå¯¹namespace:Aä¸‹ç”Ÿæ•ˆï¼Œä¸èƒ½åœ¨namespace:Bä¸‹ç”Ÿæ•ˆã€‚</p><p>å‡è®¾ä¸€ä¸ªåœºæ™¯ï¼Œxiaomingæ˜¯æŸä¸šåŠ¡åº”ç”¨çš„è´Ÿè´£äººï¼Œè¯¥ä¸šåŠ¡åº”ç”¨ç»Ÿä¸€éƒ¨ç½²åœ¨Aå‘½åç©ºé—´ä¸‹ã€‚xiaomingéœ€è¦èƒ½å¤Ÿè§‚æµ‹åˆ°ä¸šåŠ¡å®¹å™¨çš„çŠ¶æ€ï¼Œç°åœ¨è¦ä¸ºä»–åˆ›å»ºä¸€ä¸ªè§’è‰²ï¼Œè¯¥å¦‚ä½•åšï¼Ÿé’ˆå¯¹xiaomingè¿™ä¸ªä¸»ä½“åˆ›å»ºä¸€ä¸ªnamespace:Aä¸‹çš„æƒé™è§’è‰²pod-readerï¼Œç„¶åå°†è¯¥ä¸»ä½“ç»‘å®šåˆ°pod-readerå³å¯ã€‚</p><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">kind</span><span class="token punctuation">:</span> Role<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> rbac.authorization.k8s.io/v1beta1<span class="token key atrule">metadata</span><span class="token punctuation">:</span>  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> A  <span class="token key atrule">name</span><span class="token punctuation">:</span> pod<span class="token punctuation">-</span>reader <span class="token comment"># è¿™ä¸ªè§’è‰²çš„åç§°ä¸ºpod-reader</span><span class="token key atrule">rules</span><span class="token punctuation">:</span><span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span> <span class="token string">""</span> <span class="token comment"># ç©ºå­—ç¬¦ä¸²"" è¡¨æ˜ä½¿ç”¨ core API group</span>  <span class="token key atrule">resources</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"pods"</span><span class="token punctuation">]</span>  <span class="token key atrule">verbs</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"get"</span><span class="token punctuation">,</span> <span class="token string">"watch"</span><span class="token punctuation">,</span> <span class="token string">"list"</span><span class="token punctuation">]</span></code></pre><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">kind</span><span class="token punctuation">:</span> RoleBinding<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> rbac.authorization.k8s.io/v1beta1<span class="token key atrule">metadata</span><span class="token punctuation">:</span>  <span class="token key atrule">name</span><span class="token punctuation">:</span> read<span class="token punctuation">-</span>pods  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> A<span class="token key atrule">subjects</span><span class="token punctuation">:</span><span class="token punctuation">-</span> <span class="token key atrule">kind</span><span class="token punctuation">:</span> User  <span class="token key atrule">name</span><span class="token punctuation">:</span> xiaoming  <span class="token key atrule">apiGroup</span><span class="token punctuation">:</span> rbac.authorization.k8s.io<span class="token key atrule">roleRef</span><span class="token punctuation">:</span>  <span class="token key atrule">kind</span><span class="token punctuation">:</span> Role  <span class="token key atrule">name</span><span class="token punctuation">:</span> pod<span class="token punctuation">-</span>reader  <span class="token key atrule">apiGroup</span><span class="token punctuation">:</span> rbac.authorization.k8s.io</code></pre><h3 id="ClusterRole-RoleBinding"><a href="#ClusterRole-RoleBinding" class="headerlink" title="ClusterRole &amp; RoleBinding"></a>ClusterRole &amp; RoleBinding</h3><blockquote><p>ClusterRoleå®šä¹‰çš„æ˜¯é€šç”¨æƒé™ã€‚ç”Ÿæ•ˆèŒƒå›´ä¾æ—§ç”±RoleBindingå†³å®šã€‚</p></blockquote><img src="/2024/01/21/rbac-quan-xian-guan-li/fig3.png" class=""><p>ClusterRoleçš„åç§°å¾€å¾€ä¼šç»™äººä¸€ç§æƒé™ç”Ÿæ•ˆèŒƒå›´æ˜¯æ•´ä¸ªé›†ç¾¤çš„æ„Ÿè§‰ï¼Œä½†äº‹å®ä¸Šå´ä¸æ˜¯è¿™æ ·çš„ã€‚<strong>æƒé™ç”Ÿæ•ˆçš„èŒƒå›´æ°¸è¿œéƒ½æ˜¯ç”±Bindingç¡®å®šçš„ã€‚</strong>ClusterRoleè®¾ç½®æƒé™çš„èŒƒå›´æ˜¯é›†ç¾¤å¯¹è±¡ã€‚</p><p>å‡è®¾ä¸€ä¸ªåœºæ™¯ï¼Œxiaomingæ˜¯æŸä¸šåŠ¡åº”ç”¨çš„è´Ÿè´£äººï¼Œè¯¥ä¸šåŠ¡åº”ç”¨ç»Ÿä¸€éƒ¨ç½²åœ¨Aå‘½åç©ºé—´ä¸‹ã€‚xiaomingéœ€è¦èƒ½å¤Ÿè§‚æµ‹åˆ°ä¸šåŠ¡å®¹å™¨çš„çŠ¶æ€ï¼Œæ­¤æ—¶ï¼Œxiaohonæƒ³è§‚æµ‹åˆ°Bå‘½åç©ºé—´çš„å®¹å™¨çŠ¶æ€ï¼Œéœ€æ±‚å’Œxiaomingä¸€è‡´ï¼Œä½†å‘½åç©ºé—´ä¸åŒï¼Œè¯¥æ€ä¹ˆåšï¼Ÿ</p><p>ä¸¤ç§åšæ³•ï¼š</p><ol><li><p>åˆ†åˆ«é’ˆå¯¹xiaomingå’Œxiaohongç”Ÿæˆå‘½åç©ºé—´Aå’Œå‘½åç©ºé—´Bçš„Roleï¼Œç„¶åå†ç”ŸæˆRoleBindingã€‚å¦‚æ­¤ï¼Œéœ€è¦å†™2ä¸ªRole.yamlå’Œ2ä¸ªRoleBinding.yaml</p></li><li><p>æŠ½è±¡å‡ºxiaomingå’Œxiaohongçš„å…¬å…±éœ€æ±‚ï¼Œç„¶åæ ¹æ®è¯¥éœ€æ±‚ç”Ÿæˆä¸€ä¸ªClusterRoleï¼Œç„¶åå†ç”Ÿæˆå„è‡ªçš„RoleBindingï¼Œé€šè¿‡RoleBindingæŠŠæƒé™ç”Ÿæ•ˆèŒƒå›´è§„å®šåœ¨ä¸åŒçš„namespaceä¸‹ã€‚</p></li></ol><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">kind</span><span class="token punctuation">:</span> ClusterRole<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> rbac.authorization.k8s.io/v1beta1<span class="token key atrule">metadata</span><span class="token punctuation">:</span>  <span class="token comment"># é‰´äº ClusterRole æ˜¯é›†ç¾¤èŒƒå›´å¯¹è±¡ï¼Œæ‰€ä»¥è¿™é‡Œä¸éœ€è¦å®šä¹‰ "namespace"</span>  <span class="token key atrule">name</span><span class="token punctuation">:</span> pod<span class="token punctuation">-</span>reader<span class="token key atrule">rules</span><span class="token punctuation">:</span><span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">""</span><span class="token punctuation">]</span><span class="token key atrule">resources</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"pods"</span><span class="token punctuation">]</span><span class="token key atrule">verbs</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"get"</span><span class="token punctuation">,</span> <span class="token string">"watch"</span><span class="token punctuation">,</span> <span class="token string">"list"</span><span class="token punctuation">]</span></code></pre><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">kind</span><span class="token punctuation">:</span> RoleBinding<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> rbac.authorization.k8s.io/v1beta1<span class="token key atrule">metadata</span><span class="token punctuation">:</span>  <span class="token key atrule">name</span><span class="token punctuation">:</span> read<span class="token punctuation">-</span>pods<span class="token punctuation">-</span>A  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> A<span class="token key atrule">subjects</span><span class="token punctuation">:</span><span class="token punctuation">-</span> <span class="token key atrule">kind</span><span class="token punctuation">:</span> User  <span class="token key atrule">name</span><span class="token punctuation">:</span> xiaoming  <span class="token key atrule">apiGroup</span><span class="token punctuation">:</span> rbac.authorization.k8s.io<span class="token key atrule">roleRef</span><span class="token punctuation">:</span>  <span class="token key atrule">kind</span><span class="token punctuation">:</span> Role  <span class="token key atrule">name</span><span class="token punctuation">:</span> pod<span class="token punctuation">-</span>reader  <span class="token key atrule">apiGroup</span><span class="token punctuation">:</span> rbac.authorization.k8s.io</code></pre><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">kind</span><span class="token punctuation">:</span> RoleBinding<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> rbac.authorization.k8s.io/v1beta1<span class="token key atrule">metadata</span><span class="token punctuation">:</span>  <span class="token key atrule">name</span><span class="token punctuation">:</span> read<span class="token punctuation">-</span>pods<span class="token punctuation">-</span>B  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> B<span class="token key atrule">subjects</span><span class="token punctuation">:</span><span class="token punctuation">-</span> <span class="token key atrule">kind</span><span class="token punctuation">:</span> User  <span class="token key atrule">name</span><span class="token punctuation">:</span> xiaohong  <span class="token key atrule">apiGroup</span><span class="token punctuation">:</span> rbac.authorization.k8s.io<span class="token key atrule">roleRef</span><span class="token punctuation">:</span>  <span class="token key atrule">kind</span><span class="token punctuation">:</span> Role  <span class="token key atrule">name</span><span class="token punctuation">:</span> pod<span class="token punctuation">-</span>reader  <span class="token key atrule">apiGroup</span><span class="token punctuation">:</span> rbac.authorization.k8s.io</code></pre><p>ä¹Ÿå¯ä»¥ä½¿ç”¨ClusterRoleæˆæƒå…¶ä»–èµ„æºæƒé™ï¼š</p><ul><li><p>é›†ç¾¤èŒƒå›´èµ„æºï¼ˆNode)</p></li><li><p>éèµ„æºç±»å‹endpoint</p></li><li><p>è·¨æ‰€æœ‰å‘½åç©ºé—´èŒƒå›´çš„èµ„æº</p></li></ul><h3 id="ClusterRole-ClusterRoleBinding"><a href="#ClusterRole-ClusterRoleBinding" class="headerlink" title="ClusterRole &amp; ClusterRoleBinding"></a>ClusterRole &amp; ClusterRoleBinding</h3><blockquote><p>ClusterRoleBindingè¡¨ç¤º<strong>ç”Ÿæ•ˆèŒƒå›´æ˜¯æ•´ä¸ªé›†ç¾¤</strong>ï¼Œä¸”åªèƒ½é…åˆClusterRoleä½¿ç”¨ã€‚</p></blockquote><img src="/2024/01/21/rbac-quan-xian-guan-li/fig4.png" class="">]]></content>
      
      
      <categories>
          
          <category> äº‘åŸç”Ÿå®‰å…¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸåˆ› </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Goè¯­è¨€é€ŸæˆæŒ‡å—ï¼ˆäºŒï¼‰</title>
      <link href="/2024/01/20/go-yu-yan-su-cheng-zhi-nan-er/"/>
      <url>/2024/01/20/go-yu-yan-su-cheng-zhi-nan-er/</url>
      
        <content type="html"><![CDATA[<h1 id="Go-è¯­è¨€é€ŸæˆæŒ‡å—ï¼ˆäºŒï¼‰"><a href="#Go-è¯­è¨€é€ŸæˆæŒ‡å—ï¼ˆäºŒï¼‰" class="headerlink" title="Go è¯­è¨€é€ŸæˆæŒ‡å—ï¼ˆäºŒï¼‰"></a>Go è¯­è¨€é€ŸæˆæŒ‡å—ï¼ˆäºŒï¼‰</h1><blockquote><p>æŠŠæ‰€æœ‰çš„ä»£ç è·Ÿç€æ•²ä¸€éï¼ŒåŸºæœ¬è¯­æ³•å…¨éƒ¨èƒ½æŒæ¡ğŸ«¡</p><p>ä»£ç ä»“åº“ï¼š<a href="https://github.com/Cidyerlia/learnGo/tree/master">https://github.com/Cidyerlia/learnGo/tree/master</a></p></blockquote><h2 id="åˆ‡ç‰‡"><a href="#åˆ‡ç‰‡" class="headerlink" title="åˆ‡ç‰‡"></a>åˆ‡ç‰‡</h2><p>Goè¯­è¨€ä¸­çš„åˆ‡ç‰‡æ˜¯å¯¹æ•°ç»„çš„æŠ½è±¡ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªæ›´ä¸ºå¼ºå¤§ä¸”çµæ´»çš„æ¥å£æ¥æ“ä½œæ•°ç»„çš„å­åºåˆ—ã€‚åˆ‡ç‰‡æ˜¯<strong>å¯å˜</strong>çš„ï¼Œå¯ä»¥åŠ¨æ€åœ°å¢åŠ å’Œå‡å°‘å¤§å°ã€‚</p><h3 id="åˆ‡ç‰‡å£°æ˜"><a href="#åˆ‡ç‰‡å£°æ˜" class="headerlink" title="åˆ‡ç‰‡å£°æ˜"></a>åˆ‡ç‰‡å£°æ˜</h3><pre class="language-go" data-language="go"><code class="language-go"><span class="token comment">// åˆ›å»ºä¸€ä¸ªç©ºåˆ‡ç‰‡ï¼Œé•¿åº¦å’Œå®¹é‡éƒ½ä¸º0</span><span class="token keyword">var</span> s <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Empty slice: "</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token comment">// ç”¨makeåˆ›å»ºä¸€ä¸ªæŒ‡å®šç±»å‹ã€é•¿åº¦å’Œå®¹é‡çš„åˆ‡ç‰‡</span>s <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">// åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º3çš„åˆ‡ç‰‡, é»˜è®¤elementæ˜¯0</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"makeåˆ›å»ºçš„åˆ‡ç‰‡ï¼š "</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span></code></pre><h3 id="åˆ‡ç‰‡åˆå§‹åŒ–"><a href="#åˆ‡ç‰‡åˆå§‹åŒ–" class="headerlink" title="åˆ‡ç‰‡åˆå§‹åŒ–"></a>åˆ‡ç‰‡åˆå§‹åŒ–</h3><pre class="language-go" data-language="go"><code class="language-go"><span class="token comment">// åˆ‡ç‰‡åˆå§‹åŒ–</span>s1 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">&#125;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"init slice: "</span><span class="token punctuation">,</span> s1<span class="token punctuation">)</span><span class="token comment">// åˆ‡ç‰‡çš„é›¶å€¼æ˜¯ nil</span><span class="token keyword">var</span> nilSlice <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token keyword">if</span> nilSlice <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"nilSlice is nil"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span></code></pre><h3 id="åˆ‡ç‰‡çš„åŸºç¡€ç”¨æ³•"><a href="#åˆ‡ç‰‡çš„åŸºç¡€ç”¨æ³•" class="headerlink" title="åˆ‡ç‰‡çš„åŸºç¡€ç”¨æ³•"></a>åˆ‡ç‰‡çš„åŸºç¡€ç”¨æ³•</h3><pre class="language-go" data-language="go"><code class="language-go"><span class="token comment">// éå†åˆ‡ç‰‡å’Œéå†æ•°ç»„çš„æ–¹å¼ä¸€è‡´ï¼Œä¹Ÿæ˜¯å»ºè®®ä½¿ç”¨ for rangeæ–¹å¼éå†</span><span class="token comment">// åˆ‡ç‰‡é•¿åº¦å’Œå®¹é‡</span>sl <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">&#125;</span><span class="token comment">// ä½¿ç”¨ len() å‡½æ•°è·å–é•¿åº¦</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Length of s "</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>sl<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">// ä½¿ç”¨cap() å‡½æ•°è·å–å®¹é‡</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Capacity of s "</span><span class="token punctuation">,</span> <span class="token function">cap</span><span class="token punctuation">(</span>sl<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">// å‘åˆ‡ç‰‡ä¸­æ·»åŠ å…ƒç´ </span>s <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"append element: "</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token comment">// åˆ‡ç‰‡çš„å¤åˆ¶æ“ä½œ</span>copyS <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>sl<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token function">copy</span><span class="token punctuation">(</span>copyS<span class="token punctuation">,</span> sl<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Copy sl to copyS "</span><span class="token punctuation">,</span> copyS<span class="token punctuation">)</span><span class="token comment">// åˆ›å»ºä¸€ä¸ªåŠ¨æ€æ•°ç»„ï¼Œå®ç°åŠ¨æ€æ·»åŠ å…ƒç´ </span>dynamicSlice <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">&#123;</span>    dynamicSlice <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>dynamicSlice<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">&#125;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"dynamicSlice is "</span><span class="token punctuation">,</span> dynamicSlice<span class="token punctuation">)</span></code></pre><p><strong>æ³¨ï¼š</strong>åˆ‡ç‰‡çš„é•¿åº¦å’Œåˆ‡ç‰‡çš„å®¹é‡ä¸èƒ½æ··ä¸ºä¸€è°ˆã€‚ä¸€ä¸ªåˆ‡ç‰‡é‡Œæœ‰å¤šå°‘ä¸ªå…ƒç´ ï¼Œå°±æ˜¯å¤šå¤§çš„é•¿åº¦ï¼Œä½†å®¹é‡å¯ä»¥è®¤ä¸ºæ˜¯ç³»ç»Ÿç»™åˆ†é…çš„é¢åº¦ã€‚å°±å¥½æ¯”ä¸€ä¸ªç”µæ¢¯æ ‡å®šèƒ½æ‰¿è½½13ä¸ªäººï¼Œä½†è¿™è¶Ÿç”µæ¢¯é‡Œæœ‰3ä¸ªäººï¼Œæ­¤æ—¶13æ˜¯å®¹é‡ï¼Œ3æ˜¯é•¿åº¦ã€‚</p><h3 id="åˆ‡ç‰‡çš„ç‰¹æ€§"><a href="#åˆ‡ç‰‡çš„ç‰¹æ€§" class="headerlink" title="åˆ‡ç‰‡çš„ç‰¹æ€§"></a>åˆ‡ç‰‡çš„ç‰¹æ€§</h3><pre class="language-go" data-language="go"><code class="language-go"><span class="token comment">// æ”¹å˜åˆ‡ç‰‡çš„å…ƒç´ ä¼šå½±å“åŸå§‹æ•°ç»„</span>myArray <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">&#125;</span>mySlice <span class="token operator">:=</span> myArray<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">4</span><span class="token punctuation">]</span>mySlice<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">100</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"myArray: "</span><span class="token punctuation">,</span> myArray<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"mySlice: "</span><span class="token punctuation">,</span> mySlice<span class="token punctuation">)</span></code></pre><pre class="language-none"><code class="language-none">myArray:  [100 2 3 4 5]mySlice:  [100 2 3 4]</code></pre><p><strong>æ³¨ï¼š</strong>ä¸Šè¿°ç¤ºä¾‹ä¹Ÿèƒ½çœ‹å‡ºï¼Œåˆ‡ç‰‡ä¸­å…ƒç´ çš„æ”¹å˜ä¼šå½±å“åˆ°åŸæ•°ç»„çš„æ”¹å˜ã€‚å› æ­¤ï¼Œå¯ä»¥é€šè¿‡<strong>ä¼ é€’åˆ‡ç‰‡çš„æ–¹å¼</strong>æ¥å¯¹åŸæ•°ç»„ä¸­çš„å…ƒç´ è¿›è¡Œä¿®æ”¹ã€‚</p><h2 id="map"><a href="#map" class="headerlink" title="map"></a>map</h2><p>åœ¨Goè¯­è¨€ä¸­ï¼Œmapæ˜¯ä¸€ç§å†…ç½®çš„key-valueå½¢å¼çš„æ•°æ®ç»“æ„ï¼Œå…¶å†…åœ¨è¿˜æ˜¯ä¸€ä¸ªå“ˆå¸Œè¡¨çš„æ˜ å°„ï¼Œå› æ­¤<strong>å­˜æ”¾çš„{key, value}ä¸€èˆ¬æ˜¯æ— åºå­˜æ”¾çš„</strong>ã€‚mapé‡Œçš„Keyè¦æ±‚æ˜¯å”¯ä¸€çš„ï¼Œ<strong>å€¼å¯ä»¥æ˜¯ä»»ä½•ç±»å‹</strong>ã€‚å…¶ä¸­<strong>Keyå¿…é¡»æ”¯æŒ&#x3D;&#x3D;å’Œ!&#x3D;çš„æ¯”è¾ƒè¿ç®—ç¬¦</strong>ï¼Œå› æ­¤ï¼ŒKeyä¸èƒ½æ˜¯åˆ‡ç‰‡ã€å‡½æ•°ã€mapç±»å‹ä»¥åŠåŒ…å«ä»¥ä¸Šä¸‰ç§ç±»å‹çš„ä»»æ„ç±»å‹ã€‚</p><h3 id="åˆ›å»ºmap"><a href="#åˆ›å»ºmap" class="headerlink" title="åˆ›å»ºmap"></a>åˆ›å»ºmap</h3><pre class="language-go" data-language="go"><code class="language-go"><span class="token comment">// åˆ›å»ºmap</span>m <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token keyword">if</span> m <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"emptyMap is nil"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"m: "</span><span class="token punctuation">,</span> m<span class="token punctuation">)</span><span class="token comment">// åˆ›å»ºä¸€ä¸ªç©ºmap</span><span class="token keyword">var</span> emptyMap <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token comment">//emptyMap["k1"] = 2  // ä¸èƒ½å‘ç©ºMapé‡Œæ·»åŠ é”®å€¼å¯¹ï¼Œå› ä¸ºç³»ç»Ÿæ²¡æœ‰ç»™ç©ºmapåˆ†é…ç©ºé—´</span><span class="token comment">//emptyMap = make(map[string]int) // åˆ†é…ç©ºé—´åï¼Œæ‰å¯ä»¥ä½¿ç”¨</span><span class="token comment">//emptyMap["k1"] = 2</span><span class="token keyword">if</span> emptyMap <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"emptyMap is nil"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span></code></pre><p><strong>æ³¨ï¼š</strong>ä½¿ç”¨makeåˆ›å»ºmapï¼Œæ˜¯æŒ‡åœ¨ç³»ç»Ÿé‡Œåˆ†é…ä¸€å—å†…å­˜ï¼ŒmæŒ‡å‘è¿™ç‰‡å†…å­˜ï¼Œå› æ­¤m !&#x3D; nilã€‚è€Œç›´æ¥åˆ›å»ºçš„mapæ˜¯æ²¡æœ‰ç³»ç»Ÿåˆ†é…å†…å­˜çš„ï¼Œå±äºç©ºmapã€‚å› æ­¤ï¼ŒemptyMap &#x3D;&#x3D; nilã€‚è¦æ³¨æ„ï¼Œå†æ²¡æœ‰ä¸ºemptyMapåˆ†é…ç©ºé—´æ—¶ï¼Œä¸å¯ä»¥å‘emptyMapé‡Œæ·»åŠ é”®å€¼å¯¹ï¼Œå¦åˆ™ä¼šå¼•å‘panicé”™è¯¯ã€‚æ­£ç¡®åšæ³•æ˜¯å…ˆä½¿ç”¨makeå‡½æ•°ä¸ºemptyMapåˆ†é…ç©ºé—´ï¼Œç„¶åå†å‘emptyMapé‡Œæ·»åŠ é”®å€¼å¯¹ã€‚</p><h3 id="mapçš„å¸¸è§æ“ä½œ"><a href="#mapçš„å¸¸è§æ“ä½œ" class="headerlink" title="mapçš„å¸¸è§æ“ä½œ"></a>mapçš„å¸¸è§æ“ä½œ</h3><pre class="language-go" data-language="go"><code class="language-go"><span class="token comment">// è®¾ç½®é”®å€¼å¯¹</span>m<span class="token punctuation">[</span><span class="token string">"k1"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"first"</span>m<span class="token punctuation">[</span><span class="token string">"k2"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"second"</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"m: "</span><span class="token punctuation">,</span> m<span class="token punctuation">)</span><span class="token comment">// è·å–é”®k1å€¼</span>v <span class="token operator">:=</span> m<span class="token punctuation">[</span><span class="token string">"k1"</span><span class="token punctuation">]</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"value: "</span><span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token comment">// ä½¿ç”¨len() è¿”å› mapä¸­çš„é”®å€¼å¯¹æ•°é‡</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"lenï¼š "</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">// å†…ç½®çš„deleteç§»é™¤é”®å€¼å¯¹</span><span class="token function">delete</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> <span class="token string">"k1"</span><span class="token punctuation">)</span><span class="token comment">// å½“è·å–çš„mapä¸­ä¸å­˜åœ¨çš„é”®å€¼å¯¹ï¼Œæœ‰é»˜è®¤çš„è¿”å›å€¼</span>v <span class="token operator">=</span> m<span class="token punctuation">[</span><span class="token string">"k3"</span><span class="token punctuation">]</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"v: "</span><span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token comment">// å¯ä»¥é€šè¿‡ä¸¤ä¸ªå˜é‡æ¥æ”¶çš„æ–¹å¼ï¼Œåˆ¤æ–­é”®æ˜¯å¦å­˜åœ¨</span><span class="token boolean">_</span><span class="token punctuation">,</span> ok <span class="token operator">:=</span> m<span class="token punctuation">[</span><span class="token string">"k2"</span><span class="token punctuation">]</span><span class="token keyword">if</span> ok <span class="token punctuation">&#123;</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"key k2 exist? "</span><span class="token punctuation">,</span> ok<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token comment">// éå†æ˜¯for range</span><span class="token keyword">for</span> key<span class="token punctuation">,</span> value <span class="token operator">:=</span> <span class="token keyword">range</span> m <span class="token punctuation">&#123;</span>    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"key: %s, value: %s\n"</span><span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">&#125;</span></code></pre><h2 id="æŒ‡é’ˆ"><a href="#æŒ‡é’ˆ" class="headerlink" title="æŒ‡é’ˆ"></a>æŒ‡é’ˆ</h2><h3 id="ä¼ å€¼å’Œä¼ å¼•ç”¨"><a href="#ä¼ å€¼å’Œä¼ å¼•ç”¨" class="headerlink" title="ä¼ å€¼å’Œä¼ å¼•ç”¨"></a>ä¼ å€¼å’Œä¼ å¼•ç”¨</h3><pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token string">"fmt"</span><span class="token keyword">func</span> <span class="token function">incrementValue</span><span class="token punctuation">(</span>val <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>val<span class="token operator">++</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">incrementPoint</span><span class="token punctuation">(</span>val <span class="token operator">*</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token operator">*</span>val<span class="token operator">++</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>a <span class="token operator">:=</span> <span class="token number">10</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"original 'a' value: "</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token comment">// ä¼ å€¼</span><span class="token function">incrementValue</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"'a' after incrementValue: "</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token comment">// ä¼ å¼•ç”¨</span><span class="token function">incrementPoint</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>a<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"'a' after incrementPoint: "</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">&#125;</span></code></pre><pre class="language-none"><code class="language-none">original &#39;a&#39; value:  10&#39;a&#39; after incrementValue:  10&#39;a&#39; after incrementPoint:  11</code></pre><p>åœ¨Goè¯­è¨€ä¸­ï¼Œå‡½æ•°å‚æ•°é»˜è®¤æ˜¯é€šè¿‡<strong>â€œå€¼ä¼ é€’â€</strong>çš„ï¼Œå³è°ƒç”¨å‡½æ•°æ—¶ä¼šå°†å®é™…å‚æ•°å€¼çš„å‰¯æœ¬ä¼ å…¥å‡½æ•°ã€‚å› æ­¤ï¼Œå¦‚æœä½ æƒ³åœ¨å‡½æ•°å†…éƒ¨ä¿®æ”¹åŸå§‹å˜é‡çš„å€¼ï¼Œé‚£å°±å¿…é¡»ç”¨åˆ°<strong>å¼•ç”¨ä¼ é€’</strong>ã€‚å¼•ç”¨ä¼ é€’æ˜¯æŒ‡åœ¨ä¼ é€’å‚æ•°æ—¶ï¼Œä¼ é€’åŸå§‹å˜é‡çš„åœ°å€ï¼Œç„¶åå‡½æ•°æ‹¿åˆ°åŸå§‹å˜é‡çš„åœ°å€ï¼Œé€šè¿‡<strong>â€œ*â€çš„æ–¹å¼è§£å¼•ç”¨</strong>ï¼Œå°±å¯ä»¥ä»å†…å­˜åœ°å€è·å–åˆ°å½“å‰å€¼ï¼Œæ­¤æ—¶ï¼Œè¿™ä¸ªå½“å‰å€¼å°±æ˜¯åŸå§‹å˜é‡çš„å€¼ï¼Œä½ é’ˆå¯¹å½“å‰å€¼çš„ä¿®æ”¹ä¼šå½±å“åˆ°åŸå§‹å˜é‡çš„å€¼ã€‚</p><p>åŸºæœ¬ç±»å‹çš„å¼•ç”¨ä¼ é€’çš„ä½¿ç”¨æ–¹å¼å’Œä¸Šè¿°ç¤ºä¾‹å·®ä¸å¤šï¼Œè¿™é‡Œå°±ä¸å¤šå†™ç¤ºä¾‹äº†ï¼Œä¸‹é¢ä¸»è¦ä»‹ç»ä¸€äº›æ•°æ®ç»“æ„ç±»å‹çš„å¼•ç”¨ä¼ é€’ã€‚</p><h3 id="å¼•ç”¨ä¼ é€’ä¿®æ”¹åˆ‡ç‰‡"><a href="#å¼•ç”¨ä¼ é€’ä¿®æ”¹åˆ‡ç‰‡" class="headerlink" title="å¼•ç”¨ä¼ é€’ä¿®æ”¹åˆ‡ç‰‡"></a>å¼•ç”¨ä¼ é€’ä¿®æ”¹åˆ‡ç‰‡</h3><p>åœ¨åˆ‡ç‰‡å°èŠ‚ä¸­è®²è¿‡è¿™ä¹ˆä¸€å¥è¯â€œåˆ‡ç‰‡ä¸­å…ƒç´ çš„æ”¹å˜ä¼šå½±å“åˆ°åŸæ•°ç»„çš„æ”¹å˜ã€‚å› æ­¤ï¼Œå¯ä»¥é€šè¿‡<strong>ä¼ é€’åˆ‡ç‰‡çš„æ–¹å¼</strong>æ¥å¯¹åŸæ•°ç»„ä¸­çš„å…ƒç´ è¿›è¡Œä¿®æ”¹â€ã€‚ä½†æ˜¯å½“æˆ‘ä»¬æŠŠåˆ‡ç‰‡ä¼ é€’åˆ°å‡½æ•°ä¸­ï¼Œæ–°å¢äº†ä¸€ä¸ªå…ƒç´ åï¼Œåˆ‡ç‰‡æ²¡æœ‰å‘ç”Ÿä»»ä½•å˜åŒ–ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿè¿™ä¸ªç¨å¾®æœ‰ç‚¹å¤æ‚ï¼Œä½†æ˜¯ä¸”å¬æˆ‘æ…¢æ…¢é“æ¥ã€‚</p><p>é¦–å…ˆï¼Œä¼ é€’åˆ‡ç‰‡ï¼Œåœ¨å‡½æ•°ä¸­ä¿®æ”¹åˆ‡ç‰‡ï¼Œç¡®å®èƒ½åšåˆ°å¯¹åŸå§‹åˆ‡ç‰‡ä¸­çš„å…ƒç´ ä¿®æ”¹ï¼Œè¿™ä¸€ç‚¹æ¯‹åº¸ç½®ç–‘ã€‚ä½†æ˜¯ï¼Œä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘åšçš„ä¸æ˜¯ä¿®æ”¹å…ƒç´ æ“ä½œï¼Œè€Œæ˜¯å¢åŠ å…ƒç´ çš„æ“ä½œã€‚åˆ‡ç‰‡æ˜¯æœ‰è‡ªå·±çš„å®¹é‡å¤§å°çš„ï¼Œå½“å®¹é‡ä¸è¶³ä»¥æ”¾ä¸‹è¿™ä¸ªå…ƒç´ æ—¶ï¼Œç³»ç»Ÿä¼šé‡æ–°åˆ†é…ä¸€ä¸ªå†…å­˜ç©ºé—´ï¼ŒåŸå…ˆçš„æ•°æ®éƒ½ä¼šè¢«æ‹·è´åˆ°æ–°çš„å†…å­˜ç©ºé—´ï¼Œç„¶åè¿”å›ä¸€ä¸ªæŒ‡å‘è¯¥å†…å­˜çš„æŒ‡é’ˆã€‚å› æ­¤ï¼Œappendæ“ä½œåï¼ŒsliceæŒ‡å‘çš„åœ°å€å·²ç»ä¸æ˜¯åŸæ¥åˆ‡ç‰‡çš„åœ°å€äº†ï¼Œæ‰€ä»¥æ‰“å°så¹¶ä¸ä¼šæœ‰é¢„æœŸçš„ç»“æœã€‚</p><p>ç›¸åï¼Œå½“æˆ‘ä»¬ä¼ é€’åˆ‡ç‰‡æŒ‡é’ˆï¼Œè¿™ä¸ªé—®é¢˜å°±è¿åˆƒè€Œè§£äº†ã€‚å› ä¸ºå½“appendæ“ä½œåï¼Œ*sliceæŒ‡é’ˆä¼šæŒ‡å‘æ–°çš„åœ°å€ï¼Œè¿™å°±æ„å‘³ç€å®ƒæ”¹å˜äº†åŸå§‹åˆ‡ç‰‡çš„åœ°å€ï¼Œè®©åŸå§‹åˆ‡ç‰‡çš„åœ°å€æŒ‡å‘äº†ä¸€ä¸ªæ–°åœ°å€ï¼Œè¿™æ ·å†æ‰“å°sï¼Œå°±æ˜¯æ–°åœ°å€é‡Œå­˜å‚¨çš„å…ƒç´ ã€‚</p><pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">appendSlice</span><span class="token punctuation">(</span>slice <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> value <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>slice <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>slice<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">appendSlicePoint</span><span class="token punctuation">(</span>slice <span class="token operator">*</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> value <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token operator">*</span>slice <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token operator">*</span>slice<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// å¼•ç”¨ä¼ é€’ slice</span>s <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">&#125;</span><span class="token function">appendSlice</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"s: "</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token function">appendSlicePoint</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>s<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"s: "</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">&#125;</span></code></pre><pre class="language-none"><code class="language-none">s:  [1 2 3]s:  [1 2 3 4]</code></pre><h3 id="å¼•ç”¨ä¼ é€’ä¿®æ”¹map"><a href="#å¼•ç”¨ä¼ é€’ä¿®æ”¹map" class="headerlink" title="å¼•ç”¨ä¼ é€’ä¿®æ”¹map"></a>å¼•ç”¨ä¼ é€’ä¿®æ”¹map</h3><p>mapæ˜¯å¼•ç”¨ç±»å‹ï¼Œä¼ å…¥å‡½æ•°æ˜¯mapçš„å¼•ç”¨ï¼Œå‡½æ•°å†…å¯¹å­å¼Ÿæ‰€åšçš„æ“ä½œä¹Ÿä¼šå½±å“åˆ°åŸå­—å…¸ã€‚</p><pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">addEmpty</span><span class="token punctuation">(</span>m <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> key <span class="token builtin">string</span><span class="token punctuation">,</span> value <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>m<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// å¼•ç”¨ä¼ é€’Map</span>m <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span><span class="token function">addEmpty</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> <span class="token string">"k1"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"m: "</span><span class="token punctuation">,</span> m<span class="token punctuation">)</span><span class="token punctuation">&#125;</span></code></pre><h3 id="å¼•ç”¨ä¼ é€’ä¿®æ”¹struct"><a href="#å¼•ç”¨ä¼ é€’ä¿®æ”¹struct" class="headerlink" title="å¼•ç”¨ä¼ é€’ä¿®æ”¹struct"></a>å¼•ç”¨ä¼ é€’ä¿®æ”¹struct</h3><p>ç»“æ„ä½“çš„ç”¨æ³•å…¶å®å’ŒCè¯­è¨€ä¸€è‡´ã€‚ä½†æ˜¯ç¨å¾®æœ‰ç‚¹ä¸åŒçš„æ˜¯ï¼ŒGoè¯­è¨€é‡Œçš„å–ç»“æ„ä½“å…ƒç´ æ—¶ï¼Œåªèƒ½é€šè¿‡â€œ.â€è·å–ï¼Œæ²¡æœ‰â€-&gt;â€è¿™ç§æ–¹å¼è·å–ã€‚æ•´ä½“æ¥è¯´å…¶å®è¿˜æ˜¯æ¯”è¾ƒäººæ€§åŒ–çš„ï¼Œæ²¡æœ‰é‚£ä¹ˆå¤šå¼¯å¼¯ç»•ç»•ã€‚æƒ³è¦æ”¹å˜ç»“æ„ä½“å†…çš„å…ƒç´ ï¼Œé‚£å°±ä½¿ç”¨ä¸‹é¢çš„å¼•ç”¨ä¼ é€’æ–¹å¼ã€‚</p><pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">type</span> Person <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span>Name <span class="token builtin">string</span>Age  <span class="token builtin">int</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">birthday</span><span class="token punctuation">(</span>p <span class="token operator">*</span>Person<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>p<span class="token punctuation">.</span>Age<span class="token operator">++</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// å¼•ç”¨ä¼ é€’ç»“æ„ä½“</span>jiamu <span class="token operator">:=</span> Person<span class="token punctuation">&#123;</span>Name<span class="token punctuation">:</span> <span class="token string">"jiamu"</span><span class="token punctuation">,</span> Age<span class="token punctuation">:</span> <span class="token number">18</span><span class="token punctuation">&#125;</span><span class="token function">birthday</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>jiamu<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>jiamu<span class="token punctuation">)</span><span class="token punctuation">&#125;</span></code></pre><h2 id="å­—ç¬¦ä¸²"><a href="#å­—ç¬¦ä¸²" class="headerlink" title="å­—ç¬¦ä¸²"></a>å­—ç¬¦ä¸²</h2><p>åœ¨Goè¯­è¨€ä¸­ï¼Œå­—ç¬¦ä¸²æ˜¯ä¸å¯å˜çš„å­—èŠ‚åºåˆ—ï¼Œå®ƒå¯ä»¥åŒ…å«ä»»æ„çš„æ•°æ®ï¼ŒåŒ…æ‹¬å­—èŠ‚çš„0å€¼ã€‚æ¯ä¸ªå­—ç¬¦ä¸²éƒ½å¯ä»¥çœ‹ä½œæ˜¯ç”±byteç±»å‹çš„æ•°ç»„ç»„æˆã€‚å­—ç¬¦ä¸²å¯ä»¥åŒ…å«UTF-8ç¼–ç çš„æ–‡æœ¬ï¼Œå› æ­¤å¯ä»¥è¡¨ç¤ºå¤šç§è¯­è¨€çš„å­—ç¬¦ã€‚Goè¯­è¨€ä¸­çš„runeç±»å‹è¡¨ç¤ºå•ä¸ªUnicodeå­—ç¬¦ã€‚</p><h3 id="å­—ç¬¦ä¸²ç¼–ç "><a href="#å­—ç¬¦ä¸²ç¼–ç " class="headerlink" title="å­—ç¬¦ä¸²ç¼–ç "></a>å­—ç¬¦ä¸²ç¼–ç </h3><pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">var</span> s1 <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">"hello world"</span>s2 <span class="token operator">:=</span> <span class="token string">"ä½ å¥½ï¼Œä¸–ç•Œ"</span><span class="token comment">// æŸ¥çœ‹é•¿åº¦</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"The length of s1: "</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"The length of s2: "</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">// å•å­—ç¬¦æ‰“å°</span><span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token function">len</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%x "</span><span class="token punctuation">,</span> s2<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> r <span class="token operator">:=</span> <span class="token keyword">range</span> s2 <span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%x "</span><span class="token punctuation">,</span> r<span class="token punctuation">)</span><span class="token punctuation">&#125;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span></code></pre><pre class="language-none"><code class="language-none">The length of s1:  11The length of s2:  15e4 bd a0 e5 a5 bd ef bc 8c e4 b8 96 e7 95 8c4f60 597d ff0c 4e16 754c</code></pre><p>åœ¨å­˜å‚¨æ—¶ï¼Œå­—ç¬¦å ç”¨çš„ä½æ•°å–å†³äºæ‰€ä½¿ç”¨çš„ç¼–ç æ–¹å¼ï¼ŒGoé»˜è®¤ä½¿ç”¨UTF-8ç¼–ç æ–¹å¼ã€‚å½“å­˜å‚¨Asciiå­—ç¬¦æ—¶ï¼Œä¸€èˆ¬æ˜¯ä¸€ä¸ªå­—ç¬¦å¯¹åº”ä¸€ä¸ªå­—èŠ‚å­˜å‚¨ã€‚å› æ­¤s1çš„é•¿åº¦æ˜¯11ã€‚ä½†æ˜¯ï¼Œå¯¹äºunicodeå­—ç¬¦åˆ™ä¸ç„¶ã€‚å¦‚æœä½¿ç”¨len()å‡½æ•°è®¡ç®—ï¼Œ5ä¸ªä¸­æ–‡å­—ç¬¦çš„é•¿åº¦ï¼Œå´æ˜¾ç¤ºæ˜¯15ã€‚è¿™æ˜¯å› ä¸ºåœ¨UTF-8ç¼–ç ä¸­ï¼Œä¸­æ–‡éœ€è¦ç”¨3ä¸ªå­—èŠ‚è¡¨ç¤ºï¼Œæ‰€ä»¥æŒ‰ç…§å­—èŠ‚é•¿åº¦è®¡ç®—å°±æ˜¯3*5&#x3D;15ã€‚</p><p>æ‰“å°ä¸­æ–‡å­—ç¬¦æ—¶ï¼Œä½¿ç”¨for rangeæ–¹æ³•ï¼Œå¯ä»¥åšåˆ°æ‰“å°æ¯ä¸€ä¸ªå­—ç¬¦ï¼Œä¸è¦ä½¿ç”¨å•å­—èŠ‚æ‰“å°ï¼Œè¿™æ ·ä¼šå¯¼è‡´å­—ç¬¦ä¸²è¢«ä¸æ­£ç¡®çš„åˆ‡åˆ†ã€‚</p><h3 id="å­—ç¬¦ä¸²åˆ‡åˆ†"><a href="#å­—ç¬¦ä¸²åˆ‡åˆ†" class="headerlink" title="å­—ç¬¦ä¸²åˆ‡åˆ†"></a>å­—ç¬¦ä¸²åˆ‡åˆ†</h3><pre class="language-go" data-language="go"><code class="language-go"><span class="token comment">// ä¸­æ–‡å­—ç¬¦ä¸²æˆªå–</span>r <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">rune</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span><span class="token comment">// å•å­—ç¬¦æ‰“å°</span><span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token function">len</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">&#123;</span>    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"char %d: %c\n"</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> r<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token comment">// æˆªå–ä¸­æ–‡å­—ç¬¦ä¸²çš„å‰ä¸¤ä¸ªæ–‡å­—</span>substr <span class="token operator">:=</span> <span class="token function">string</span><span class="token punctuation">(</span>r<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"substr: "</span><span class="token punctuation">,</span> substr<span class="token punctuation">)</span></code></pre><pre class="language-none"><code class="language-none">char 0: ä½ char 1: å¥½char 2: ï¼Œchar 3: ä¸–char 4: ç•Œsubstr:  ä½ å¥½</code></pre><h3 id="å­—ç¬¦ä¸²åŸºæœ¬æ“ä½œ"><a href="#å­—ç¬¦ä¸²åŸºæœ¬æ“ä½œ" class="headerlink" title="å­—ç¬¦ä¸²åŸºæœ¬æ“ä½œ"></a>å­—ç¬¦ä¸²åŸºæœ¬æ“ä½œ</h3><pre class="language-go" data-language="go"><code class="language-go"><span class="token comment">// å­—ç¬¦ä¸²æ‹¼æ¥</span>s3 <span class="token operator">:=</span> s1 <span class="token operator">+</span> s2fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s3<span class="token punctuation">)</span><span class="token comment">// å­—ç¬¦ä¸²æ¯”è¾ƒ</span><span class="token keyword">if</span> s1 <span class="token operator">==</span> <span class="token string">"hello world"</span> <span class="token punctuation">&#123;</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"s1 equals to 'hello world'"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token comment">// å­—ç¬¦ä¸²åˆ†å‰²</span>parts <span class="token operator">:=</span> strings<span class="token punctuation">.</span><span class="token function">Split</span><span class="token punctuation">(</span>s3<span class="token punctuation">,</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> part <span class="token operator">:=</span> <span class="token keyword">range</span> parts <span class="token punctuation">&#123;</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>part<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token comment">// å­—ç¬¦ä¸²åŒ…å«</span><span class="token keyword">if</span> strings<span class="token punctuation">.</span><span class="token function">Contains</span><span class="token punctuation">(</span>s3<span class="token punctuation">,</span> <span class="token string">"ä¸–ç•Œ"</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"s3 contains 'ä¸–ç•Œ'"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token comment">// å­—ç¬¦ä¸²æ›¿æ¢ï¼Œæ›¿æ¢æ‰€æœ‰åŒ¹é…é¡¹(n = -1)</span>news3 <span class="token operator">:=</span> strings<span class="token punctuation">.</span><span class="token function">Replace</span><span class="token punctuation">(</span>s3<span class="token punctuation">,</span> <span class="token string">"hello"</span><span class="token punctuation">,</span> <span class="token string">"hi"</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>news3<span class="token punctuation">)</span><span class="token comment">// å­å­—ç¬¦ä¸²åˆ¤æ–­</span>isPrefix <span class="token operator">:=</span> strings<span class="token punctuation">.</span><span class="token function">HasPrefix</span><span class="token punctuation">(</span>s3<span class="token punctuation">,</span> <span class="token string">"hello"</span><span class="token punctuation">)</span>isSuffix <span class="token operator">:=</span> strings<span class="token punctuation">.</span><span class="token function">HasSuffix</span><span class="token punctuation">(</span>s3<span class="token punctuation">,</span> <span class="token string">"ä¸–ç•Œ"</span><span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Prefix: "</span><span class="token punctuation">,</span> isPrefix<span class="token punctuation">,</span> <span class="token string">"Suffix: "</span><span class="token punctuation">,</span> isSuffix<span class="token punctuation">)</span></code></pre><h2 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h2><p>åœ¨Goè¯­è¨€ä¸­ï¼Œå‡½æ•°æ˜¯åŸºæœ¬çš„ä»£ç å—ï¼Œå¯ä»¥è¢«å¤šæ¬¡è°ƒç”¨å’Œå¤ç”¨ã€‚Goæ”¯æŒåŒ¿åå‡½æ•°ï¼Œå®ƒä»¬å¯ç”¨äºå®šä¹‰å†…è”å‡½æ•°ä»¥åŠå®ç°å‡½æ•°å¼ç¼–ç¨‹ã€‚</p><h3 id="å‡½æ•°å®šä¹‰å’Œè°ƒç”¨"><a href="#å‡½æ•°å®šä¹‰å’Œè°ƒç”¨" class="headerlink" title="å‡½æ•°å®šä¹‰å’Œè°ƒç”¨"></a>å‡½æ•°å®šä¹‰å’Œè°ƒç”¨</h3><pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">add</span><span class="token punctuation">(</span>a <span class="token builtin">int</span><span class="token punctuation">,</span> b <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// è°ƒç”¨addå‡½æ•°</span>result <span class="token operator">:=</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"result: "</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">&#125;</span></code></pre><p>ä¸Šè¿°ç¤ºä¾‹å®šä¹‰äº†ä¸€ä¸ªç®€å•çš„addå‡½æ•°ï¼Œå¹¶åœ¨mainå‡½æ•°é‡Œè°ƒç”¨äº†addå‡½æ•°ã€‚ä¸éš¾çœ‹å‡ºï¼ŒGoè¯­è¨€çš„å‡½æ•°å®šä¹‰å’Œè°ƒç”¨å’Œå…¶å®ƒè¯­è¨€ç±»ä¼¼ï¼Œåªè¦æŒæ¡ä¸Šè¿°ç®€å•çš„å‡½æ•°å®šä¹‰æ–¹æ³•å’Œè°ƒç”¨æ–¹æ³•ï¼Œå°±èƒ½åšåˆ°è§¦ç±»æ—é€šï¼Œå†™æ›´å¤šçš„è‡ªå®šä¹‰å‡½æ•°ã€‚</p><h3 id="åŒ¿åå‡½æ•°"><a href="#åŒ¿åå‡½æ•°" class="headerlink" title="åŒ¿åå‡½æ•°"></a>åŒ¿åå‡½æ•°</h3><p>åŒ¿åå‡½æ•°æ˜¯æ²¡æœ‰å‡½æ•°åçš„å‡½æ•°ã€‚åœ¨Goé‡Œï¼Œå¯ä»¥ç›´æ¥å®šä¹‰ä¸€ä¸ªåŒ¿åå‡½æ•°å¹¶ç«‹å³æ‰§è¡Œï¼Œä¹Ÿå¯ä»¥å°†åŒ¿åå‡½æ•°èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ç¨åæ‰§è¡Œã€‚</p><pre class="language-go" data-language="go"><code class="language-go"><span class="token comment">// åŒ¿åå‡½æ•°ç›´æ¥æ‰§è¡Œ</span><span class="token keyword">func</span><span class="token punctuation">(</span>message <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token string">"hello world"</span><span class="token punctuation">)</span><span class="token comment">// åŒ¿åå‡½æ•°èµ‹å€¼ç»™å˜é‡</span>sum <span class="token operator">:=</span> <span class="token keyword">func</span><span class="token punctuation">(</span>a <span class="token builtin">int</span><span class="token punctuation">,</span> b <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">&#125;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"sum : "</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><h3 id="é—­åŒ…"><a href="#é—­åŒ…" class="headerlink" title="é—­åŒ…"></a>é—­åŒ…</h3><pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">closure</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">&#123;</span>sum <span class="token operator">:=</span> <span class="token number">0</span><span class="token keyword">return</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">&#123;</span>sum<span class="token operator">++</span><span class="token keyword">return</span> sum<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>increment <span class="token operator">:=</span> <span class="token function">closure</span><span class="token punctuation">(</span><span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span></code></pre><pre class="language-none"><code class="language-none">123</code></pre><p>é—­åŒ…æœ€å¥½çš„ç†è§£å°±æ˜¯è¦å’Œâ€œç”Ÿæˆå™¨â€è¿™ä¸ªæ¦‚å¿µæŒ‚é’©ã€‚å°±å¥½æ¯”å½“æˆ‘ä»¬è§¦å‘ä¸€æ¬¡ç”Ÿæˆå™¨ï¼ŒåŸæ¥çš„æ•°å€¼å°±ä¼š+1ã€‚ä»å½¢çŠ¶ä¸Šæ¥çœ‹ï¼Œé—­åŒ…åƒæ˜¯å‡½æ•°çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°ä½“é‡Œæœ‰ä¸€ä¸ªå‡½æ•°ã€‚ç°åœ¨æˆ‘ä»¬å°†å‡½æ•°ä½“é‡Œçš„å‡½æ•°æŠ½è±¡æˆä¸€ä¸ªå˜é‡ï¼Œè¿™ä¸ªå˜é‡å’Œé—­åŒ…å‡½æ•°çš„å˜é‡å…±äº«ä¸€ä¸ªä½œç”¨åŸŸï¼Œå› æ­¤ï¼Œå¯ä»¥äº’ç›¸â€œå¯è§â€ã€‚</p><h3 id="å‡½æ•°å¼ç¼–ç¨‹"><a href="#å‡½æ•°å¼ç¼–ç¨‹" class="headerlink" title="å‡½æ•°å¼ç¼–ç¨‹"></a>å‡½æ•°å¼ç¼–ç¨‹</h3><p>åœ¨Goä¸­ï¼Œå¯ä»¥å°†å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ç»™å…¶å®ƒå‡½æ•°ï¼Œä¹Ÿå¯ä»¥å°†å‡½æ•°ä½œä¸ºå…¶å®ƒå‡½æ•°çš„è¿”å›å€¼ã€‚</p><pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">createAdder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">func</span><span class="token punctuation">(</span>addend <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> addend <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// å‡½æ•°ä½œä¸ºå‚æ•°</span>sum1 <span class="token operator">:=</span> <span class="token function">applyFunc</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> add<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"10 + 20 = "</span><span class="token punctuation">,</span> sum1<span class="token punctuation">)</span><span class="token comment">// å‡½æ•°ä½œä¸ºè¿”å›å€¼</span>adder <span class="token operator">:=</span> <span class="token function">createAdder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"40 + 5 = "</span><span class="token punctuation">,</span> <span class="token function">adder</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span></code></pre><h2 id="é¢å‘å¯¹è±¡"><a href="#é¢å‘å¯¹è±¡" class="headerlink" title="é¢å‘å¯¹è±¡"></a>é¢å‘å¯¹è±¡</h2><p>Goè¯­è¨€å¹¶ä¸æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€ï¼Œæ²¡æœ‰ç±»å’Œç»§æ‰¿çš„æ¦‚å¿µï¼Œä½†æ˜¯ä»–æ”¯æŒä¸€äº›é¢å‘å¯¹è±¡çš„é‡è¦ç‰¹æ€§ã€‚æ¯”å¦‚ç”¨ç»“æ„ä½“è¡¨ç¤ºå¯¹è±¡çš„å±æ€§ï¼Œä½¿ç”¨æ¥å£æä¾›å¤šæ€ã€‚</p><h3 id="ç»“æ„ä½“"><a href="#ç»“æ„ä½“" class="headerlink" title="ç»“æ„ä½“"></a>ç»“æ„ä½“</h3><p>Goè¯­è¨€çš„ç»“æ„ä½“å’ŒCè¯­è¨€å¾ˆç›¸ä¼¼ã€‚</p><ul><li>ç»“æ„ä½“å®šä¹‰</li></ul><pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">type</span> Person <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span>    Name <span class="token builtin">string</span>    Age <span class="token builtin">int</span>    Height <span class="token builtin">float32</span><span class="token punctuation">&#125;</span></code></pre><ul><li>ç»“æ„ä½“åˆå§‹åŒ–</li></ul><pre class="language-go" data-language="go"><code class="language-go">p1 <span class="token operator">:=</span> Person<span class="token punctuation">&#123;</span>Name<span class="token punctuation">:</span> <span class="token string">"Alice"</span><span class="token punctuation">,</span> Age<span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">,</span> Height<span class="token punctuation">:</span> <span class="token number">1.65</span><span class="token punctuation">&#125;</span>  <span class="token comment">// å®šä¹‰ä¸€ä¸ªPersonç±»å‹çš„ç»“æ„ä½“å˜é‡p1å¹¶åˆå§‹åŒ–</span>p2 <span class="token operator">:=</span> <span class="token function">new</span><span class="token punctuation">(</span>Person<span class="token punctuation">)</span>  <span class="token comment">// å®šä¹‰ä¸€ä¸ªæŒ‡å‘Personç±»å‹çš„æŒ‡é’ˆå˜é‡p2ï¼Œå¹¶åˆ†é…å†…å­˜ç©ºé—´</span></code></pre><ul><li>ç»“æ„ä½“å…ƒç´ è®¿é—®ï¼ˆâ€.â€å·è®¿é—®ï¼‰</li></ul><p>æŒ‡é’ˆå’Œæ™®é€šçš„å¯¹è±¡ç±»å‹éƒ½æ˜¯ä½¿ç”¨â€œ.â€å·è®¿é—®ã€‚</p><pre class="language-go" data-language="go"><code class="language-go">p1<span class="token punctuation">.</span>Name <span class="token operator">=</span> <span class="token string">"Alice"</span>  <span class="token comment">// ç»™p1çš„Nameèµ‹å€¼ä¸º"Alice"</span>p1<span class="token punctuation">.</span>Age <span class="token operator">=</span> <span class="token number">20</span>  <span class="token comment">// ç»™p1çš„Ageèµ‹å€¼ä¸º20</span>p1<span class="token punctuation">.</span>Height <span class="token operator">=</span> <span class="token number">1.65</span>  <span class="token comment">// ç»™p1çš„Heightèµ‹å€¼ä¸º1.65</span></code></pre><h3 id="é¢å‘å¯¹è±¡ç‰¹æ€§"><a href="#é¢å‘å¯¹è±¡ç‰¹æ€§" class="headerlink" title="é¢å‘å¯¹è±¡ç‰¹æ€§"></a>é¢å‘å¯¹è±¡ç‰¹æ€§</h3><p>Goè¿˜æ”¯æŒä¸€äº›é¢å‘å¯¹è±¡çš„ç¼–ç¨‹ç‰¹æ€§ï¼Œéå¸¸çš„çµæ´»å’Œå¼ºå¤§ï¼ï¼ï¼</p><pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token punctuation">(</span>p <span class="token operator">*</span>Person<span class="token punctuation">)</span> <span class="token function">GetInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">"Name: %s, Age: %d, Height: %.2f"</span><span class="token punctuation">,</span> p<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> p<span class="token punctuation">.</span>Age<span class="token punctuation">,</span> p<span class="token punctuation">.</span>Height<span class="token punctuation">)</span><span class="token punctuation">&#125;</span>p1<span class="token punctuation">.</span><span class="token function">GetInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// è°ƒç”¨p1çš„GetInfoæ–¹æ³•ï¼Œè¿”å›"Name: Alice, Age: 20, Height: 1.65"</span></code></pre><p>è¿™ä¸ªæ–¹æ³•å®šä¹‰äº†ä¸€ä¸ª<font color="red"><strong>æŒ‡é’ˆç±»å‹ä¸ºPersonçš„æ–¹æ³•GetInfo</strong></font>ï¼Œç”¨æ¥è¿”å›ä¸€ä¸ªåŒ…å«Personå¯¹è±¡ä¿¡æ¯çš„å­—ç¬¦ä¸²ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒç”¨ç»“æ„ä½“å˜é‡çš„æ–¹æ³•æ¥å®ç°å¯¹ç»“æ„ä½“å¯¹è±¡çš„æ“ä½œã€‚è¿™ç§ä½¿ç”¨æ–¹æ³•å°±å¾ˆæ£’ï¼è¿™å°±æœ‰ç‚¹åƒç±»æ–¹æ³•ï¼ŒGetInfoå‡½æ•°å°±æ˜¯Personç»“æ„ä½“çš„ç±»æ–¹æ³•ã€‚æƒ³è¦ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œé‚£ä¹ˆå°±éœ€è¦å…ˆæ„é€ ä¸€ä¸ªPersonçš„ç»“æ„ä½“å¯¹è±¡ï¼Œç„¶åé€šè¿‡å¯¹è±¡è°ƒç”¨ã€‚</p><p>æ­¤å¤–ï¼ŒGoè¿˜æ”¯æŒå°è£…ã€ç»§æ‰¿ã€å¤šæ€çš„ç‰¹æ€§ï¼Œç”¨æ¥å®ç°å¤æ‚çš„å¯¹è±¡æ¨¡å‹å’Œæ•°æ®ç»“æ„ã€‚</p><ul><li>å°è£…</li></ul><pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">type</span> Person <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span>    name <span class="token builtin">string</span>    age <span class="token builtin">int</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token punctuation">(</span>p <span class="token operator">*</span>Person<span class="token punctuation">)</span> <span class="token function">SetName</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    p<span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token punctuation">(</span>p <span class="token operator">*</span>Person<span class="token punctuation">)</span> <span class="token function">GetName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> p<span class="token punctuation">.</span>name<span class="token punctuation">&#125;</span></code></pre><p>è¿™ä¸ªç»“æ„ä½“å®šä¹‰äº†ä¸€ä¸ªåä¸ºPersonçš„ç»“æ„ä½“ç±»å‹ï¼ŒåŒ…å«äº†<font color="red"><strong>ä¸¤ä¸ªç§æœ‰çš„æˆå‘˜å˜é‡nameå’Œage</strong></font>ï¼Œä»¥åŠä¸¤ä¸ªå…¬æœ‰çš„æ–¹æ³•SetNameå’ŒGetNameï¼Œç”¨æ¥è®¾ç½®å’Œè·å–nameæˆå‘˜å˜é‡çš„å€¼ã€‚ä¸åŒäºå…¶å®ƒè¯­è¨€ä½¿ç”¨Publicï¼ŒPrivateå®šä¹‰å…¬æœ‰å’Œç§æœ‰ï¼ŒGoä½¿ç”¨ç¼–ç¨‹è§„èŒƒæ¥å®šä¹‰è¿™ä¸ªæ¦‚å¿µã€‚<strong>å˜é‡åé¦–å­—æ¯å¤§å†™ä»£è¡¨å…¬æœ‰ï¼Œå¯¹å¤–å¯è§ï¼›å˜é‡åé¦–å­—æ¯å°å†™ä»£è¡¨ç§æœ‰ï¼Œå¯¹å¤–ä¸å¯è§ã€‚</strong>ï¼ˆç»è¿‡å®éªŒï¼Œä¸Šé¢çš„è¯´æ³•æ˜¯æœ‰ä¸€ä¸ªå¤§å‰æçš„ã€‚<font color="red"><strong>åŒä¸€ä¸ªåŒ…å†…ï¼Œæ— è®ºæ˜¯å…¬æœ‰å˜é‡è¿˜æ˜¯ç§æœ‰å˜é‡ï¼Œåœ¨ä»»ä½•åœ°æ–¹éƒ½å¯ä»¥è®¿é—®ï¼ï¼ï¼ï¼</strong></font>ï¼Œåªæœ‰åœ¨<strong>ä¸åŒçš„åŒ…</strong>é‡Œï¼Œæ‰æœ‰ä¸Šé¢å˜é‡åå¤§å°å†™æ¥æ§åˆ¶å¯è§æ€§çš„è¯´æ³•ã€‚ğŸ˜£ğŸ˜£ğŸ˜£ï¼‰Goçš„å˜é‡å‘½åä¸»è¦ä½¿ç”¨é©¼å³°å‘½åæ³•ï¼Œä¹Ÿç®—æ˜¯çº¦å®šä¿—æˆå§ã€‚</p><ul><li>ç»§æ‰¿å’Œç»„åˆ</li></ul><pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">type</span> Person <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span>    name <span class="token builtin">string</span>    age <span class="token builtin">int</span><span class="token punctuation">&#125;</span><span class="token keyword">type</span> Student <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span>    Person  <span class="token comment">// åŒ¿ååµŒå¥—Personç»“æ„ä½“</span>    id <span class="token builtin">string</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token punctuation">(</span>s <span class="token operator">*</span>Student<span class="token punctuation">)</span> <span class="token function">SetId</span><span class="token punctuation">(</span>id <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    s<span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">&#125;</span></code></pre><p>è¿™ä¸ªç»“æ„ä½“å®šä¹‰äº†ä¸€ä¸ªåä¸ºStudentçš„ç»“æ„ä½“ç±»å‹ï¼Œé€šè¿‡åŒ¿ååµŒå¥—Personç»“æ„ä½“ï¼Œå®ç°äº†ä»Personç»“æ„ä½“ç»§æ‰¿äº†nameå’Œageæˆå‘˜å˜é‡å’Œæ–¹æ³•ï¼Œå¹¶æ·»åŠ äº†ä¸€ä¸ªidæˆå‘˜å˜é‡å’ŒSetIdæ–¹æ³•ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡Studentç»“æ„ä½“æ¥è®¿é—®å’Œæ“ä½œPersonç»“æ„ä½“çš„æˆå‘˜å˜é‡å’Œæ–¹æ³•ã€‚<strong>åŒ¿ååµŒå¥—æ˜¯ç»§æ‰¿ï¼Œä¸åŒ¿åå°±æ˜¯ç»„åˆçš„ä½¿ç”¨æ–¹æ³•äº†ã€‚</strong></p><ul><li>æ¥å£å¤šæ€</li></ul><p>å£°æ˜ä¸€ä¸ªShapeç±»å‹çš„æ¥å£ï¼Œè¯¥æ¥å£é‡Œå®šä¹‰äº†Area()å‡½æ•°ã€‚Rectangleå’ŒCircleå®ç°äº†Shapeç±»å‹æ¥å£é‡Œçš„Area()çš„æ–¹æ³•ï¼Œå¯ä»¥è®¤å®šä¸ºæ˜¯ä¸€ä¸ªå®ç°ç±»ã€‚PrintAreaæ–¹æ³•æ¥å—ä¸€ä¸ªShapeç±»å‹çš„æ•°æ®ï¼Œç„¶åè¾“å‡ºé¢ç§¯ã€‚è¿™ä¸ªå½¢å‚æ˜¯Shapeç±»å‹ï¼Œå› æ­¤ï¼Œå°±æœ‰äº†ä¸€ä¸ªâ€œ<strong>å‘ä¸Šè½¬å‹</strong>â€çš„æ•ˆæœã€‚</p><pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token punctuation">(</span><span class="token string">"fmt"</span><span class="token string">"math"</span><span class="token punctuation">)</span><span class="token keyword">type</span> Shape <span class="token keyword">interface</span> <span class="token punctuation">&#123;</span><span class="token function">Area</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">float64</span><span class="token punctuation">&#125;</span><span class="token keyword">type</span> Rectangle <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span>Width  <span class="token builtin">float64</span>Height <span class="token builtin">float64</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token punctuation">(</span>r Rectangle<span class="token punctuation">)</span> <span class="token function">Area</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">float64</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> r<span class="token punctuation">.</span>Width <span class="token operator">*</span> r<span class="token punctuation">.</span>Height<span class="token punctuation">&#125;</span><span class="token keyword">type</span> Circle <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span>Radius <span class="token builtin">float64</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token punctuation">(</span>c Circle<span class="token punctuation">)</span> <span class="token function">Area</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">float64</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> math<span class="token punctuation">.</span>Pi <span class="token operator">*</span> c<span class="token punctuation">.</span>Radius <span class="token operator">*</span> c<span class="token punctuation">.</span>Radius<span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">PrintArea</span><span class="token punctuation">(</span>s Shape<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">Area</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>r <span class="token operator">:=</span> Rectangle<span class="token punctuation">&#123;</span>Width<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> Height<span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">&#125;</span>c <span class="token operator">:=</span> Circle<span class="token punctuation">&#123;</span>Radius<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">&#125;</span>  <span class="token function">PrintArea</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span> <span class="token comment">// è¾“å‡º 12</span><span class="token function">PrintArea</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token comment">// è¾“å‡º 78.53981633974483</span><span class="token punctuation">&#125;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Goè¯­è¨€å…¥é—¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸåˆ› </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Goè¯­è¨€é€ŸæˆæŒ‡å—ï¼ˆä¸€ï¼‰</title>
      <link href="/2024/01/13/go-yu-yan-su-cheng-zhi-nan-yi/"/>
      <url>/2024/01/13/go-yu-yan-su-cheng-zhi-nan-yi/</url>
      
        <content type="html"><![CDATA[<h1 id="Go-è¯­è¨€é€ŸæˆæŒ‡å—ï¼ˆä¸€ï¼‰"><a href="#Go-è¯­è¨€é€ŸæˆæŒ‡å—ï¼ˆä¸€ï¼‰" class="headerlink" title="Go è¯­è¨€é€ŸæˆæŒ‡å—ï¼ˆä¸€ï¼‰"></a>Go è¯­è¨€é€ŸæˆæŒ‡å—ï¼ˆä¸€ï¼‰</h1><blockquote><p>æŠŠæ‰€æœ‰çš„ä»£ç è·Ÿç€æ•²ä¸€éï¼ŒåŸºæœ¬è¯­æ³•å…¨éƒ¨èƒ½æŒæ¡ğŸ«¡</p><p>ä»£ç ä»“åº“ï¼š<a href="https://github.com/Cidyerlia/learnGo/tree/master">https://github.com/Cidyerlia/learnGo/tree/master</a></p></blockquote><h2 id="å˜é‡"><a href="#å˜é‡" class="headerlink" title="å˜é‡"></a>å˜é‡</h2><h3 id="å˜é‡å®šä¹‰"><a href="#å˜é‡å®šä¹‰" class="headerlink" title="å˜é‡å®šä¹‰"></a>å˜é‡å®šä¹‰</h3><pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token string">"fmt"</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// å˜é‡å®šä¹‰æœ‰ä¸¤ç§æ–¹å¼</span><span class="token comment">// æ–¹å¼ä¸€ï¼švarå®šä¹‰</span><span class="token keyword">var</span> words <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">"hello world"</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>words<span class="token punctuation">)</span><span class="token comment">// æ–¹å¼äºŒï¼š`:`å®šä¹‰ï¼Œ è‡ªåŠ¨æ¨æ–­å˜é‡ç±»å‹</span>sentences <span class="token operator">:=</span> <span class="token string">"hello go"</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>sentences<span class="token punctuation">)</span><span class="token punctuation">&#125;</span></code></pre><p><strong>æ³¨é‡Šï¼š</strong>æ–¹å¼äºŒçš„å®šä¹‰æ–¹æ³•åªèƒ½åœ¨å‡½æ•°ä¸­ä½¿ç”¨ã€‚</p><h3 id="å†…å»ºå˜é‡ç±»å‹"><a href="#å†…å»ºå˜é‡ç±»å‹" class="headerlink" title="å†…å»ºå˜é‡ç±»å‹"></a>å†…å»ºå˜é‡ç±»å‹</h3><pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token string">"fmt"</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// Go è¯­è¨€å†…å»ºç±»å‹åˆ†ä¸º5ç§ï¼Œåˆ†åˆ«æ˜¯æ•´æ•°ç±»å‹ã€æµ®ç‚¹æ•°ç±»å‹ã€å­—èŠ‚ç±»å‹ã€å¤æ•°ç±»å‹ä»¥åŠå¸ƒå°”ç±»å‹</span><span class="token comment">// æ•´æ•°ç±»å‹</span><span class="token comment">// å®šä¹‰ä¸€ä¸ªIntç±»å‹çš„æ•´æ•°ï¼Œint é»˜è®¤æ˜¯4å­—èŠ‚</span><span class="token keyword">var</span> a <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">10</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token comment">// å®šä¹‰ä¸€ä¸ªInt8ç±»å‹çš„æ•´æ•°</span><span class="token keyword">var</span> b <span class="token builtin">int8</span> <span class="token operator">=</span> <span class="token number">10</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token comment">// å®šä¹‰ä¸€ä¸ªuintç±»å‹çš„æ•´æ•°</span><span class="token keyword">var</span> c <span class="token builtin">uint</span> <span class="token operator">=</span> <span class="token number">10</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token comment">// æµ®ç‚¹æ•°ç±»å‹ï¼Œä¸åŒäºå…¶å®ƒè¯­è¨€ï¼Œæµ®ç‚¹æ•°ç±»å‹åç§°éƒ½æ˜¯floatï¼Œæ²¡æœ‰double</span><span class="token keyword">var</span> d <span class="token builtin">float32</span> <span class="token operator">=</span> <span class="token number">10.5</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token comment">// å­—èŠ‚ç±»å‹</span><span class="token keyword">var</span> e <span class="token builtin">byte</span> <span class="token operator">=</span> <span class="token char">'a'</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token keyword">var</span> f <span class="token builtin">rune</span> <span class="token operator">=</span> <span class="token char">'ä½ '</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token comment">// å¤æ•°ç±»å‹ 3+3i</span><span class="token keyword">var</span> g <span class="token builtin">complex64</span> <span class="token operator">=</span> <span class="token number">3</span> <span class="token operator">+</span> <span class="token number">3i</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>g<span class="token punctuation">)</span><span class="token comment">// å¸ƒå°”ç±»å‹</span><span class="token keyword">var</span> h <span class="token builtin">bool</span> <span class="token operator">=</span> <span class="token boolean">true</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>h<span class="token punctuation">)</span><span class="token punctuation">&#125;</span></code></pre><pre class="language-none"><code class="language-none">10101010.59720320(3+3i)true</code></pre><p>é‡ç‚¹è¯´æ˜runeç±»å‹ï¼Œå…¶æœ¬è´¨æ˜¯ä¸€ä¸ªIntç±»å‹ï¼Œå®ƒçš„å‡ºç°ä¸»è¦æ˜¯ä¸ºäº†è§£å†³Unicodeå­—ç¬¦å’Œutf-8ç¼–ç çš„é—®é¢˜ã€‚</p><h2 id="å¸¸é‡"><a href="#å¸¸é‡" class="headerlink" title="å¸¸é‡"></a>å¸¸é‡</h2><h3 id="å¸¸é‡å£°æ˜"><a href="#å¸¸é‡å£°æ˜" class="headerlink" title="å¸¸é‡å£°æ˜"></a>å¸¸é‡å£°æ˜</h3><pre class="language-go" data-language="go"><code class="language-go"><span class="token comment">// å£°æ˜å•ä¸ªå¸¸é‡</span><span class="token keyword">const</span> PI <span class="token operator">=</span> <span class="token number">3.14</span><span class="token comment">// å£°æ˜å¤šä¸ªå¸¸é‡</span><span class="token keyword">const</span> <span class="token punctuation">(</span>StatusOk  <span class="token operator">=</span> <span class="token number">200</span>NotFound  <span class="token operator">=</span> <span class="token number">404</span>Forbidden <span class="token operator">=</span> <span class="token number">403</span><span class="token punctuation">)</span></code></pre><h3 id="å¸¸é‡æšä¸¾"><a href="#å¸¸é‡æšä¸¾" class="headerlink" title="å¸¸é‡æšä¸¾"></a>å¸¸é‡æšä¸¾</h3><pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token string">"fmt"</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"åœ†å‘¨ç‡ï¼š"</span><span class="token punctuation">,</span> PI<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"çŠ¶æ€ç OK: "</span><span class="token punctuation">,</span> StatusOk<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"çŠ¶æ€ç NotFound: "</span><span class="token punctuation">,</span> NotFound<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Forbidden: "</span><span class="token punctuation">,</span> Forbidden<span class="token punctuation">)</span><span class="token comment">// å¸¸é‡ç”¨æ¥æšä¸¾</span><span class="token keyword">const</span> <span class="token punctuation">(</span>Red <span class="token operator">=</span> <span class="token boolean">iota</span> <span class="token comment">// é»˜è®¤æ˜¯0å¼€å§‹</span>GreenBlue<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"çº¢è‰²çš„æšä¸¾å€¼ï¼š"</span><span class="token punctuation">,</span> Red<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"ç»¿è‰²çš„æšä¸¾å€¼ï¼š"</span><span class="token punctuation">,</span> Green<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"è“è‰²çš„æšä¸¾å€¼ï¼š"</span><span class="token punctuation">,</span> Blue<span class="token punctuation">)</span>    <span class="token comment">// å¸¸é‡è¡¨è¾¾å¼å¯ä»¥æ‰§è¡Œä»»æ„ç²¾åº¦çš„è®¡ç®—</span><span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token number">3e20</span> <span class="token operator">/</span> PIfmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"b: "</span><span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">&#125;</span></code></pre><h2 id="æ¡ä»¶è¯­å¥"><a href="#æ¡ä»¶è¯­å¥" class="headerlink" title="æ¡ä»¶è¯­å¥"></a>æ¡ä»¶è¯­å¥</h2><h3 id="if-else"><a href="#if-else" class="headerlink" title="if-else"></a>if-else</h3><pre class="language-go" data-language="go"><code class="language-go"><span class="token comment">// åŸºæœ¬çš„ifè¯­å¥</span>num <span class="token operator">:=</span> <span class="token number">10</span><span class="token keyword">if</span> num<span class="token operator">%</span><span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">&#123;</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span> <span class="token string">"æ˜¯å¶æ•°"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token comment">// if-else</span><span class="token keyword">if</span> num <span class="token operator">></span> <span class="token number">0</span> <span class="token punctuation">&#123;</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span> <span class="token string">"æ˜¯æ­£æ•°"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span> <span class="token string">"æ˜¯è´Ÿæ•°"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token comment">// if-else if</span><span class="token keyword">if</span> num <span class="token operator">></span> <span class="token number">10</span> <span class="token punctuation">&#123;</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span> <span class="token string">"å¤§äº10"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> num <span class="token operator">==</span> <span class="token number">10</span> <span class="token punctuation">&#123;</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span> <span class="token string">"ç­‰äº10"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span> <span class="token string">"å°äº10"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token comment">// ç”¨ifè¯­å¥å®šä¹‰å±€éƒ¨å˜é‡</span><span class="token keyword">if</span> scope <span class="token operator">:=</span> <span class="token number">24</span><span class="token punctuation">;</span> scope <span class="token operator">></span> num <span class="token punctuation">&#123;</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"scope > num"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span></code></pre><h3 id="switch-case"><a href="#switch-case" class="headerlink" title="switch case"></a>switch case</h3><pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token string">"fmt"</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// switch case æ˜¯ä¸ªå€¼</span>n <span class="token operator">:=</span> <span class="token number">3</span><span class="token keyword">switch</span> n <span class="token punctuation">&#123;</span><span class="token keyword">case</span> <span class="token number">1</span><span class="token punctuation">:</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"n == 1"</span><span class="token punctuation">)</span><span class="token keyword">case</span> <span class="token number">3</span><span class="token punctuation">:</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"n == 3"</span><span class="token punctuation">)</span><span class="token keyword">default</span><span class="token punctuation">:</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"n == xx"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token comment">// switch case æ˜¯ä¸ªè¡¨è¾¾å¼</span><span class="token keyword">switch</span> <span class="token punctuation">&#123;</span><span class="token keyword">case</span> n<span class="token operator">%</span><span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"næ˜¯å¥‡æ•°"</span><span class="token punctuation">)</span><span class="token keyword">default</span><span class="token punctuation">:</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"næ˜¯å¶æ•°"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="å¾ªç¯è¯­å¥"><a href="#å¾ªç¯è¯­å¥" class="headerlink" title="å¾ªç¯è¯­å¥"></a>å¾ªç¯è¯­å¥</h2><h3 id="åŸºæœ¬forå¾ªç¯"><a href="#åŸºæœ¬forå¾ªç¯" class="headerlink" title="åŸºæœ¬forå¾ªç¯"></a>åŸºæœ¬forå¾ªç¯</h3><pre class="language-go" data-language="go"><code class="language-go"><span class="token comment">// åŸºæœ¬çš„for</span><span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">&#123;</span>    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"ç¬¬%dæ¬¡å¾ªç¯\n"</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">&#125;</span></code></pre><h3 id="çœç•¥éƒ¨åˆ†å…ƒç´ çš„forå¾ªç¯"><a href="#çœç•¥éƒ¨åˆ†å…ƒç´ çš„forå¾ªç¯" class="headerlink" title="çœç•¥éƒ¨åˆ†å…ƒç´ çš„forå¾ªç¯"></a>çœç•¥éƒ¨åˆ†å…ƒç´ çš„forå¾ªç¯</h3><pre class="language-go" data-language="go"><code class="language-go"><span class="token comment">//  forçœç•¥å‰ç½®è¯­å¥</span>j <span class="token operator">:=</span> <span class="token number">5</span><span class="token keyword">for</span> <span class="token punctuation">;</span> j <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">;</span> j<span class="token operator">--</span> <span class="token punctuation">&#123;</span>    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"ç¬¬%dæ¬¡å¾ªç¯\n"</span><span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">&#125;</span></code></pre><h3 id="whileé£æ ¼çš„for"><a href="#whileé£æ ¼çš„for" class="headerlink" title="whileé£æ ¼çš„for"></a>whileé£æ ¼çš„for</h3><pre class="language-go" data-language="go"><code class="language-go"><span class="token comment">// forå¾ªç¯åªåŒ…å«æ¡ä»¶è¡¨è¾¾å¼ï¼Œç±»ä¼¼whileè¯­å¥</span>k <span class="token operator">:=</span> <span class="token number">0</span><span class="token keyword">for</span> k <span class="token operator">&lt;</span> <span class="token number">5</span> <span class="token punctuation">&#123;</span>    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"ç¬¬%dæ¬¡å¾ªç¯\n"</span><span class="token punctuation">,</span> k<span class="token punctuation">)</span>    k<span class="token operator">++</span><span class="token punctuation">&#125;</span></code></pre><h3 id="æ— é™å¾ªç¯"><a href="#æ— é™å¾ªç¯" class="headerlink" title="æ— é™å¾ªç¯"></a>æ— é™å¾ªç¯</h3><pre class="language-go" data-language="go"><code class="language-go"><span class="token comment">//æ— é™å¾ªç¯ ç›¸å½“äºwhile true</span><span class="token keyword">for</span> <span class="token punctuation">&#123;</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"è¿›å…¥æ­»å¾ªç¯"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span></code></pre><h3 id="for-rangeå¾ªç¯"><a href="#for-rangeå¾ªç¯" class="headerlink" title="for rangeå¾ªç¯"></a>for rangeå¾ªç¯</h3><pre class="language-go" data-language="go"><code class="language-go"><span class="token comment">// for range éå†å­—ç¬¦ä¸²</span><span class="token keyword">for</span> index<span class="token punctuation">,</span> char <span class="token operator">:=</span> <span class="token keyword">range</span> <span class="token string">"hello"</span> <span class="token punctuation">&#123;</span>    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"indexï¼š %d , charactor is %c\n"</span><span class="token punctuation">,</span> index<span class="token punctuation">,</span> char<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token comment">// éå†map</span>m <span class="token operator">:=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">&#123;</span><span class="token string">"a"</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"b"</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">&#125;</span><span class="token keyword">for</span> key<span class="token punctuation">,</span> value <span class="token operator">:=</span> <span class="token keyword">range</span> m <span class="token punctuation">&#123;</span>    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"key is %s and value is %d\n"</span><span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token comment">// éå†é€šé“</span>ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>ch <span class="token operator">&lt;-</span> <span class="token number">1</span>ch <span class="token operator">&lt;-</span> <span class="token number">2</span>ch <span class="token operator">&lt;-</span> <span class="token number">3</span><span class="token function">close</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span><span class="token keyword">for</span> n <span class="token operator">:=</span> <span class="token keyword">range</span> ch <span class="token punctuation">&#123;</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"ä»é€šé“å–å€¼ï¼š"</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">&#125;</span></code></pre><h2 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h2><h3 id="æ•°ç»„åŸºç¡€ç”¨æ³•"><a href="#æ•°ç»„åŸºç¡€ç”¨æ³•" class="headerlink" title="æ•°ç»„åŸºç¡€ç”¨æ³•"></a>æ•°ç»„åŸºç¡€ç”¨æ³•</h3><pre class="language-go" data-language="go"><code class="language-go"><span class="token comment">// å®šä¹‰é•¿åº¦ä¸º5çš„æ•°ç»„ï¼Œé»˜è®¤å€¼ä¸º0</span><span class="token keyword">var</span> a <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token builtin">int</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"array-a: "</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token comment">// è®¾ç½®æ•°ç»„ç‰¹å®šä½ç½®çš„å€¼</span>a<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">100</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"array-a: "</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token comment">// è·å–æ•°ç»„çš„é•¿åº¦</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"array-açš„é•¿åº¦æ˜¯ï¼š"</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">// ä½¿ç”¨æ•°ç»„å­—é¢é‡åˆå§‹åŒ–å¹¶èµ‹å€¼</span>b <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">&#123;</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">&#125;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"array-b: "</span><span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token comment">// äºŒç»´æ•°ç»„å£°æ˜å’Œåˆå§‹åŒ–</span><span class="token keyword">var</span> twoD <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">for</span> j <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> j<span class="token operator">++</span> <span class="token punctuation">&#123;</span>        twoD<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> i <span class="token operator">+</span> j    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"array-twoD: "</span><span class="token punctuation">,</span> twoD<span class="token punctuation">)</span><span class="token comment">// å£°æ˜æ•°ç»„çœç•¥é•¿åº¦ï¼Œç¼–è¯‘å™¨è‡ªåŠ¨è®¡ç®—</span>c <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">&#123;</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">&#125;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"array-c: "</span><span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token comment">// éå†æ•°ç»„ -- ä¸ä»‹ç»äº†ï¼Œä¸€èˆ¬éƒ½æ˜¯for rangeéå†</span></code></pre><h3 id="æ•°ç»„ä½œä¸ºå‚æ•°ä¼ å€¼"><a href="#æ•°ç»„ä½œä¸ºå‚æ•°ä¼ å€¼" class="headerlink" title="æ•°ç»„ä½œä¸ºå‚æ•°ä¼ å€¼"></a>æ•°ç»„ä½œä¸ºå‚æ•°ä¼ å€¼</h3><pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token string">"fmt"</span><span class="token keyword">func</span> <span class="token function">modifyArray</span><span class="token punctuation">(</span>arr <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">100</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"modify arr: "</span><span class="token punctuation">,</span> arr<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// é‡ç‚¹ï¼šæ•°ç»„ä¼ å‚æ˜¯ä¼ å€¼ï¼ï¼</span>d <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">&#125;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"before modify: "</span><span class="token punctuation">,</span> d<span class="token punctuation">)</span><span class="token function">modifyArray</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"after modify: "</span><span class="token punctuation">,</span> d<span class="token punctuation">)</span><span class="token punctuation">&#125;</span></code></pre><pre class="language-none"><code class="language-none">before modify:  [1 1 1 1 1]modify arr:  [100 3 4 5 6]after modify:  [1 1 1 1 1]</code></pre><p>ä»ç»“æœä¸Šæ¥çœ‹ï¼ŒåŸæ¥çš„æ•°ç»„å…ƒç´ æ ¹æœ¬æ²¡æœ‰è¢«ä¿®æ”¹ï¼Œè¿™æ˜¯å› ä¸ºæ•°ç»„ä½œä¸ºå‚æ•°æ˜¯â€œä¼ å€¼â€æ“ä½œï¼Œå½¢å‚æ˜¯æ‹·è´æ•°ç»„æ‰€æœ‰å…ƒç´ ï¼Œå‡½æ•°å†…çš„æ“ä½œéƒ½æ˜¯é’ˆå¯¹å®å‚çš„å‰¯æœ¬å…ƒç´ è¿›è¡Œæ“ä½œï¼Œå½“å‡½æ•°æ‰§è¡Œç»“æŸåï¼Œå½¢å‚è¢«é”€æ¯ã€‚å› æ­¤ï¼Œä¸ä¼šå¯¹åŸæ¥çš„æ•°ç»„é€ æˆä»»ä½•å½±å“ã€‚</p><p>é‚£ä¹ˆå¦‚ä½•èƒ½åšåˆ°åœ¨ä¸€ä¸ªå‡½æ•°é‡Œä¿®æ”¹åŸæ¥æ•°ç»„å…ƒç´ çš„æ“ä½œå‘¢ï¼Ÿé‚£å°±è¦ç»§ç»­å­¦ä¹ <strong>åˆ‡ç‰‡</strong>çš„çŸ¥è¯†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Goè¯­è¨€å…¥é—¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸåˆ› </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>golangå¤ç›˜æ€»ç»“</title>
      <link href="/2023/12/17/golang-fu-pan-zong-jie/"/>
      <url>/2023/12/17/golang-fu-pan-zong-jie/</url>
      
        <content type="html"><![CDATA[<h1 id="å­¦ä¹ Golangæ—¶é‡åˆ°çš„ä¼¼æ‡‚éæ‡‚çš„æ¦‚å¿µ"><a href="#å­¦ä¹ Golangæ—¶é‡åˆ°çš„ä¼¼æ‡‚éæ‡‚çš„æ¦‚å¿µ" class="headerlink" title="å­¦ä¹ Golangæ—¶é‡åˆ°çš„ä¼¼æ‡‚éæ‡‚çš„æ¦‚å¿µ"></a>å­¦ä¹ Golangæ—¶é‡åˆ°çš„ä¼¼æ‡‚éæ‡‚çš„æ¦‚å¿µ</h1><h2 id="èƒŒæ™¯ğŸ‹"><a href="#èƒŒæ™¯ğŸ‹" class="headerlink" title="èƒŒæ™¯ğŸ‹"></a>èƒŒæ™¯ğŸ‹</h2><p>è¿™æ˜¯æˆ‘å­¦ä¹ golangçš„ç¬¬ä¸‰å¤©ï¼Œå¤§è‡´å·²ç»æŒæ¡äº†golangçš„è¯­æ³•ï¼Œä½†æ˜¯ç€æ‰‹å¼€å‘çš„æ—¶å€™ï¼Œå´é‡åˆ°äº†è®¸å¤šé—®é¢˜ï¼Œä¾‹å¦‚golangå¯¼åŒ…æœºåˆ¶ã€golangçš„é¡¹ç›®ç®¡ç†è§„èŒƒã€go modç”Ÿæˆprojectæ€ä¹ˆç®¡ç†ä¾èµ–çš„ç­‰ç­‰ã€‚å…¶å®è¿™äº›æ¦‚å¿µä¹‹å‰ä¹Ÿäº†è§£è¿‡ï¼Œä½†æ˜¯ä¹Ÿåªæ˜¯å¦‚èœ»èœ“ç‚¹æ°´èˆ¬çš„äº†è§£ã€‚æ­£å¥½ï¼Œç°åœ¨é‡åˆ°äº†è¿™äº›é—®é¢˜ï¼Œé‚£ä¾¿è®¤çœŸæ€»ç»“ä¸€ç•ªã€‚</p><h2 id="é—®é¢˜æ€»ç»“"><a href="#é—®é¢˜æ€»ç»“" class="headerlink" title="é—®é¢˜æ€»ç»“"></a>é—®é¢˜æ€»ç»“</h2><h3 id="ä¸€ä¸ªä¼˜ç§€çš„Goé¡¹ç›®çš„å¸ƒå±€æ˜¯æ€æ ·çš„ï¼ŸğŸ˜"><a href="#ä¸€ä¸ªä¼˜ç§€çš„Goé¡¹ç›®çš„å¸ƒå±€æ˜¯æ€æ ·çš„ï¼ŸğŸ˜" class="headerlink" title="ä¸€ä¸ªä¼˜ç§€çš„Goé¡¹ç›®çš„å¸ƒå±€æ˜¯æ€æ ·çš„ï¼ŸğŸ˜"></a>ä¸€ä¸ªä¼˜ç§€çš„Goé¡¹ç›®çš„å¸ƒå±€æ˜¯æ€æ ·çš„ï¼ŸğŸ˜</h3><p>è¿™ä¸ªæˆ‘åœ¨ç½‘ä¸Šæœäº†å¾ˆå¤šçš„èµ„æ–™ï¼Œä¸ç®¡æ˜¯åšå®¢è¿˜æ˜¯è§†é¢‘ï¼Œä»–ä»¬å¤§éƒ¨åˆ†æ•™çš„æ˜¯åœ¨Go ENVè·¯å¾„ä¸‹åˆ›å»ºä½ çš„projectï¼Œç„¶åcdåˆ°ä½ çš„projectï¼Œæ¥ç€åœ¨è¯¥é¡¹ç›®æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºbinã€src å’Œpkgç›®å½•ã€‚ç›®å½•å¸ƒå±€å¤§è‡´å¦‚ä¸‹ï¼š</p><pre class="language-none"><code class="language-none">.â”œâ”€â”€ binâ”œâ”€â”€ pkgâ”œâ”€â”€ srcâ”‚   â”œâ”€â”€ github.comâ”‚   â”‚   â”œâ”€â”€ userâ”‚   â”‚   â”‚   â””â”€â”€ project1â”‚   â”‚   â””â”€â”€ userâ”‚   â”‚       â””â”€â”€ project2â”‚   â”œâ”€â”€ main.goâ”‚   â””â”€â”€ other.goâ”œâ”€â”€ vendorâ”œâ”€â”€ Makefileâ””â”€â”€ README.md</code></pre><ul><li><code>bin</code> ç›®å½•æ”¾ç½®ç¼–è¯‘ç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚</li><li><code>pkg</code> ç›®å½•æ”¾ç½®ç¼–è¯‘ç”Ÿæˆçš„åŒ…æ–‡ä»¶ã€‚</li><li><code>src</code> ç›®å½•æ˜¯æºç ç›®å½•ï¼Œå®ƒåŒ…å«äº†é¡¹ç›®çš„æ‰€æœ‰Goæºä»£ç ï¼Œå¤–éƒ¨ä¾èµ–åº“çš„æºä»£ç ä¹Ÿå¯ä»¥æ”¾åœ¨è¯¥ç›®å½•ä¸‹ã€‚</li><li><code>vendor</code> ç›®å½•å­˜å‚¨äº†ç¬¬ä¸‰æ–¹ä¾èµ–åº“çš„ä»£ç ï¼Œç±»ä¼¼äºå…¶ä»–è¯­è¨€ä¸­çš„ <code>node_modules</code> ç›®å½•æˆ– <code>pip</code> çš„ <code>virtualenv</code> æœºåˆ¶ã€‚</li><li><code>Makefile</code> åŒ…å«äº†é¡¹ç›®çš„æ„å»ºä¸ç®¡ç†è§„åˆ™ï¼Œå¦‚ç¼–è¯‘ã€æµ‹è¯•ã€éƒ¨ç½²ç­‰ã€‚</li><li><code>README.md</code> æ–‡ä»¶åŒ…å«äº†é¡¹ç›®çš„è¯´æ˜æ–‡æ¡£å’Œä½¿ç”¨è¯´æ˜ã€‚</li></ul><p>è¿™ç§ç›®å½•å¸ƒå±€å…¶å®è¿˜æŒºæ¸…æ™°çš„ï¼Œä½†æ˜¯è‡ªä»goå¼•å…¥go modulesåšä¾èµ–ç®¡ç†ï¼Œé¡¹ç›®å¸ƒå±€ç»“æ„ä¼šå˜å¾—æ›´ç²¾ç®€ï¼Œæ›´çµæ´»ã€‚å…·ä½“ç›®å½•å¸ƒå±€å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre class="language-none"><code class="language-none">.â”œâ”€â”€ cmdâ”‚   â””â”€â”€ main.goâ”œâ”€â”€ internalâ”œâ”€â”€ pkgâ”œâ”€â”€ vendorâ”œâ”€â”€ go.modâ””â”€â”€ README.md</code></pre><ul><li><code>cmd</code> ç›®å½•æ˜¯ç¨‹åºçš„å…¥å£ä»£ç ï¼Œå³ <code>main</code> å‡½æ•°çš„å®ç°ã€‚</li><li><code>internal</code> ç›®å½•ç”¨äºå­˜æ”¾åº”ç”¨ç¨‹åºçš„ç§æœ‰ä»£ç ï¼Œä¸èƒ½è¢«å…¶ä»–é¡¹ç›®å¼•ç”¨ã€‚</li><li><code>pkg</code> ç›®å½•ç”¨äºå­˜æ”¾åº”ç”¨ç¨‹åºçš„å…¬å…±åº“ä»£ç ï¼Œå¯ä»¥è¢«å…¶ä»–é¡¹ç›®å¼•ç”¨ã€‚</li><li><code>vendor</code> ç›®å½•ç”¨äºå­˜æ”¾ä¾èµ–åº“çš„ä»£ç ï¼Œç±»ä¼¼äºå…¶ä»–è¯­è¨€ä¸­çš„ <code>node_modules</code> ç›®å½•æˆ– <code>pip</code> çš„ <code>virtualenv</code> æœºåˆ¶ã€‚</li><li><code>go.mod</code> æ˜¯ Go modules çš„é…ç½®æ–‡ä»¶ï¼Œç”¨äºç®¡ç†ä¾èµ–å…³ç³»å’Œç‰ˆæœ¬æ§åˆ¶ã€‚</li><li><code>README.md</code> æ–‡ä»¶åŒ…å«äº†é¡¹ç›®çš„è¯´æ˜æ–‡æ¡£å’Œä½¿ç”¨è¯´æ˜ã€‚</li></ul><p>å½“ç„¶æ ¹æ®ä¸šåŠ¡è¦æ±‚ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æ·»åŠ docsç›®å½•å­˜æ”¾é¡¹ç›®æ–‡æ¡£ï¼Œæ·»åŠ testç›®å½•å­˜æ”¾å•å…ƒæµ‹è¯•ä»£ç ã€‚</p><p>Tonybaiå¤§ä½¬çš„å›¾ç”»çš„ç›¸å½“ä¸é”™ï¼Œæˆ‘è¿™è¾¹å¼•ç”¨ä¸€ä¸‹ï¼Œå¤§å®¶çœ‹å®Œå›¾å°±çŸ¥é“ä¸€ä¸ªGoè¯­è¨€çš„ç»å…¸å¸ƒå±€è¯¥æ˜¯ä»€ä¹ˆæ ·çš„äº†ã€‚</p><p>psï¼šå›¾æœ‰ç‚¹ç³Šï¼Œå°†å°±ä¸€ä¸‹â€¦â€¦</p><img src="/2023/12/17/golang-fu-pan-zong-jie/fig1.jpg" class="" title="ä»¥æ„å»ºäºŒè¿›åˆ¶å¯æ‰§è¡Œé¡¹ç›®ä¸ºç›®çš„çš„Goé¡¹ç›®"><img src="/2023/12/17/golang-fu-pan-zong-jie/fig2.jpg" class="" title="ä»¥æ„å»ºGoè¯­è¨€é¡¹ç›®ç»“æ„ä¸ºç›®çš„çš„Goé¡¹ç›®"><p>é¡¹ç›®ç»“æ„ç›®å½•é‡ç‚¹çªå‡ºä¸€ä¸ªæ¸…æ™°æ˜äº†ï¼Œæˆ‘ä»¬éœ€è¦æ¸…æ¥šæ¯ä¸ªç›®å½•ä»£è¡¨çš„å«ä¹‰æ˜¯ä»€ä¹ˆï¼Œæ¯ä¸ªç›®å½•ä¸‹çš„æ–‡ä»¶æœ‰å“ªäº›ï¼Œç›®å½•æ–‡ä»¶çš„è°ƒç”¨å…³ç³»ï¼Œç›®å½•æ–‡ä»¶çš„éšè”½æ€§ç­‰ç­‰ã€‚</p><h3 id="ä¸ºä»€ä¹ˆä¸€å®šæ˜¯go-modï¼ŸğŸ¤”"><a href="#ä¸ºä»€ä¹ˆä¸€å®šæ˜¯go-modï¼ŸğŸ¤”" class="headerlink" title="ä¸ºä»€ä¹ˆä¸€å®šæ˜¯go modï¼ŸğŸ¤”"></a>ä¸ºä»€ä¹ˆä¸€å®šæ˜¯go modï¼ŸğŸ¤”</h3><p>æˆ‘æå‡ºè¿™ä¸ªé—®é¢˜å¹¶ä¸æ˜¯å¹æ¯›æ±‚ç–µï¼Œè€Œæ˜¯çœŸå¿ƒæƒ³äº†è§£åœ¨æ²¡go moduleç®¡ç†æ—¶ï¼Œå¤§å®¶ä¸ä¹Ÿå†™çš„å¥½å¥½çš„ä¹ˆï¼Œä¸ºä»€ä¹ˆgo moduleå‡ºæ¥åï¼Œå¤§å®¶ä¼šç«‹é©¬æŠ›å¼ƒä»¥å‰çš„åšæ³•ã€‚è¿™ go moduleåˆ°åº•å¸¦æ¥äº†ä»€ä¹ˆå¥½å¤„ï¼Œå¦‚æ­¤å¸å¼•äººã€‚</p><p>æˆ‘è¿˜æ˜¯ä»é¡¹ç›®å¸ƒå±€ä¸Šç†è§£ï¼Œåœ¨æ²¡æœ‰go moduleç®¡ç†æ—¶ï¼Œå¤§å®¶çš„é¡¹ç›®å¸ƒå±€åº”è¯¥é•¿è¿™æ ·ï¼š</p><pre class="language-none"><code class="language-none">.â”œâ”€â”€ binâ”œâ”€â”€ pkgâ”œâ”€â”€ srcâ”‚   â”œâ”€â”€ github.comâ”‚   â”‚   â”œâ”€â”€ userâ”‚   â”‚   â”‚   â””â”€â”€ project1â”‚   â”‚   â””â”€â”€ userâ”‚   â”‚       â””â”€â”€ project2â”‚   â”œâ”€â”€ main.goâ”‚   â””â”€â”€ other.goâ”œâ”€â”€ vendorâ”œâ”€â”€ Makefileâ””â”€â”€ README.md</code></pre><p>é¦–å…ˆåœ¨ Go 1.11 ç‰ˆæœ¬ä¹‹å‰ï¼Œå¦‚æœè¦åœ¨ <code>$GOPATH</code> ä¸­è¿è¡Œä¸€ä¸ªé¡¹ç›®ï¼Œè¯¥é¡¹ç›®å¿…é¡»å­˜æ”¾åœ¨ <code>$GOPATH/src</code> ç›®å½•ä¸‹ã€‚å¸ƒå±€é‡Œå°±åŒ…å«äº†project1å’Œproject2ä¸¤ä¸ªé¡¹ç›®æ–‡ä»¶ç›®å½•ã€‚è¿™ä¼šå¯¼è‡´ä½ çš„srcç›®å½•è¶Šæ¥è¶Šè‚¿å¤§ã€‚</p><p>å…¶æ¬¡æ˜¯æ‰‹åŠ¨ç®¡ç†ä¾èµ–é—®é¢˜ã€‚åœ¨Go 1.11ç‰ˆæœ¬ä¹‹å‰ï¼ŒGo è¯­è¨€æ²¡æœ‰å®˜æ–¹çš„ä¾èµ–ç®¡ç†å·¥å…·ï¼Œå› æ­¤åœ¨é¡¹ç›®ä¸­å¼•å…¥å¤–éƒ¨ä¾èµ–åº“çš„æ—¶å€™ï¼Œé€šå¸¸éœ€è¦æ‰‹åŠ¨å°†ä¾èµ–åº“çš„ä»£ç æ‹·è´åˆ° <code>$GOPATH/src</code> ç›®å½•ä¸‹ã€‚è¿™ä¸ªå…‰ä¸æ˜¯æ‰‹åŠ¨ä¸‹è½½çš„äº‹ï¼Œä½ è¿˜è¦è€ƒè™‘åˆ°æ‰‹åŠ¨æ›´æ–°ï¼Œä¾èµ–ä¹‹é—´çš„å†²çªé—®é¢˜ï¼Œéƒ¨ç½²çš„é—®é¢˜ç­‰ç­‰ã€‚åœ¨å€¡å¯¼DEVOPSçš„æ—¶ä»£ï¼Œå“ªä¸€ä¸ªéƒ½æ˜¯è®©äººåˆ†å¿ƒå¤´ç—›çš„äº‹ğŸ˜£ã€‚</p><p>ç„¶è€Œï¼Œgo moduleè§£å†³äº†ä¸Šè¿°é—®é¢˜ï¼ˆæ€ªä¸å¾—å¤§å®¶ä¼šæåŠ›æ‹¥æŠ±è¿™é—¨æ–°æŠ€æœ¯ï¼‰ã€‚è¿™é‡Œä¸¾ä¸ªä¾‹å­è¯´æ˜ä¸¤è€…çš„å·®åˆ«ï¼Œè®©æ€è·¯æ›´æ¸…æ™°ã€‚</p><p>å‡è®¾æœ‰ä¸¤ä¸ªé¡¹ç›® A å’Œé¡¹ç›® Bï¼Œéƒ½ä¾èµ–äº Go è¯­è¨€çš„ä¸€ä¸ªç¬¬ä¸‰æ–¹åº“ <code>github.com/gin-gonic/gin</code>ã€‚å…¶ä¸­ï¼Œé¡¹ç›® A ä½¿ç”¨ä¼ ç»Ÿçš„ä¾èµ–ç®¡ç†æ–¹å¼ï¼Œé¡¹ç›® B ä½¿ç”¨ Go modules æ¥ç®¡ç†ä¾èµ–ã€‚</p><ol><li>ä½¿ç”¨ä¼ ç»Ÿçš„ä¾èµ–ç®¡ç†æ–¹å¼çš„é¡¹ç›® Aï¼š</li></ol><p>é¡¹ç›® A çš„ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p><pre class="language-none"><code class="language-none">.â”œâ”€â”€ main.goâ””â”€â”€ vendor    â””â”€â”€ github.com        â””â”€â”€ gin-gonic            â””â”€â”€ gin                â”œâ”€â”€ LICENSE                â”œâ”€â”€ README.md                â”œâ”€â”€ bindings                â”œâ”€â”€ contributing.md                â”œâ”€â”€ favicon.ico                â”œâ”€â”€ gin.go                â”œâ”€â”€ go.mod                â”œâ”€â”€ go.sum                â”œâ”€â”€ handlers                â”œâ”€â”€ logger.go                â”œâ”€â”€ middleware.go                â”œâ”€â”€ render                â”œâ”€â”€ router.go                â””â”€â”€ vendor</code></pre><p><code>main.go</code> æ–‡ä»¶ä¸­å¼•å…¥äº† <code>github.com/gin-gonic/gin</code>ï¼š</p><pre class="language-none"><code class="language-none">package mainimport (&quot;github.com&#x2F;gin-gonic&#x2F;gin&quot;)func main() &#123;r :&#x3D; gin.Default()&#x2F;&#x2F; ...&#125;</code></pre><p>åœ¨é¡¹ç›® A ä¸­ï¼Œä¾èµ–åº“ <code>github.com/gin-gonic/gin</code> çš„ä»£ç è¢«å­˜æ”¾åœ¨ <code>vendor</code> ç›®å½•ä¸­ï¼Œæ— æ³•å’Œå…¶ä»–é¡¹ç›®å…±äº«ä½¿ç”¨ã€‚éœ€è¦è¯´æ˜åœ°æ˜¯ï¼Œä½¿ç”¨ <code>vendor</code> ç›®å½•æ¥ç®¡ç†ä¾èµ–åº“æ˜¯ Go è¯­è¨€åœ¨ Go 1.5 ç‰ˆæœ¬æ—¶å¼•å…¥çš„æ–¹å¼ã€‚åœ¨ä½¿ç”¨ <code>vendor</code> ç›®å½•ç®¡ç†ä¾èµ–åº“çš„æ—¶å€™ï¼Œä½ éœ€è¦å°†ä¾èµ–åº“çš„ä»£ç å¤åˆ¶åˆ°é¡¹ç›®ç›®å½•ä¸‹çš„ <code>vendor</code> ç›®å½•ä¸‹ï¼Œç„¶ååœ¨ä»£ç ä¸­å¼•ç”¨è¿™äº›ä¾èµ–åº“ã€‚å¦‚æœè¿™ä¸ªä¾èµ–åº“çš„ç‰ˆæœ¬å‘ç”Ÿå‡çº§ï¼Œéœ€è¦æ‰‹åŠ¨æ›´æ–°å¹¶é‡æ–°æ‹·è´ä»£ç åˆ° <code>vendor</code> ç›®å½•ï¼Œå®¹æ˜“å‡ºç°ç‰ˆæœ¬å†²çªæˆ–é—æ¼é—®é¢˜ã€‚</p><ol start="2"><li>ä½¿ç”¨ Go modules çš„é¡¹ç›® Bï¼š</li></ol><p>é¡¹ç›® B çš„ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p><pre class="language-none"><code class="language-none">.â”œâ”€â”€ go.modâ”œâ”€â”€ main.goâ””â”€â”€ vendor</code></pre><p><code>main.go</code> æ–‡ä»¶ä¸­åŒæ ·å¼•å…¥äº† <code>github.com/gin-gonic/gin</code>ï¼š</p><pre class="language-none"><code class="language-none">package mainimport (&quot;github.com&#x2F;gin-gonic&#x2F;gin&quot;)func main() &#123;r :&#x3D; gin.Default()&#x2F;&#x2F; ...&#125;</code></pre><p>åœ¨é¡¹ç›® B ä¸­ï¼Œä½¿ç”¨ <code>go mod</code> å‘½ä»¤æ¥ç®¡ç†ä¾èµ–åº“å’Œç‰ˆæœ¬ï¼Œæ— éœ€æ‰‹åŠ¨æ‹·è´ä¾èµ–åº“ä»£ç ã€‚æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ä¼šè‡ªåŠ¨ä¸‹è½½ä¾èµ–åº“ä»£ç è‡³ <code>$GOPATH/pkg/mod</code> ç›®å½•ä¸‹ï¼š</p><pre class="language-none"><code class="language-none">go mod init example.com&#x2F;Bgo mod tidy</code></pre><p>å®‰è£…å®Œä¾èµ–åº“åï¼Œå¯ä»¥æŠŠ <code>$GOPATH/pkg/mod</code> ç›®å½•ä¸‹çš„ <code>github.com/gin-gonic/gin</code> ç›®å½•æ‹·è´åˆ°å…¶ä»–é¡¹ç›®ä¸­ä½¿ç”¨ï¼Œä»è€Œå®ç°ä¾èµ–å…±äº«ã€‚å¦‚æœéœ€è¦å‡çº§æˆ–åˆ‡æ¢ä¾èµ–åº“çš„ç‰ˆæœ¬ï¼Œåªéœ€è¦ä¿®æ”¹ <code>go.mod</code> æ–‡ä»¶ä¸­çš„ç‰ˆæœ¬å·å³å¯ï¼Œä¸ä¼šå½±å“åˆ°å…¶ä»–é¡¹ç›®ã€‚</p><p>è¿™é‡Œå¯èƒ½æœ‰ä¸€ä¸ªæ­§ä¹‰çš„ç‚¹ï¼Œå°±æ˜¯â€œæ‹·è´åˆ°å…¶å®ƒé¡¹ç›®ä¸­ä½¿ç”¨â€è¿™ä¸ªè¯´æ³•ã€‚ä¾æˆ‘çœ‹ï¼Œgo modä¼šè‡ªåŠ¨å®‰è£…ä½ æ‰€éœ€è¦åº“çš„ä¾èµ–ï¼Œå®ƒä¼šåœ¨æœ¬åœ°ç•™ä¸‹ç¼“å­˜ä¿¡æ¯ã€‚é‚£ä¹ˆå¦‚æœå¦ä¸€ä¸ªé¡¹ç›®ä¸­ä¹Ÿéœ€è¦ä½¿ç”¨ <code>github.com/gin-gonic/gin</code>ï¼Œå¯ä»¥ç›´æ¥åœ¨ä»£ç ä¸­å¼•ç”¨è¯¥ä¾èµ–åº“ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre class="language-none"><code class="language-none">package mainimport (&quot;github.com&#x2F;gin-gonic&#x2F;gin&quot;)func main() &#123;r :&#x3D; gin.Default()&#x2F;&#x2F; ...&#125;</code></pre><p>åªè¦ä¹‹å‰å·²ç»åœ¨ä»»æ„ä¸€ä¸ªé¡¹ç›®ä¸­ä½¿ç”¨äº† <code>go mod</code> å‘½ä»¤ä¸‹è½½è¿‡å¹¶ç¼“å­˜äº† <code>github.com/gin-gonic/gin</code>ï¼ŒGo ä¼šè‡ªåŠ¨ä»ç¼“å­˜ä¸­åŠ è½½ä¾èµ–åº“ä»£ç ï¼Œè€Œä¸ä¼šé‡æ–°ä¸‹è½½ä¾èµ–åº“ä»£ç åˆ° <code>$GOPATH/pkg/mod</code> ç›®å½•ä¸‹ã€‚</p><p>è¿™ç§æ–¹å¼å¯ä»¥å®ç°ä¾èµ–åº“çš„å…±äº«ï¼Œé¿å…äº†å¤šä¸ªé¡¹ç›®åŒæ—¶æ‹·è´ä¾èµ–åº“ä»£ç ï¼ŒèŠ‚çœäº†ç£ç›˜ç©ºé—´ã€‚åŒæ—¶ï¼Œå¦‚æœéœ€è¦ä½¿ç”¨ä¸åŒçš„ç‰ˆæœ¬å·ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹ <code>go.mod</code> æ–‡ä»¶æ¥å®ç°å¯¹ç‰¹å®šç‰ˆæœ¬çš„ä¾èµ–ç®¡ç†ã€‚</p><p>å½“ä½ ä¿®æ”¹äº† <code>go.mod</code> æ–‡ä»¶ä¸­çš„ä¾èµ–ç‰ˆæœ¬å·æˆ–è€…æ·»åŠ äº†æ–°çš„ä¾èµ–é¡¹ä¹‹åï¼Œå¯ä»¥ä½¿ç”¨ <code>go mod tidy</code> å‘½ä»¤æ¥æ›´æ–°ä¾èµ–å…³ç³»ï¼Œä¾‹å¦‚ï¼š</p><pre class="language-none"><code class="language-none">go mod edit -require github.com&#x2F;gin-gonic&#x2F;gin@v1.7.2  # ä¿®æ”¹ go.mod æ–‡ä»¶ä¸­çš„ä¾èµ–ç‰ˆæœ¬å·go mod tidy  # æ›´æ–°ä¾èµ–å…³ç³»</code></pre><p><code>go mod tidy</code> ä¼šæ ¹æ® <code>go.mod</code> æ–‡ä»¶ä¸­çš„ä¾èµ–å…³ç³»è‡ªåŠ¨ä¸‹è½½å¹¶æ›´æ–°ä¾èµ–åº“ä»£ç ï¼Œä»¥ä¿æŒä¾èµ–å…³ç³»çš„ä¸€è‡´æ€§ï¼Œå¹¶ä¸”ä¼šåˆ é™¤æœªè¢«å¼•ç”¨çš„ä¾èµ–é¡¹ã€‚</p><p>å¦å¤–ï¼Œå¦‚æœä½ è¿˜å¸Œæœ›ç§»é™¤æŸä¸€ä¸ªä¸å†ä½¿ç”¨çš„ä¾èµ–åº“ï¼Œå¯ä»¥ä½¿ç”¨ <code>go mod tidy -v</code> å‘½ä»¤ï¼Œå®ƒä¼šè¾“å‡ºåƒåœ¾æ”¶é›†çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬å“ªäº›ä¾èµ–é¡¹æ˜¯è¢«ç§»é™¤çš„ã€‚</p><h3 id="Goçš„å¯¼åŒ…æœºåˆ¶æ˜¯ä»€ä¹ˆï¼ŸâœŒï¸"><a href="#Goçš„å¯¼åŒ…æœºåˆ¶æ˜¯ä»€ä¹ˆï¼ŸâœŒï¸" class="headerlink" title="Goçš„å¯¼åŒ…æœºåˆ¶æ˜¯ä»€ä¹ˆï¼ŸâœŒï¸"></a>Goçš„å¯¼åŒ…æœºåˆ¶æ˜¯ä»€ä¹ˆï¼ŸâœŒï¸</h3><blockquote><p>æˆ‘çš„äººç”Ÿä¿¡æ¡å°±æ˜¯ä¼˜é›…ï¼Œå¦‚ä½•ä¼˜é›…åœ°å¯¼åŒ…ä¹Ÿæ˜¯æˆ‘æ‰€è¿½æ±‚çš„ã€‚</p></blockquote><p>åœ¨äº†è§£æ€ä¹ˆå¯¼åŒ…ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆéœ€è¦äº†è§£åŒ…åœ¨Goé‡Œé¢çš„å…·è±¡åŒ–çš„ä½“ç°æ˜¯ä»€ä¹ˆï¼ŸåŒ…å’Œæ¨¡å—çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</p><p>æŠ›å¼€è¯­è¨€ï¼Œä»è½¯ä»¶è§’åº¦è€ƒè™‘ï¼Œæˆ‘ä»¬è®¤ä¸ºå­ç¨‹åºçš„é›†åˆç§°ä¸ºåŒ…ï¼ŒåŒ…çš„é›†åˆç§°ä¸ºæ¨¡å—ï¼Œæ¨¡å—çš„é›†åˆç§°ä¸ºå­ç³»ç»Ÿï¼Œå­ç³»ç»Ÿçš„é›†åˆç§°ä¸ºç³»ç»Ÿã€‚å°†è¿™ä¸ªè¯´æ³•å¾€Goè¯­è¨€ä¸Šä»£å…¥ï¼Œèƒ½å‘ç°æˆ‘ä»¬ç¼–å†™çš„goæ–‡ä»¶å°±æ˜¯å­ç¨‹åºï¼Œgoæ–‡ä»¶æ‰€åœ¨æ–‡ä»¶å¤¹å°±æ˜¯åŒ…ï¼Œæ ¹ç›®å½•çš„æ–‡ä»¶åå°±æ˜¯æ¨¡å—åã€‚è¿™äº›å…·è±¡åŒ–çš„ä½“ç°è¿˜èƒ½ä»å“ªé‡Œçœ‹å‡ºæ¥å‘¢ï¼Ÿå…¶å®è¿˜èƒ½ä»æˆ‘ä»¬åˆ›å»ºçš„æ–‡ä»¶ä¸­çœ‹å‡ºã€‚</p><p>ä»¥è¿™æ ·çš„ç›®å½•ç»“æ„ä¸ºä¾‹ï¼š</p><pre class="language-none"><code class="language-none">project&#x2F;|- go.mod|- main.go|- controllers&#x2F;   |- user.go   |- admin.go</code></pre><p>å…¶ä¸­ï¼š</p><ul><li><code>go.mod</code> æ˜¯æ¨¡å—æ–‡ä»¶ï¼Œä½äºé¡¹ç›®æ ¹ç›®å½•ã€‚</li><li><code>main.go</code> æ˜¯å…¥å£æ–‡ä»¶ï¼Œä½äºé¡¹ç›®æ ¹ç›®å½•ã€‚</li><li><code>controllers/</code> ç›®å½•ä¸‹æœ‰ä¸¤ä¸ªæ–‡ä»¶ <code>user.go</code> å’Œ <code>admin.go</code></li></ul><p>ä¸€èˆ¬æ¥è¯´ï¼Œå½“ä½ æŸ¥çœ‹go.modæ–‡ä»¶æ—¶ï¼Œèƒ½çœ‹åˆ°ç¬¬ä¸€è¡Œå†™ç€</p><pre class="language-none"><code class="language-none">module project</code></pre><p>è¿™æ˜¯å‘Šè¯‰ä½ æ¨¡å—åæ˜¯projectã€‚å¦‚æœä»¥åä½ çš„ä»£ç å¼€æºäº†ï¼Œåˆ«äººæƒ³å¼•ç”¨ä½ çš„ä»£ç ï¼Œé¦–å…ˆå°±æ˜¯è¦æ ¹æ®ä½ çš„æ¨¡å—åå†æ‰¾å¯¹åº”çš„åŒ…åã€‚è¿™å’Œå…¶å®ƒè¯­è¨€å¼•åŒ…çš„æ–¹å¼å¾ˆç›¸ä¼¼ã€‚</p><p>moduleåé¢çš„æ¨¡å—åæ˜¯å…è®¸ä¿®æ”¹çš„ï¼Œä½ å¯ä»¥æ¢æˆè‡ªå®šä¹‰çš„å†™æ³•ï¼Œé€šå¸¸çš„å†™æ³•æ˜¯<code>åŸŸå+é¡¹ç›®å</code>ã€‚</p><p>å†æ‰“å¼€user.goï¼Œä½ èƒ½å‘ç°ç¬¬ä¸€è¡Œå†™ç€</p><pre class="language-none"><code class="language-none">package controllers</code></pre><p>è¿™æ˜¯æŒ‡user.goæ˜¯controllersåŒ…ä¸‹é¢çš„ä¸€ä¸ªå­ç¨‹åºã€‚</p><p>ç†æ¸…æ¥šè¿™äº›æ¦‚å¿µï¼Œæˆ‘ä»¬è¿˜éœ€è¦è®°ä½ä¸€ä¸ªæ€»çº²ï¼šâ€œå¯¼åŒ…å…¶å®å°±æ˜¯å¯»å€ï¼å¯¼åŒ…å…¶å®å°±æ˜¯å¯»å€ï¼å¯¼åŒ…å…¶å®å°±æ˜¯å¯»å€ï¼â€ã€‚é‡è¦çš„è¯è¯´ä¸‰éï¼</p><p>è¿˜æ˜¯ä»¥ä¸Šé¢çš„ç›®å½•ç»“æ„ä¸ºä¾‹ï¼Œå¦‚æœéœ€è¦åœ¨ <code>main.go</code> ä¸­å¯¼å…¥ <code>controllers/user.go</code> æ–‡ä»¶ä¸­çš„ä»£ç ï¼Œå¯ä»¥ä½¿ç”¨ç›¸å¯¹è·¯å¾„ <code>./controllers</code> æ¥å¯¼å…¥ <code>user.go</code> æ–‡ä»¶ã€‚</p><pre class="language-none"><code class="language-none">&#x2F;&#x2F; main.gopackage mainimport &quot;.&#x2F;controllers&quot;func main() &#123;    &#x2F;&#x2F; ...&#125;</code></pre><p>å¯¹äºæ¨¡å—ï¼Œå¯ä»¥ä½¿ç”¨æ¨¡å—è·¯å¾„æ¥å¼•ç”¨ç›¸å¯¹è·¯å¾„ä¸‹çš„æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œå‡è®¾ä½ çš„æ¨¡å—è·¯å¾„ä¸º <code>example.com/mymodule</code>ï¼Œåˆ™å¯ä»¥åœ¨ <code>main.go</code> ä¸­ä½¿ç”¨ <code>example.com/mymodule/controllers</code> æ¥å¼•ç”¨ç›¸å¯¹è·¯å¾„ä¸‹çš„ <code>user.go</code> æ–‡ä»¶ã€‚</p><pre class="language-none"><code class="language-none">&#x2F;&#x2F; main.gopackage mainimport &quot;example.com&#x2F;mymodule&#x2F;controllers&quot;func main() &#123;    &#x2F;&#x2F; ...&#125;</code></pre><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½¿ç”¨ç›¸å¯¹è·¯å¾„å¯¼å…¥åŒ…æ—¶ï¼ŒåŒ…çš„å®é™…è·¯å¾„æ˜¯ç›¸å¯¹äºå½“å‰æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ã€‚å¦‚æœåœ¨å…¶ä»–æ–‡ä»¶ä¸­ä¹Ÿè¦ä½¿ç”¨ç›¸å¯¹è·¯å¾„å¯¼å…¥ <code>controllers/user.go</code>ï¼Œåˆ™éœ€è¦å°†è·¯å¾„è®¾ç½®ä¸ºç›¸å¯¹äºè¿™ä¸ªæ–‡ä»¶çš„è·¯å¾„ã€‚åŒæ—¶ï¼Œç›¸å¯¹è·¯å¾„åªé€‚ç”¨äºæ¨¡å—å†…çš„ä»£ç ï¼Œå¦‚æœè¦åœ¨ä¸åŒçš„æ¨¡å—ä¹‹é—´å¯¼å…¥ä»£ç ï¼Œå¿…é¡»ä½¿ç”¨å®Œæ•´çš„åŒ…è·¯å¾„ã€‚</p><h3 id="Goçš„æµ‹è¯•ä»£ç æ€ä¹ˆç”Ÿæˆï¼ŸğŸ‘€"><a href="#Goçš„æµ‹è¯•ä»£ç æ€ä¹ˆç”Ÿæˆï¼ŸğŸ‘€" class="headerlink" title="Goçš„æµ‹è¯•ä»£ç æ€ä¹ˆç”Ÿæˆï¼ŸğŸ‘€"></a>Goçš„æµ‹è¯•ä»£ç æ€ä¹ˆç”Ÿæˆï¼ŸğŸ‘€</h3><p>åœ¨ Go ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ›å»ºæµ‹è¯•æ–‡ä»¶æ¥ç¼–å†™æµ‹è¯•ä»£ç ã€‚æµ‹è¯•æ–‡ä»¶åº”è¯¥éµå¾ª Go çš„å‘½åè§„åˆ™ï¼Œå³åœ¨æ–‡ä»¶ååé¢åŠ ä¸Š <code>_test</code>ã€‚ä¾‹å¦‚ï¼Œå¦‚æœè¦ç¼–å†™ä¸€ä¸ªåä¸º <code>sum</code> çš„å‡½æ•°çš„æµ‹è¯•ä»£ç ï¼Œé‚£ä¹ˆæµ‹è¯•æ–‡ä»¶çš„æ–‡ä»¶ååº”è¯¥æ˜¯ <code>sum_test.go</code>ï¼Œè€Œè¢«æµ‹è¯•çš„å‡½æ•°å‰é¢è¦åŠ ä¸ªTestå‰ç¼€ã€‚</p><p>åœ¨æµ‹è¯•æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>testing</code> åŒ…æä¾›çš„ä¸€ç³»åˆ—å‡½æ•°æ¥ç¼–å†™æµ‹è¯•ä»£ç ï¼Œä¾‹å¦‚ <code>testing.T</code> çš„ <code>Error</code>ã€<code>Fail</code> å’Œ <code>Fatal</code> å‡½æ•°ï¼Œä»¥åŠ <code>testing.B</code> çš„ <code>ReportAllocs</code>ã€<code>ResetTimer</code> å’Œ <code>StopTimer</code> ç­‰å‡½æ•°ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„æµ‹è¯•ç¤ºä¾‹ï¼Œæµ‹è¯• <code>sum</code> å‡½æ•°ï¼š</p><pre class="language-none"><code class="language-none">&#x2F;&#x2F; sum_test.gopackage mainimport &quot;testing&quot;func TestSum(t *testing.T) &#123;    tables :&#x3D; []struct &#123;        a, b, expected int    &#125;&#123;        &#123;1, 1, 2&#125;,        &#123;2, 2, 4&#125;,        &#123;3, 3, 6&#125;,    &#125;for _, table :&#x3D; range tables &#123;    result :&#x3D; sum(table.a, table.b)    if result !&#x3D; table.expected &#123;        t.Errorf(&quot;Sum of %d + %d was incorrect, expected %d but received %d&quot;, table.a, table.b, table.expected, result)    &#125;&#125;&#125;</code></pre><p>åœ¨è¿™ä¸ªæµ‹è¯•æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆå¯¼å…¥ <code>testing</code> åŒ…ï¼Œå¹¶å®šä¹‰äº†ä¸€ä¸ªåä¸º <code>TestSum</code> çš„æµ‹è¯•å‡½æ•°ã€‚<code>tables</code> å®šä¹‰äº†ä¸€ä¸ªç»“æ„ä½“åˆ‡ç‰‡ï¼Œå…¶ä¸­åŒ…å«äº†ä¸€ç»„è¦æµ‹è¯•çš„å‚æ•°å’ŒæœŸæœ›ç»“æœã€‚æˆ‘ä»¬éå† <code>tables</code> åˆ‡ç‰‡ï¼Œé€ä¸€æµ‹è¯•æ¯ç»„æ•°æ®ï¼Œåˆ¤æ–­è®¡ç®—ç»“æœæ˜¯å¦å’ŒæœŸæœ›çš„ç»“æœä¸€è‡´ã€‚å¦‚æœä¸ä¸€è‡´ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>t.Errorf</code> å‡½æ•°è¾“å‡ºé”™è¯¯ä¿¡æ¯ã€‚è¿™æ ·å°±å®Œæˆäº†ä¸€ä¸ªç®€å•çš„æµ‹è¯•æ–‡ä»¶ã€‚</p><p>è¦è¿è¡Œæµ‹è¯•æ–‡ä»¶ï¼Œå¯ä»¥åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ä½¿ç”¨ <code>go test</code> å‘½ä»¤è¿è¡Œã€‚Go ä¼šè‡ªåŠ¨æŸ¥æ‰¾å¹¶è¿è¡Œæ‰€æœ‰çš„æµ‹è¯•æ–‡ä»¶ï¼Œå¹¶è¾“å‡ºæµ‹è¯•ç»“æœã€‚æµ‹è¯•ç»“æœä¸­ä¼šæ˜¾ç¤ºæµ‹è¯•ç”¨ä¾‹çš„æ•°é‡ã€æµ‹è¯•æ˜¯å¦é€šè¿‡ä»¥åŠæ¯ä¸ªæµ‹è¯•ç”¨ä¾‹çš„å…·ä½“ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼š</p><pre class="language-none"><code class="language-none">$ go testPASSok      project 0.008s</code></pre><p>åœ¨æœ¬ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åªæœ‰ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œæµ‹è¯•ç»“æœåˆ¤å®šä¸º â€œ PASS â€ï¼Œè¡¨ç¤ºæµ‹è¯•é€šè¿‡äº†ã€‚å¦‚æœæµ‹è¯•å¤±è´¥ï¼Œåˆ™æµ‹è¯•ç»“æœä¼šåˆ¤å®šä¸º â€œ FAIL â€ï¼Œå¹¶è¾“å‡ºå…·ä½“çš„é”™è¯¯ä¿¡æ¯ã€‚</p><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><p><a href="https://tonybai.com/2022/04/28/the-standard-layout-of-go-project/">https://tonybai.com/2022/04/28/the-standard-layout-of-go-project/</a></p>]]></content>
      
      
      <categories>
          
          <category> Goè¯­è¨€å…¥é—¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸåˆ› </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>K8sé›†ç¾¤è®¤è¯å’Œæˆæƒ</title>
      <link href="/2023/12/17/k8s-ji-qun-ren-zheng-he-shou-quan/"/>
      <url>/2023/12/17/k8s-ji-qun-ren-zheng-he-shou-quan/</url>
      
        <content type="html"><![CDATA[<h1 id="K8sé›†ç¾¤ä¸­çš„è®¤è¯å’Œæˆæƒ"><a href="#K8sé›†ç¾¤ä¸­çš„è®¤è¯å’Œæˆæƒ" class="headerlink" title="K8sé›†ç¾¤ä¸­çš„è®¤è¯å’Œæˆæƒ"></a>K8sé›†ç¾¤ä¸­çš„è®¤è¯å’Œæˆæƒ</h1><h2 id="K8sé‡Œçš„ä¸¤ç±»ç”¨æˆ·"><a href="#K8sé‡Œçš„ä¸¤ç±»ç”¨æˆ·" class="headerlink" title="K8sé‡Œçš„ä¸¤ç±»ç”¨æˆ·"></a>K8sé‡Œçš„ä¸¤ç±»ç”¨æˆ·</h2><p>K8sæä¾›äº†ä¸°å¯Œçš„è®¤è¯å’Œæˆæƒæœºåˆ¶ï¼Œå¯ä»¥æ»¡è¶³å„ç§åœºæ™¯ç»†ç²’åº¦çš„è®¿é—®æ§åˆ¶ã€‚åœ¨k8sä¸­æœ‰ä¸¤ç±»ç”¨æˆ·ä½¿ç”¨å®¢æˆ·ç«¯è®¿é—®ï¼Œç¬¬ä¸€ç±»æ˜¯<strong>ç”¨æˆ·è´¦æˆ·ï¼ˆUserAccountï¼‰</strong>ï¼Œä¸€èˆ¬æ˜¯é›†ç¾¤å¤–éƒ¨ä½¿ç”¨ã€‚ä¾‹å¦‚ï¼Œè¿ç»´äººå‘˜æˆ–è€…é›†ç¾¤ç®¡ç†äººå‘˜ï¼Œä½¿ç”¨kubectlå‘½ä»¤çš„å‘èµ·è€…å°±æ˜¯ç”¨æˆ·è´¦æˆ·ã€‚ç¬¬äºŒç±»æ˜¯<strong>æœåŠ¡è´¦æˆ·ï¼ˆServiceAccountï¼‰ï¼Œ</strong>ä¸€èˆ¬æ˜¯ç»™é›†ç¾¤å†…éƒ¨çš„Podåšèº«ä»½è®¤è¯ã€‚æ¯”å¦‚ï¼ŒPodä¸­çš„è¿›ç¨‹éœ€è¦è®¿é—®API Serverè·å–ä¸€äº›ä¿¡æ¯ï¼Œæ­¤æ—¶ä½¿ç”¨çš„å°±æ˜¯ServiceAccountã€‚</p><h2 id="UserAccountçš„è®¤è¯åŠæƒé™ç®¡æ§"><a href="#UserAccountçš„è®¤è¯åŠæƒé™ç®¡æ§" class="headerlink" title="UserAccountçš„è®¤è¯åŠæƒé™ç®¡æ§"></a>UserAccountçš„è®¤è¯åŠæƒé™ç®¡æ§</h2><h3 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h3><p>å»ºç«‹ä¸€ä¸ªdevé›†ç¾¤ç”¨ä½œå¼€å‘å·¥ä½œï¼Œåœ¨devé›†ç¾¤ä¸­ï¼Œå‰ç«¯å¼€å‘äººå‘˜xiaomingåœ¨å‘½åç©ºé—´frontedä¸­å·¥ä½œï¼Œåç«¯å¼€å‘äººå‘˜xiaohongåœ¨å‘½åç©ºé—´backendä¸­å·¥ä½œã€‚xiaomingå’Œxiaohongè®¿é—®API Serveréœ€è¦x509æœºåˆ¶è®¤è¯è‡ªå·±èº«ä»½ï¼Œç„¶åä»…å¯ä»¥åœ¨è‡ªèº«çš„å‘½åç©ºé—´é‡Œè¿›è¡Œæ“ä½œï¼Œä¸å¯ä»¥è·³è½¬è·å–å…¶ä»–å‘½åç©ºé—´çš„èµ„æºã€‚</p><h3 id="kubeconfigå†…å®¹è¯¦è§£"><a href="#kubeconfigå†…å®¹è¯¦è§£" class="headerlink" title="kubeconfigå†…å®¹è¯¦è§£"></a>kubeconfigå†…å®¹è¯¦è§£</h3><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1<span class="token key atrule">clusters</span><span class="token punctuation">:</span> <span class="token comment"># è¿™ä¸ªæ„æ€æ˜¯éœ€è¦è¿æ¥åˆ°å“ªä¸ªé›†ç¾¤ã€ä¸‹é¢3-6è¡Œä¸ºä¸€ç»„ã€‘ï¼Œéœ€è¦æ·»åŠ å¤šå°‘æ–°é›†ç¾¤ï¼Œå°±å¤åˆ¶3-6è¡Œæ·»åŠ åˆ°6è¡Œä¸‹é¢å¹¶ä¿®æ”¹ç›¸å…³ä¿¡æ¯</span><span class="token key atrule">cluster</span><span class="token punctuation">:</span> <span class="token comment"># é›†ç¾¤å¼€å¤´ã€3-6è¡Œä¸ºä¸€ç»„ã€‘</span>              <span class="token key atrule">certificate-authority-data</span><span class="token punctuation">:</span> <span class="token comment">#è¿™ä¸ªæ˜¯æŒ‡å®šç”¨äºéªŒè¯ API æœåŠ¡å™¨è¯ä¹¦çš„ CAï¼ˆè¯ä¹¦é¢å‘æœºæ„ï¼‰çš„ Base64 ç¼–ç æ ¼å¼çš„æ•°æ®</span>              <span class="token key atrule">server</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//XX.XX.XX.XX<span class="token punctuation">:</span><span class="token number">6443</span> <span class="token comment">#è¿™ä¸ªé›†ç¾¤çš„masterèŠ‚ç‚¹ip</span>      <span class="token key atrule">name</span><span class="token punctuation">:</span> kubernetes <span class="token comment">#é›†ç¾¤åç§°ï¼Œå¯ä»¥è‡ªå®šä¹‰</span>contexts<span class="token punctuation">:</span><span class="token comment">#ä¸Šä¸‹æ–‡ï¼Œå°†ä¸Šé¢çš„é›†ç¾¤ã€clustersã€‘å’Œä¸‹é¢çš„ç”¨æˆ·ã€usersã€‘ç»‘å®šåœ¨ä¸€èµ·ã€æœªç»‘å®šå‰ä»–ä»¬æ˜¯ç›¸äº’ç‹¬ç«‹çš„ã€‘</span>      <span class="token punctuation">-</span> <span class="token key atrule">context</span><span class="token punctuation">:</span> <span class="token comment">#ä¸Šä¸‹æ–‡å¼€å¤´ã€8-12è¡Œä¸ºä¸€ç»„ã€‘ï¼Œæœ‰å¤šå°‘é›†ç¾¤æ·»åŠ å¤šå°‘ä¸Šä¸‹æ–‡ï¼Œæ”¾12è¡Œä¸‹é¢</span>              <span class="token key atrule">cluster</span><span class="token punctuation">:</span> kubernetes <span class="token comment">#è¿™ä¸ªæ˜¯ä¸Šé¢clusterçš„name</span>              <span class="token key atrule">namespace</span><span class="token punctuation">:</span> default <span class="token comment">#æ‰€å¤„å‘½åç©ºé—´ã€é»˜è®¤defaultã€‘</span>              <span class="token key atrule">user</span><span class="token punctuation">:</span> kubernetes<span class="token punctuation">-</span>admin <span class="token comment">#è¿™ä¸ªæ˜¯ä¸‹é¢userçš„name</span>              <span class="token key atrule">name</span><span class="token punctuation">:</span> kubernetes<span class="token punctuation">-</span>admin@kubernetes <span class="token comment"># è¿™ä¸ªä¸Šä¸‹æ–‡åç§°å¯ä»¥è‡ªå®šä¹‰</span>              <span class="token key atrule">current-context</span><span class="token punctuation">:</span> kubernetes<span class="token punctuation">-</span>admin@kubernetes <span class="token comment"># è¿™ä¸ªæ˜¯é»˜è®¤ä¸Šä¸‹æ–‡åç§°ã€clusterçš„nameã€‘ã€æ¯”å¦‚æœ‰å¤šä¸ªé›†ç¾¤ï¼Œä½¿ç”¨å“ªä¸ªä¸Šä¸‹æ–‡ï¼Œå°±é»˜è®¤åœ¨å“ªä¸ªé›†ç¾¤ä¸‹ã€‘</span>              <span class="token key atrule">kind</span><span class="token punctuation">:</span> Config              <span class="token key atrule">preferences</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>              <span class="token key atrule">users</span><span class="token punctuation">:</span> <span class="token comment"># è¿™æŒ‡å®šç”¨æˆ·ä¿¡æ¯ã€ä¸‹é¢17-20ä¸ºä¸€ç»„ã€‘ï¼Œæœ‰å¤šå°‘é›†ç¾¤æ·»åŠ å¤šå°‘ç”¨æˆ·ã€å¤åˆ¶å†…å®¹æ”¾20è¡Œä¸‹é¢ã€‘</span>            <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> kubernetes<span class="token punctuation">-</span>admin  <span class="token comment"># ç”¨æˆ·åç§°å¯ä»¥è‡ªå®šä¹‰</span>                <span class="token key atrule">user</span><span class="token punctuation">:</span>                <span class="token key atrule">client-certificate-data</span><span class="token punctuation">:</span> <span class="token comment">#æŒ‡å®šç”¨äºå®¢æˆ·ç«¯è¿›è¡Œèº«ä»½éªŒè¯çš„è¯ä¹¦çš„ Base64 ç¼–ç æ ¼å¼çš„æ•°æ®</span>                <span class="token key atrule">client-key-data</span><span class="token punctuation">:</span> <span class="token comment">#æŒ‡å®šç”¨äºå®¢æˆ·ç«¯èº«ä»½éªŒè¯çš„å®¢æˆ·ç«¯ç§é’¥çš„ Base64 ç¼–ç æ ¼å¼çš„æ•°æ®</span></code></pre><p>ç®€è¦æ¥è¯´ï¼Œä¸€ä¸ªkubeconfigç”±ä¸‰å¤§éƒ¨åˆ†æ„æˆã€‚ç¬¬ä¸€éƒ¨åˆ†æ˜¯<strong>clusterçš„é…ç½®</strong>ï¼ŒæŒ‡å®šä½ è¦è¿æ¥çš„é›†ç¾¤ã€‚ç¬¬äºŒéƒ¨åˆ†æ˜¯<strong>contexts</strong>ï¼ŒæŒ‡å®šä¸Šä¸‹æ–‡è¿æ¥çš„é…ç½®ï¼Œå³å“ªä¸ªç”¨æˆ·ï¼ˆwhoï¼‰è¿æ¥é›†ç¾¤ï¼ˆwhereï¼‰çš„å“ªä¸ªå‘½åç©ºé—´ï¼ˆwhichï¼‰ã€‚ç¬¬ä¸‰éƒ¨åˆ†æŒ‡å®š<strong>ç”¨æˆ·çš„é…ç½®</strong>ï¼Œå³ç”¨æˆ·è®¤è¯éœ€è¦çš„Keyå€¼ã€‚</p><h3 id="åˆ›å»ºè¯ä¹¦key"><a href="#åˆ›å»ºè¯ä¹¦key" class="headerlink" title="åˆ›å»ºè¯ä¹¦key"></a>åˆ›å»ºè¯ä¹¦key</h3><pre class="language-bash" data-language="bash"><code class="language-bash">openssl genrsa <span class="token parameter variable">-out</span> xiaoming.key <span class="token number">2048</span>openssl req <span class="token parameter variable">-new</span> <span class="token parameter variable">-key</span> xiaoming.key <span class="token parameter variable">-out</span> xiaoming.csr <span class="token parameter variable">-subj</span> <span class="token string">'/CN=xiaoming'</span>openssl x509 <span class="token parameter variable">-req</span> <span class="token parameter variable">-in</span> xiaoming.csr <span class="token parameter variable">-CA</span> /etc/kubernetes/pki/ca.crt <span class="token parameter variable">-CAkey</span> /etc/kubernetes/pki/ca.key <span class="token parameter variable">-CAcreateserial</span> <span class="token parameter variable">-out</span> xiaoming.crt <span class="token parameter variable">-days</span> <span class="token number">3650</span></code></pre><p>opensslå¸¸è§é€‰é¡¹ï¼š</p><p>â€¢ daysï¼šæŒ‡å®šè¯ä¹¦è¿‡æœŸæ—¶é—´</p><p>â€¢ -CAï¼šæŒ‡å®šä½¿ç”¨çš„CAè¯ä¹¦</p><p>â€¢ -CAkeyï¼šæŒ‡å®šä½¿ç”¨CAè¯ä¹¦çš„ç§é’¥</p><p>â€¢ -CAcreateserialï¼šè‡ªåŠ¨åˆ›å»ºCAçš„åºåˆ—å·</p><p>â€¢ -inï¼šå¾…ç­¾åçš„æ–‡ä»¶</p><p>â€¢ -outï¼šè¾“å‡º</p><p>ç»“æœå¦‚ä¸‹ï¼š</p><img src="/2023/12/17/k8s-ji-qun-ren-zheng-he-shou-quan/fig1.png" class=""><h3 id="æ›´æ”¹é›†ç¾¤é…ç½®å’Œç”¨æˆ·ä¸Šä¸‹æ–‡"><a href="#æ›´æ”¹é›†ç¾¤é…ç½®å’Œç”¨æˆ·ä¸Šä¸‹æ–‡" class="headerlink" title="æ›´æ”¹é›†ç¾¤é…ç½®å’Œç”¨æˆ·ä¸Šä¸‹æ–‡"></a>æ›´æ”¹é›†ç¾¤é…ç½®å’Œç”¨æˆ·ä¸Šä¸‹æ–‡</h3><p>è¿™ä¸‰æ­¥å°±æ˜¯æ„å»ºkubeconfigçš„ä¸‰å¤§ç»„æˆç»“æ„</p><pre class="language-yaml" data-language="yaml"><code class="language-yaml">set<span class="token punctuation">-</span>clusterkubectl config set<span class="token punctuation">-</span>cluster dev \  <span class="token punctuation">-</span><span class="token punctuation">-</span>certificate<span class="token punctuation">-</span>authority=/etc/kubernetes/pki/ca.crt \  <span class="token punctuation">-</span><span class="token punctuation">-</span>embed<span class="token punctuation">-</span>certs=true \  <span class="token punctuation">-</span><span class="token punctuation">-</span>server=http<span class="token punctuation">:</span>//xx.xx.xx.xx<span class="token punctuation">:</span>6443 \  <span class="token punctuation">-</span><span class="token punctuation">-</span>kubeconfig=xiaoming.kubeconfigset<span class="token punctuation">-</span>credentialskubectl config set<span class="token punctuation">-</span>credentials xiaoming \  <span class="token punctuation">-</span><span class="token punctuation">-</span>client<span class="token punctuation">-</span>certificate=/root/xiaoming.crt \  <span class="token punctuation">-</span><span class="token punctuation">-</span>embed<span class="token punctuation">-</span>certs=true \  <span class="token punctuation">-</span><span class="token punctuation">-</span>client<span class="token punctuation">-</span>key=/root/xiaoming.key \  <span class="token punctuation">-</span><span class="token punctuation">-</span>kubeconfig=xiaoming.kubeconfigset<span class="token punctuation">-</span>contextkubectl config set<span class="token punctuation">-</span>context dev<span class="token punctuation">-</span>fronted \  <span class="token punctuation">-</span><span class="token punctuation">-</span>cluster=dev \  <span class="token punctuation">-</span><span class="token punctuation">-</span>user=xiaoming \  <span class="token punctuation">-</span><span class="token punctuation">-</span>namespace=fronted \  <span class="token punctuation">-</span><span class="token punctuation">-</span>kubeconfig=xiaoming.kubeconfig</code></pre><p>å‚æ•°è¯´æ˜ï¼š</p><p>â€¢ â€“embed-certs&#x3D;trueï¼šè¡¨ç¤ºå°†CAè¯ä¹¦å†…å®¹å†™å…¥åˆ°æ­¤kubeconfigä¸­</p><p>â€¢ â€“certificate-authorityï¼šæŒ‡å®šCAè¯ä¹¦</p><p>â€¢ â€“kubeconfig&#x3D;xiaoming.kubeconfigï¼šæŒ‡å®šå†…å®¹å†™å…¥xiaoming.kubeconfigä¸­</p><p>æœ€åï¼Œåˆ‡æ¢ä¸Šä¸‹æ–‡</p><pre class="language-bash" data-language="bash"><code class="language-bash">kubectl config use-context dev-fronted <span class="token parameter variable">--kubeconfig</span><span class="token operator">=</span>xiaoming.kubeconfig</code></pre><p>æ­¤æ—¶å·²å®Œæˆè®¤è¯åŠŸèƒ½ï¼Œéšä¾¿æ‰¾ä¸ªå®¢æˆ·ç«¯ï¼Œä½¿ç”¨xiaoming.kubeconfigå³å¯å’ŒAPI Serveré€šä¿¡ã€‚æ³¨æ„ï¼Œæ­¤æ—¶ç”¨æˆ·xiaomingæ˜¯æ²¡æœ‰ä»»ä½•æˆæƒçš„ï¼Œæ¢è¨€ä¹‹ï¼Œå®ƒæ˜¯adminç”¨æˆ·ã€‚å¦‚æœæƒ³å°†ç”¨æˆ·xiaomingçš„æƒé™è§„èŒƒèµ·æ¥ï¼Œå°±å¿…é¡»ä¸ºç”¨æˆ·xiamingé…ç½®rbacã€‚</p><h3 id="åˆ›å»ºè§’è‰²èº«ä»½"><a href="#åˆ›å»ºè§’è‰²èº«ä»½" class="headerlink" title="åˆ›å»ºè§’è‰²èº«ä»½"></a>åˆ›å»ºè§’è‰²èº«ä»½</h3><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">kind</span><span class="token punctuation">:</span> Role<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> rbac.authorization.k8s.io/v1<span class="token key atrule">metadata</span><span class="token punctuation">:</span>  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> fronted  <span class="token key atrule">name</span><span class="token punctuation">:</span> xiaoming<span class="token key atrule">rules</span><span class="token punctuation">:</span><span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">""</span><span class="token punctuation">]</span>    <span class="token key atrule">resources</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">""</span><span class="token punctuation">]</span>    <span class="token key atrule">verbs</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'get'</span><span class="token punctuation">,</span> <span class="token string">'watch'</span><span class="token punctuation">,</span> <span class="token string">'list'</span><span class="token punctuation">,</span> <span class="token string">'delete'</span><span class="token punctuation">,</span> <span class="token string">'create'</span><span class="token punctuation">,</span> <span class="token string">'patch'</span><span class="token punctuation">,</span> <span class="token string">'update'</span><span class="token punctuation">]</span></code></pre><p>ä½¿ç”¨kubectl apply -f role.yamlå®šä¹‰xiaomingè§’è‰²å’Œæƒé™è§„åˆ™ã€‚åœ¨role.yamlæ–‡ä»¶ä¸­å®šä¹‰äº†xiaomingä»…èƒ½å¤Ÿå¯¹å‘½åç©ºé—´ä¸ºfrontedä¸‹çš„æ‰€æœ‰çš„èµ„æºå…·å¤‡getã€wathchã€listã€deleteã€createç­‰æƒé™ã€‚</p><h3 id="åˆ›å»ºè§’è‰²ç»‘å®š"><a href="#åˆ›å»ºè§’è‰²ç»‘å®š" class="headerlink" title="åˆ›å»ºè§’è‰²ç»‘å®š"></a>åˆ›å»ºè§’è‰²ç»‘å®š</h3><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">kind</span><span class="token punctuation">:</span> RoleBinding<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> rbac.authorization.k8s.io/v1<span class="token key atrule">metadata</span><span class="token punctuation">:</span>  <span class="token key atrule">name</span><span class="token punctuation">:</span> xiaoming  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> fronted<span class="token key atrule">subjects</span><span class="token punctuation">:</span><span class="token punctuation">-</span> <span class="token key atrule">kind</span><span class="token punctuation">:</span> User    <span class="token key atrule">name</span><span class="token punctuation">:</span> xiaoming    <span class="token key atrule">apiGroup</span><span class="token punctuation">:</span> rbac.authorization.k8s.io<span class="token key atrule">roleRef</span><span class="token punctuation">:</span>  <span class="token key atrule">kind</span><span class="token punctuation">:</span> Role  <span class="token key atrule">name</span><span class="token punctuation">:</span> xiaoming  <span class="token key atrule">apiGroup</span><span class="token punctuation">:</span> rbac.authorization.k8s.io</code></pre><p>ä½¿ç”¨kubectl apply -f rolebinding.yamlå°†Roleç»‘å®šç”¨æˆ·è´¦æˆ·ã€‚</p><p>æœ€åä¸€æ­¥<strong>åˆ‡æ¢ä¸Šä¸‹æ–‡</strong>ï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash">kubectl config use-context dev-fronted <span class="token parameter variable">--kubeconfig</span><span class="token operator">=</span>xiaoming.kubeconfig</code></pre><h3 id="éªŒè¯"><a href="#éªŒè¯" class="headerlink" title="éªŒè¯"></a>éªŒè¯</h3><img src="/2023/12/17/k8s-ji-qun-ren-zheng-he-shou-quan/fig2.png" class=""> <h2 id="ServiceAccountè®¤è¯åŠæƒé™ç®¡æ§"><a href="#ServiceAccountè®¤è¯åŠæƒé™ç®¡æ§" class="headerlink" title="ServiceAccountè®¤è¯åŠæƒé™ç®¡æ§"></a>ServiceAccountè®¤è¯åŠæƒé™ç®¡æ§</h2><p>Service Accountå¸¸ç”¨çš„è®¤è¯æ–¹å¼æ˜¯service account tokenã€‚è¯¥tokenå®šä¹‰äº†ä¸€ä¸ªpodå…·æœ‰æ€æ ·çš„æƒé™ã€‚</p><p>ä¸€ä¸ªservice accountä¸»è¦åŒ…æ‹¬ä¸‰ä¸ªå†…å®¹ï¼šnamespaceã€tokenå’Œca</p><p>â€¢ namespaceï¼šæŒ‡å®špodæ‰€åœ¨çš„namespace</p><p>â€¢ tokenï¼šç”¨ä½œèº«ä»½è®¤è¯</p><p>â€¢ caï¼šéªŒè¯API Serverçš„èº«ä»½</p><img src="/2023/12/17/k8s-ji-qun-ren-zheng-he-shou-quan/fig3.png" class=""> <h3 id="èƒŒæ™¯-1"><a href="#èƒŒæ™¯-1" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h3><p>é›†ç¾¤ç®¡ç†å‘˜é’ˆå¯¹podçš„éœ€æ±‚ï¼Œå®šåˆ¶åŒ–service accountï¼Œåšåˆ°æƒé™æœ€å°åˆ†é…çš„åŸåˆ™ï¼Œåªå¯¹æœ‰éœ€è¦çš„podé…ç½®ç›¸åº”è¾ƒé«˜çš„service accountï¼Œå…¶ä»–podä½¿ç”¨é»˜è®¤çš„service accountã€‚</p><h3 id="åˆ›å»ºsa"><a href="#åˆ›å»ºsa" class="headerlink" title="åˆ›å»ºsa"></a>åˆ›å»ºsa</h3><pre class="language-bash" data-language="bash"><code class="language-bash">kubectl create sa foo</code></pre><img src="/2023/12/17/k8s-ji-qun-ren-zheng-he-shou-quan/fig4.png" class=""> <h3 id="æŸ¥çœ‹fooçš„è¯¦ç»†ä¿¡æ¯"><a href="#æŸ¥çœ‹fooçš„è¯¦ç»†ä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹fooçš„è¯¦ç»†ä¿¡æ¯"></a>æŸ¥çœ‹fooçš„è¯¦ç»†ä¿¡æ¯</h3><pre class="language-bash" data-language="bash"><code class="language-bash">kubectl get sa foo <span class="token parameter variable">-o</span> wide</code></pre><img src="/2023/12/17/k8s-ji-qun-ren-zheng-he-shou-quan/fig5.png" class=""> <p>å½“åˆ›å»ºä¸€ä¸ªsaæ—¶ï¼Œä¼šè‡ªåŠ¨ç»‘å®šä¸€ä¸ªsecretã€‚</p><p>æ³¨ï¼šæ­¤æ—¶åœ¨podä¸­ç›´æ¥ä½¿ç”¨secretå’ŒAPI SERVERäº¤äº’æ˜¯è¢«æ‹’ç»çš„ã€‚å› ä¸ºsaè¿˜æ²¡æœ‰è¢«æˆæƒã€‚</p><h3 id="åˆ›å»ºè§’è‰²èº«ä»½-1"><a href="#åˆ›å»ºè§’è‰²èº«ä»½-1" class="headerlink" title="åˆ›å»ºè§’è‰²èº«ä»½"></a>åˆ›å»ºè§’è‰²èº«ä»½</h3><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> rbac.authorization.k8s.io/v1<span class="token key atrule">kind</span><span class="token punctuation">:</span> Role<span class="token key atrule">metadata</span><span class="token punctuation">:</span>  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> default  <span class="token key atrule">name</span><span class="token punctuation">:</span> test<span class="token key atrule">rules</span><span class="token punctuation">:</span>  <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">""</span><span class="token punctuation">]</span>  <span class="token key atrule">verbs</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'get'</span><span class="token punctuation">,</span><span class="token string">'list'</span><span class="token punctuation">,</span> <span class="token string">'watch'</span><span class="token punctuation">,</span><span class="token string">'delete'</span><span class="token punctuation">,</span> <span class="token string">'create'</span><span class="token punctuation">,</span> <span class="token string">'patch'</span><span class="token punctuation">,</span> <span class="token string">'update'</span><span class="token punctuation">]</span>  <span class="token key atrule">resources</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">]</span></code></pre><img src="/2023/12/17/k8s-ji-qun-ren-zheng-he-shou-quan/fig6.png" class=""> <h3 id="åˆ›å»ºè§’è‰²ç»‘å®š-1"><a href="#åˆ›å»ºè§’è‰²ç»‘å®š-1" class="headerlink" title="åˆ›å»ºè§’è‰²ç»‘å®š"></a>åˆ›å»ºè§’è‰²ç»‘å®š</h3><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">kind</span><span class="token punctuation">:</span> RoleBinding<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> rbac.authorization.k8s.io/v1<span class="token key atrule">metadata</span><span class="token punctuation">:</span>  <span class="token key atrule">name</span><span class="token punctuation">:</span> test  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> default<span class="token key atrule">subjects</span><span class="token punctuation">:</span><span class="token punctuation">-</span> <span class="token key atrule">kind</span><span class="token punctuation">:</span> ServiceAccount    <span class="token key atrule">name</span><span class="token punctuation">:</span> foo<span class="token key atrule">roleRef</span><span class="token punctuation">:</span>  <span class="token key atrule">kind</span><span class="token punctuation">:</span> Role  <span class="token key atrule">name</span><span class="token punctuation">:</span> test  <span class="token key atrule">apiGroup</span><span class="token punctuation">:</span> rbac.authorization.k8s.io</code></pre><h3 id="ç»‘å®špodå’Œsa"><a href="#ç»‘å®špodå’Œsa" class="headerlink" title="ç»‘å®špodå’Œsa"></a>ç»‘å®špodå’Œsa</h3><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1<span class="token key atrule">kind</span><span class="token punctuation">:</span> Pod<span class="token key atrule">metadata</span><span class="token punctuation">:</span>  <span class="token key atrule">name</span><span class="token punctuation">:</span> curl<span class="token punctuation">-</span>custome<span class="token punctuation">-</span>sa<span class="token key atrule">spec</span><span class="token punctuation">:</span>  <span class="token comment">#æŒ‡å®špodä½¿ç”¨å“ªä¸ªserviceaccount</span>  <span class="token key atrule">serviceAccountName</span><span class="token punctuation">:</span> foo  <span class="token key atrule">containers</span><span class="token punctuation">:</span><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> main    <span class="token key atrule">image</span><span class="token punctuation">:</span> tutum/curl    <span class="token key atrule">command</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'sleep'</span><span class="token punctuation">,</span><span class="token string">'9999999'</span><span class="token punctuation">]</span></code></pre><img src="/2023/12/17/k8s-ji-qun-ren-zheng-he-shou-quan/fig7.png" class=""> <p>å¯è§ï¼Œsaå’Œpodå·²ç»äº’ç›¸ç»‘å®šã€‚podä¼šæºå¸¦è¿™ä¸ªè‡ªå®šä¹‰çš„fooå»å’ŒAPI Serveräº¤äº’ã€‚</p><h3 id="éªŒè¯ï¼ˆæ”»å‡»è€…è§†è§’ï¼‰"><a href="#éªŒè¯ï¼ˆæ”»å‡»è€…è§†è§’ï¼‰" class="headerlink" title="éªŒè¯ï¼ˆæ”»å‡»è€…è§†è§’ï¼‰"></a>éªŒè¯ï¼ˆæ”»å‡»è€…è§†è§’ï¼‰</h3><p>æ ¹æ®ä¸Šé¢çš„ç”Ÿæˆè¿‡ç¨‹ï¼Œæˆ‘ä»¬å…¶å®æ˜¯åˆ›å»ºäº†ä¸€ä¸ªé«˜æƒé™çš„saè´¦æˆ·ã€‚ä¸€ä¸ªpodçš„ç”Ÿæˆï¼Œé»˜è®¤æƒ…å†µä¸‹ä¼šå°†saæŒ‚è½½åˆ°podã€‚æ¥ä¸‹æ¥ï¼Œå°†ä»¥æ”»å‡»è€…çš„è§†è§’æ¨¡æ‹Ÿåˆ©ç”¨é«˜æƒé™çš„saå’ŒAPI Serveräº¤äº’çš„è¿‡ç¨‹ã€‚</p><h4 id="è·å–é«˜æ•æ„Ÿçš„token"><a href="#è·å–é«˜æ•æ„Ÿçš„token" class="headerlink" title="è·å–é«˜æ•æ„Ÿçš„token"></a>è·å–é«˜æ•æ„Ÿçš„token</h4><p>æ”»å‡»è€…æ‹¿ä¸‹ä¸€ä¸ªpodåï¼Œä¸€èˆ¬å…ˆä¼šä»ç¯å¢ƒå˜é‡ä¸­æœå¯»å…³äºAPI Serverçš„IPåœ°å€ã€‚æ­¤å¤–ï¼Œè¿˜ä¼šåœ¨&#x2F;var&#x2F;run&#x2F;secrets&#x2F;kubernetes.io&#x2F;serviceaccount&#x2F;tokenè·¯å¾„ä¸‹è·å–tokenä¿¡æ¯ã€‚</p><img src="/2023/12/17/k8s-ji-qun-ren-zheng-he-shou-quan/fig8.png" class=""> <h4 id="æŸ¥çœ‹podä¿¡æ¯"><a href="#æŸ¥çœ‹podä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹podä¿¡æ¯"></a>æŸ¥çœ‹podä¿¡æ¯</h4><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">curl</span> <span class="token parameter variable">-k</span> <span class="token parameter variable">-H</span> <span class="token string">'Authorization: Bearer eyJhbGciOiJSUzI1NiIsImtpZCI6IiJ9.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJrdWJlLXN5c3RlbSIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VjcmV0Lm5hbWUiOiJkZWZhdWx0LXRva2VuLWprdzV2Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9zZXJ2aWNlLWFjY291bnQubmFtZSI6ImRlZmF1bHQiLCJrdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3NlcnZpY2UtYWNjb3VudC51aWQiOiJjYzczOTZjNC04MjhkLTExZWUtOTMyZS05MjEwNjIwYTgzNDkiLCJzdWIiOiJzeXN0ZW06c2VydmljZWFjY291bnQ6a3ViZS1zeXN0ZW06ZGVmYXVsdCJ9.fwX8Uq6PIFPLW8Qlg9RLf_rHquGrxddMzGKcajYfROo6UFmFRgWANYlSxluGGSbzV8YpCq62Qd6e6KzfhkUomteie0fkRZRw6Z7R2GuSg4TS9awXQexqazhPTpFGKpY1OeTM-uYZzFXwpd0jIQyKdmDMcxLXODDmBrBL9LRy4i2Qhj364HZFyUZBsHFgYbpDK7GoK87MkFO_k2ZixrdbbJ6pT49fwuG0zbHByEwhYvlHWnaTue6pmIEp8uJ7J5IlobdyfEo0KcEe99Uyt4Dwce0wsR0e6sxGzq59T8cDYA7ZoYycrkTEstYoeNiJUDXxFL-pTlBSkzAneYlrF_T1aw'</span> https://10.192.0.2:6443/api/v1/pods</code></pre><img src="/2023/12/17/k8s-ji-qun-ren-zheng-he-shou-quan/fig9.png" class=""> <h4 id="åˆ›å»ºpod"><a href="#åˆ›å»ºpod" class="headerlink" title="åˆ›å»ºpod"></a>åˆ›å»ºpod</h4><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">curl</span> <span class="token parameter variable">-k</span> <span class="token parameter variable">-H</span> <span class="token string">"Content-Type: application/json"</span> <span class="token parameter variable">-H</span> <span class="token string">"Authorization: Bearer eyJhbGciOiJSUzI1NiIsImtpZCI6IiJ9.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJrdWJlLXN5c3RlbSIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VjcmV0Lm5hbWUiOiJkZWZhdWx0LXRva2VuLWprdzV2Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9zZXJ2aWNlLWFjY291bnQubmFtZSI6ImRlZmF1bHQiLCJrdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3NlcnZpY2UtYWNjb3VudC51aWQiOiJjYzczOTZjNC04MjhkLTExZWUtOTMyZS05MjEwNjIwYTgzNDkiLCJzdWIiOiJzeXN0ZW06c2VydmljZWFjY291bnQ6a3ViZS1zeXN0ZW06ZGVmYXVsdCJ9.fwX8Uq6PIFPLW8Qlg9RLf_rHquGrxddMzGKcajYfROo6UFmFRgWANYlSxluGGSbzV8YpCq62Qd6e6KzfhkUomteie0fkRZRw6Z7R2GuSg4TS9awXQexqazhPTpFGKpY1OeTM-uYZzFXwpd0jIQyKdmDMcxLXODDmBrBL9LRy4i2Qhj364HZFyUZBsHFgYbpDK7GoK87MkFO_k2ZixrdbbJ6pT49fwuG0zbHByEwhYvlHWnaTue6pmIEp8uJ7J5IlobdyfEo0KcEe99Uyt4Dwce0wsR0e6sxGzq59T8cDYA7ZoYycrkTEstYoeNiJUDXxFL-pTlBSkzAneYlrF_T1aw"</span> <span class="token parameter variable">-X</span> POST https://10.192.0.2:6443/api/v1/namespaces/default/pods <span class="token parameter variable">-d</span> <span class="token string">'&#123;     "apiVersion": "v1",     "kind": "Pod",     "metadata": &#123;          "annotations": &#123;               "kubectl.kubernetes.io/last-applied-configuration": "&#123;\"apiVersion\":\"v1\",\"kind\":\"Pod\",\"metadata\":&#123;\"annotations\": &#123;&#125;,\"name\":\"test\",\"namespace\":\"default\"&#125;,\"spec\":&#123;\"containers\": [&#123;\"image\":\"nginx\",\"name\":\"test\",\"volumeMounts\":[&#123;\"mountPath\":\"/host\",\"name\":\"host\"&#125;]&#125;],\"volumes\":[&#123;\"hostPath\": &#123;\"path\":\"/\",\"type\":\"Directory\"&#125;,\"name\":\"host\"&#125;]&#125;&#125;\n"          &#125;,          "name": "test",          "namespace": "default"     &#125;,     "spec": &#123;          "containers": [               &#123;                    "image": "nginx",                    "name": "test",                    "volumeMounts": [                         &#123;                              "mountPath": "/host",                              "name": "host"                         &#125;                    ]               &#125;          ],          "volumes": [               &#123;                    "hostPath": &#123;                         "path": "/",                         "type": "Directory"                    &#125;,                    "name": "host"               &#125;          ]     &#125;&#125;'</span></code></pre><img src="/2023/12/17/k8s-ji-qun-ren-zheng-he-shou-quan/fig10.png" class="">  <p><strong>æ³¨ï¼š</strong>è¿™é‡Œpodæ²¡åˆ›å»ºæˆåŠŸæ˜¯ç½‘ç»œé—®é¢˜ï¼Œæ²¡èƒ½æŠŠé•œåƒæ‹‰ä¸‹æ¥ã€‚ä½†æ˜¯é€šè¿‡tokenå’ŒAPI SERVERäº¤äº’çš„æŒ‡ä»¤æ˜¯æˆåŠŸçš„ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> äº‘åŸç”Ÿå®‰å…¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸåˆ› </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GOå¹¶å‘</title>
      <link href="/2023/12/17/go-bing-fa/"/>
      <url>/2023/12/17/go-bing-fa/</url>
      
        <content type="html"><![CDATA[<h1 id="Golangæ‰«ç›²å¼å­¦ä¹ â€”â€”GOå¹¶å‘"><a href="#Golangæ‰«ç›²å¼å­¦ä¹ â€”â€”GOå¹¶å‘" class="headerlink" title="Golangæ‰«ç›²å¼å­¦ä¹ â€”â€”GOå¹¶å‘"></a>Golangæ‰«ç›²å¼å­¦ä¹ â€”â€”GOå¹¶å‘</h1><h2 id="å¹¶å‘ä¸å¹¶è¡ŒğŸ˜£"><a href="#å¹¶å‘ä¸å¹¶è¡ŒğŸ˜£" class="headerlink" title="å¹¶å‘ä¸å¹¶è¡ŒğŸ˜£"></a>å¹¶å‘ä¸å¹¶è¡ŒğŸ˜£</h2><h3 id="å¹¶å‘ä¸å¹¶è¡Œçš„æ¦‚å¿µå’ŒåŒºåˆ«"><a href="#å¹¶å‘ä¸å¹¶è¡Œçš„æ¦‚å¿µå’ŒåŒºåˆ«" class="headerlink" title="å¹¶å‘ä¸å¹¶è¡Œçš„æ¦‚å¿µå’ŒåŒºåˆ«"></a>å¹¶å‘ä¸å¹¶è¡Œçš„æ¦‚å¿µå’ŒåŒºåˆ«</h3><p>å¹¶è¡Œï¼šåŒä¸€ä¸ªæ—¶é—´æ®µå†…å¤šä¸ªä»»åŠ¡åŒæ—¶åœ¨ä¸åŒçš„CPUæ ¸å¿ƒä¸Šæ‰§è¡Œã€‚å¼ºè°ƒåŒä¸€æ—¶åˆ»å¤šä¸ªä»»åŠ¡ä¹‹é—´çš„â€<strong>åŒæ—¶æ‰§è¡Œ</strong>â€œã€‚</p><p>å¹¶å‘ï¼šåŒä¸€ä¸ªæ—¶é—´æ®µå†…å¤šä¸ªä»»åŠ¡éƒ½åœ¨è¿›å±•ã€‚å¼ºè°ƒå¤šä¸ªä»»åŠ¡é—´çš„â€<strong>äº¤æ›¿æ‰§è¡Œ</strong>â€œã€‚</p><img src="/2023/12/17/go-bing-fa/fig1.jpg" class="" title="å¹¶è¡Œä¸å¹¶å‘"><p>éšç€ç¡¬ä»¶æ°´å¹³çš„æé«˜ï¼Œç°åœ¨çš„ç»ˆç«¯ä¸»æœºéƒ½æ˜¯å¤šä¸ªCPUï¼Œæ¯ä¸ªCPUéƒ½æ˜¯å¤šæ ¸ç»“æ„ã€‚å½“å¤šä¸ªCPUåŒæ—¶è¿è¡Œèµ·æ¥ï¼Œè·‘ä¸åŒçš„ä»»åŠ¡ï¼Œè¿™å±äºå¹¶è¡Œï¼›åœ¨ä¸€ä¸ªCPUé‡Œçš„å¤šä¸ªæ ¸å¿ƒé‡ŒåŒæ—¶è¿è¡Œä¸åŒçš„ä»»åŠ¡ï¼ŒåŒæ ·ä¹Ÿå±äºå¹¶è¡Œã€‚è€Œå¹¶å‘æ˜¯å…³æ³¨ä¸€ä¸ªæ ¸å¿ƒé‡Œçš„å¤šä¸ªä»»åŠ¡ï¼Œè¿™æ—¶éœ€è¦äº¤æ›¿æ‰§è¡Œï¼Œå°±æ˜¯å¹¶å‘ã€‚</p><p>CPUæ˜¯è®¡ç®—å•å…ƒï¼Œæœ‰æ•°æ®æ‰èƒ½è¿›è¡Œè®¡ç®—ã€‚å½“ä¸€ä¸ªä»»åŠ¡è¢«ç½‘ç»œI&#x2F;Oé˜»å¡ï¼ŒCPUæ²¡æœ‰æ•°æ®ï¼Œå°±ä¼šå¤„äºç­‰å¾…ã€‚æ˜¾ç„¶ï¼Œè‹¥æ˜¯èƒ½å¤Ÿå°†ç­‰å¾…çš„æ—¶é—´åˆ©ç”¨èµ·æ¥ï¼Œèµ„æºåˆ©ç”¨ç‡ä¼šæé«˜ã€‚å› æ­¤ï¼Œå¹¶å‘å¤„ç†çš„ä¸»è¦ç›®çš„æ˜¯æé«˜CPUå’Œèµ„æºçš„åˆ©ç”¨ç‡ã€‚</p><h3 id="Goè¯­è¨€å¹¶å‘ä¸CPUæ ¸å¿ƒçš„å…³ç³»"><a href="#Goè¯­è¨€å¹¶å‘ä¸CPUæ ¸å¿ƒçš„å…³ç³»" class="headerlink" title="Goè¯­è¨€å¹¶å‘ä¸CPUæ ¸å¿ƒçš„å…³ç³»"></a>Goè¯­è¨€å¹¶å‘ä¸CPUæ ¸å¿ƒçš„å…³ç³»</h3><ul><li>Goå¹¶å‘æ˜¯åŸºäºGoroutineå’ŒChannelå®ç°çš„ã€‚</li></ul><p>Goroutineæ˜¯Goè¯­è¨€çš„å¹¶å‘æ‰§è¡Œå•å…ƒï¼ŒChannelç”¨äºGoroutineä¹‹é—´çš„é€šä¿¡ä¸åŒæ­¥ã€‚</p><ul><li>Goroutineçš„æ‰§è¡Œä¾èµ–äºæ“ä½œç³»ç»Ÿçš„çº¿ç¨‹è°ƒåº¦ã€‚</li></ul><p>Goroutineè‡ªèº«ä¸å…·å¤‡æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå®ƒå¿…é¡»ä¾å­˜åœ¨æ“ä½œç³»ç»Ÿçº¿ç¨‹ä¸Šæ‰å¯ä»¥çœŸæ­£æ‰§è¡Œã€‚å½“ä¸€ä¸ªGoroutineè¢«åˆ›å»ºæ—¶ï¼ŒGo runtimeä¼šè‡ªåŠ¨é€‰æ‹©ä¸€ä¸ªç©ºé—²çš„æ“ä½œç³»ç»Ÿçº¿ç¨‹,å°†è¿™ä¸ªGoroutineçš„æ‰§è¡Œä¸Šä¸‹æ–‡ç»‘å®šåˆ°è¯¥çº¿ç¨‹ä¸Šã€‚</p><img src="/2023/12/17/go-bing-fa/fig2.jpg" class="" title="GMPæ¨¡å‹"><p>ä¸Šå›¾ä¸­Gè¡¨ç¤ºGoroutineï¼ŒPè¡¨ç¤ºä¸€ä¸ªè°ƒåº¦çš„ä¸Šä¸‹æ–‡ï¼ˆ<strong>åŒ…å«äº†è¿è¡Œ Goroutine çš„èµ„æº</strong>ï¼‰ï¼ŒMè¡¨ç¤ºä¸€ä¸ªOSçº¿ç¨‹ã€‚ä¸€ä¸ªæ“ä½œç³»ç»Ÿçº¿ç¨‹å¯ä»¥åŒæ—¶å…³è”å¤šä¸ªGoroutineï¼Œè¿™äº›Goroutineä¼šè¢«Go runtimeé«˜æ•ˆåœ°åœ¨è¯¥çº¿ç¨‹ä¸Šè°ƒåº¦æ‰§è¡Œã€‚ä½†ä»»æ„æ—¶åˆ»åªä¼šæœ‰ä¸€ä¸ªGoroutineè·å¾—çº¿ç¨‹çš„æ‰§è¡Œæƒè¿›è¡Œè¿è¡Œï¼ˆG0å°±æ˜¯è·å¾—çº¿ç¨‹æƒçš„Goroutineï¼‰ã€‚å½“å…³è”çš„æ“ä½œç³»ç»Ÿçº¿ç¨‹ç»ˆæ­¢æ—¶ï¼Œç»‘å®šåœ¨è¯¥çº¿ç¨‹ä¸Šçš„æ‰€æœ‰Goroutineä¹Ÿä¼šè¢«ç»ˆæ­¢ã€‚</p><ul><li>åœ¨å•æ ¸CPUä¸Šï¼Œå³ä½¿æœ‰è®¸å¤šGoroutineï¼ŒåŒä¸€æ—¶åˆ»ä¹Ÿåªèƒ½æœ‰ä¸€ä¸ªGoroutineçœŸæ­£åœ¨CPUä¸Šè¿è¡Œã€‚</li></ul><p>å•æ ¸CPUåŒä¸€æ—¶åˆ»åªèƒ½æ‰§è¡Œä¸€ä¸ªçº¿ç¨‹ã€‚å³ä½¿æœ‰è®¸å¤šGoroutineï¼Œä¹Ÿåªæœ‰è·å¾—CPUæ‰§è¡Œæƒçš„é‚£ä¸ªGoroutineåœ¨çœŸæ­£è¿è¡Œï¼Œå…¶ä»–Goroutineä¼šè¢«æŒ‚èµ·,ç­‰å¾…ä¸‹æ¬¡è¢«è°ƒåº¦æ‰§è¡Œã€‚</p><ul><li>åœ¨å¤šæ ¸CPUä¸Šï¼Œæ“ä½œç³»ç»Ÿå¯ä»¥å°†ä¸åŒçš„Goroutineç›´æ¥è°ƒåº¦åˆ°ä¸åŒçš„CPUæ ¸å¿ƒä¸Šè¿è¡Œã€‚</li></ul><p>è¿™æ ·å¤šä¸ªGoroutineå°±å¯ä»¥åŒæ—¶çœŸæ­£è¿è¡Œï¼Œå®ç°å¹¶è¡Œæ‰§è¡Œã€‚æ­¤æ—¶Goå¹¶å‘ç¨‹åºå¯ä»¥å‘æŒ¥å¤šæ ¸CPUçš„å¼ºå¤§è®¡ç®—èƒ½åŠ›ã€‚Go runtimeä¼šæœ‰æ™ºèƒ½çš„è°ƒåº¦ç­–ç•¥ï¼Œå°†Goroutineå‡åŒ€åœ°åˆ†å¸ƒåœ¨æ‰€æœ‰CPUæ ¸å¿ƒä¸Šæˆ–è€…ä»¥è´Ÿè½½å‡è¡¡çš„æ–¹å¼è¿›è¡Œè°ƒåº¦ï¼Œè¿™å–å†³äºGoroutineçš„æ•°é‡å’Œç³»ç»Ÿçš„CPUæ ¸å¿ƒæ•°ã€‚</p><img src="/2023/12/17/go-bing-fa/fig3.png" class="" title="GMPæ¨¡å‹2"><p>GMPæ¨¡å‹å¦‚ä¸Šå›¾æ‰€ç¤ºã€‚å›¾ä¸­æ¶‰åŠ5ä¸ªé‡è¦çš„å®ä½“ã€‚</p><ul><li>å…¨å±€é˜Ÿåˆ—ï¼ˆrun queueï¼‰ï¼šå­˜æ”¾ç­‰å¾…è¿è¡Œçš„Goroutineã€‚</li><li>æœ¬åœ°é˜Ÿåˆ—ï¼ˆlocal queueï¼‰ï¼šå’ŒPè¿æ¥çš„é˜Ÿåˆ—ï¼Œå­˜æ”¾çš„ä¹Ÿæ˜¯ç­‰å¾…è¿è¡Œçš„Goroutineï¼Œå­˜æ”¾æ•°é‡æœ‰é™ï¼Œä¸€èˆ¬ä¸è¶…è¿‡256ä¸ªã€‚æ–°å»ºGoroutineæ—¶ï¼Œä¼˜å…ˆåœ¨æœ¬åœ°é˜Ÿåˆ—å­˜æ”¾ï¼Œç„¶åå†æ”¾ç½®å…¨å±€é˜Ÿåˆ—ã€‚</li><li>Pï¼šè¢«ç§°ä¸ºå¤„ç†å™¨ï¼ŒåŒ…å«äº†è¿è¡Œ Goroutine çš„èµ„æºã€‚ä¸€ä¸ªGoroutineæƒ³è¦è¿è¡Œï¼Œå¿…é¡»å…ˆè·å–Pã€‚Pçš„æ•°é‡æ˜¯å¯é…ç½®çš„ï¼Œæœ€å¤šæœ‰<code>GOMAXPROCS</code>ä¸ªã€‚</li><li>Gï¼šæŒ‡ä»£Goroutineï¼Œä¼šè¢«Go runtimeæ™ºèƒ½åŒ–è°ƒåº¦ã€‚å½“ä¸€ä¸ªçº¿ç¨‹Mç©ºé—²æ—¶ï¼Œé¦–å…ˆä¼šä»å…¨å±€é˜Ÿåˆ—é‡Œè·å–Goroutineï¼Œè‹¥å…¨å±€é˜Ÿåˆ—ä¸ºç©ºï¼Œåˆ™ä¼šä»å‘¨è¾¹çš„çº¿ç¨‹â€å·â€œä¸€åŠGoroutineæ”¾åˆ°æœ¬åœ°é˜Ÿåˆ—ã€‚</li><li>Mï¼šçº¿ç¨‹ç”±OSè°ƒåº¦å™¨åˆ†é…åˆ°CPUçš„æ ¸ä¸Šæ‰§è¡Œã€‚å½“ä¸€ä¸ªçº¿ç¨‹é˜»å¡æ—¶ï¼Œä¼šå¯¼è‡´å’Œè¯¥çº¿ç¨‹çš„å…¶å®ƒGoroutineâ€é¥¿æ­»â€œã€‚æ­¤æ—¶ï¼ŒGo runtimeä¼šè§£ç»‘På’ŒMï¼Œå°†ä¸€ä¸ªæ–°çš„Måˆ†é…ç»™Pé¿å…â€é¥¿æ­»â€œæƒ…å†µå‘ç”Ÿã€‚</li></ul><h3 id="Goroutineä¸OSçº¿ç¨‹çš„åŒºåˆ«"><a href="#Goroutineä¸OSçº¿ç¨‹çš„åŒºåˆ«" class="headerlink" title="Goroutineä¸OSçº¿ç¨‹çš„åŒºåˆ«"></a>Goroutineä¸OSçº¿ç¨‹çš„åŒºåˆ«</h3><ul><li>ç”Ÿå‘½å‘¨æœŸä¸åŒ</li></ul><p>Goroutineç”±Go runtime ç®¡ç†ç”Ÿå‘½å‘¨æœŸï¼Œåˆ›å»ºå’Œé”€æ¯ç”±runtimeè°ƒåº¦å®Œæˆã€‚OSçº¿ç¨‹æ˜¯ç”±æ“ä½œç³»ç»Ÿå†…æ ¸æ¥ç®¡ç†ç”Ÿå‘½å‘¨æœŸã€‚</p><ul><li>è°ƒåº¦ä¸åŒ</li></ul><p>Goroutineç”±Go runtimeçš„è°ƒåº¦å™¨è¿›è¡Œè°ƒåº¦ã€‚OSçº¿ç¨‹çš„è°ƒåº¦æ˜¯ç”±æ“ä½œç³»ç»Ÿå†…æ ¸æ ¹æ®æ—¶é—´ç‰‡è¿›è¡Œçš„ã€‚</p><ul><li>å…³è”å…³ç³»ä¸åŒ</li></ul><p>æ¯ä¸ªOSçº¿ç¨‹ä¸ä¸€ä¸ªGoroutineå…³è”ï¼Œä½†ä¸€ä¸ªGoroutineä¸ä¸€å®šå¯¹åº”ä¸€ä¸ªOSçº¿ç¨‹ï¼Œå¤šä¸ªGoroutineå¯èƒ½å¯¹åº”åŒä¸€ä¸ªOSçº¿ç¨‹ã€‚Go runtimeä¼šåŠ¨æ€åœ°å°†Goroutineæ˜ å°„åˆ°çº¿ç¨‹ä¸Šã€‚</p><ul><li>èµ„æºæ¶ˆè€—ä¸åŒ</li></ul><p>åˆ›å»ºå’Œç»´æŠ¤OSçº¿ç¨‹éœ€è¦è¾ƒå¤šèµ„æºï¼Œè€ŒGoroutineçš„èµ„æºæ¶ˆè€—å¾ˆå°ã€‚ä¸€ä¸ªåº”ç”¨ç¨‹åºå¯ä»¥åŒæ—¶å­˜åœ¨æˆåƒä¸Šä¸‡ä¸ªGoroutineï¼Œä½†OSçº¿ç¨‹æ•°ç›®é€šå¸¸è¾ƒå°ã€‚</p><ul><li>é€šä¿¡æ–¹å¼ä¸åŒ</li></ul><p>Goroutineä¹‹é—´é€šä¿¡ä½¿ç”¨Channelï¼Œè€ŒOSçº¿ç¨‹é€šå¸¸ä½¿ç”¨å…±äº«å†…å­˜æ¥é€šä¿¡ã€‚</p><ul><li>å¹¶å‘æ•°ä¸åŒ</li></ul><p>ä¸€ä¸ªGoç¨‹åºçš„å¹¶å‘åº¦å¯ä»¥è¾¾åˆ°ä¸Šç™¾ä¸‡ï¼Œè¿™æ˜¯ç”±äºGoroutineçš„é«˜æ•ˆç‡å®ç°ã€‚OSçº¿ç¨‹éš¾ä»¥è¾¾åˆ°å¦‚æ­¤é«˜çš„å¹¶å‘åº¦ã€‚</p><h2 id="GoroutineğŸ¤”"><a href="#GoroutineğŸ¤”" class="headerlink" title="GoroutineğŸ¤”"></a>GoroutineğŸ¤”</h2><h3 id="Goroutineçš„æ¦‚å¿µä¸ç‰¹ç‚¹"><a href="#Goroutineçš„æ¦‚å¿µä¸ç‰¹ç‚¹" class="headerlink" title="Goroutineçš„æ¦‚å¿µä¸ç‰¹ç‚¹"></a>Goroutineçš„æ¦‚å¿µä¸ç‰¹ç‚¹</h3><p><strong>æ¦‚å¿µï¼š</strong>Goroutineæ˜¯ä¸€ä¸ªè½»é‡çº§çš„æ‰§è¡Œå•å…ƒï¼Œç”¨äºæ‰§è¡Œå¹¶å‘ä»»åŠ¡ã€‚å¤šä¸ªGoroutineå¯ä»¥åœ¨åŒä¸€åœ°å€ç©ºé—´ä¸­æ‰§è¡Œï¼Œä¸”Go runtimeä¼šç®¡ç†å…¶ç”Ÿå‘½å‘¨æœŸã€‚Goroutineé€šè¿‡Channelè¿›è¡Œé€šä¿¡ã€‚</p><p><strong>ç‰¹ç‚¹ï¼š</strong></p><ol><li>è½»é‡çº§ï¼šåˆ›å»ºå’Œç»´æŠ¤Goroutineçš„å¼€é”€å¾ˆå°ï¼Œä¸€ä¸ªç¨‹åºå¯ä»¥åŒæ—¶å­˜åœ¨æˆåƒä¸Šä¸‡ä¸ªGoroutineã€‚</li><li>å¹¶å‘æ‰§è¡Œï¼šGoroutineå…è®¸ç¨‹åºåˆ©ç”¨å¤šæ ¸CPUçš„ä¼˜åŠ¿è¿›è¡Œå¹¶å‘æ‰§è¡Œã€‚</li><li>è‡ªåŠ¨è°ƒåº¦ï¼šGoroutineçš„è°ƒåº¦å®Œå…¨ç”±Goè¿è¡Œæ—¶è¿›è¡Œç®¡ç†ï¼Œå¼€å‘è€…ä¸éœ€è¦å…³å¿ƒåº•å±‚ç»†èŠ‚ã€‚</li><li>èµ„æºå…±äº«ï¼šå¤šä¸ªGoroutineå¯ä»¥è®¿é—®å…±äº«çš„å†…å­˜èµ„æºï¼Œè¿™ä½¿å¾—Goroutineä¹‹é—´å¯ä»¥é«˜æ•ˆåœ°é€šä¿¡ä¸åä½œã€‚</li><li>æ— éœ€å›æ”¶ï¼šGoroutineä¸éœ€è¦æ‰‹åŠ¨å›æ”¶å³å¯é‡Šæ”¾èµ„æºï¼Œè¿è¡Œæ—¶ä¼šè‡ªåŠ¨å›æ”¶ç»“æŸçš„Goroutineã€‚ </li><li>åŠ¨æ€æ‰©å±•ï¼šä¸€ä¸ªGoç¨‹åºå¯ä»¥ä»å‡ ä¸ªGoroutineå¼€å§‹ï¼Œç„¶ååŠ¨æ€åœ°åˆ›å»ºæ›´å¤šGoroutineæ¥åˆ©ç”¨å¤šæ ¸èµ„æºã€‚</li><li>é«˜å¹¶å‘ï¼šåˆ©ç”¨Goroutineå¯ä»¥è½»æ˜“åœ°ç¼–å†™é«˜å¹¶å‘ç¨‹åºï¼Œä¸€ä¸ªæœåŠ¡å™¨ç¨‹åºå¯ä»¥åŒæ—¶æ¥å¾…æˆåƒä¸Šä¸‡ä¸ªå®¢æˆ·ç«¯ã€‚</li><li>Channelé€šä¿¡ï¼šGoroutineä¹‹é—´å¯ä»¥é€šè¿‡Channelè¿›è¡Œé«˜æ•ˆçš„æ¶ˆæ¯é€šä¿¡ä¸åŒæ­¥ï¼Œè¿™ä½¿å¾—ç¼–å†™å¹¶å‘ç¨‹åºå˜å¾—ç®€å•ã€‚</li></ol><h3 id="åˆ›å»ºGoroutineçš„è¯­æ³•"><a href="#åˆ›å»ºGoroutineçš„è¯­æ³•" class="headerlink" title="åˆ›å»ºGoroutineçš„è¯­æ³•"></a>åˆ›å»ºGoroutineçš„è¯­æ³•</h3><pre class="language-none"><code class="language-none">func()&#123;&#125;()ï¼šç¬¬ä¸€ä¸ªfunc() &#123;...&#125; å®šä¹‰äº†ä¸€ä¸ªåŒ¿åå‡½æ•°(anonymous function)ã€‚ç¬¬äºŒä¸ª()ä»£è¡¨è°ƒç”¨è¿™ä¸ªåŒ¿åå‡½æ•°ã€‚</code></pre><pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token punctuation">(</span><span class="token string">"fmt"</span><span class="token string">"time"</span><span class="token punctuation">)</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// åˆ›å»ºä¸€ä¸ªGoroutine</span><span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Hello from Goroutine!"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token comment">// ä¸»Goroutine</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Hello from main!"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span></code></pre><h3 id="Goroutineçš„è°ƒåº¦ä¸ä¸Šä¸‹æ–‡åˆ‡æ¢"><a href="#Goroutineçš„è°ƒåº¦ä¸ä¸Šä¸‹æ–‡åˆ‡æ¢" class="headerlink" title="Goroutineçš„è°ƒåº¦ä¸ä¸Šä¸‹æ–‡åˆ‡æ¢"></a>Goroutineçš„è°ƒåº¦ä¸ä¸Šä¸‹æ–‡åˆ‡æ¢</h3><p>ä¸ºäº†è®©ä¸åŒçš„Goroutineæœ‰æœºä¼šè¿è¡Œï¼Œruntimeä¼šåœ¨Goroutineä¹‹é—´è¿›è¡Œä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚å½“ä¸€ä¸ªGoroutineè¿è¡Œä¸€å®šæ—¶é—´æˆ–é‡åˆ°channelæ“ä½œæ—¶ï¼Œä¼šä¸»åŠ¨äº¤å‡ºçº¿ç¨‹çš„æ‰§è¡Œæƒï¼Œè¿™æ—¶runtimeä¼šä»å…¶ä»–æŒ‚èµ·çš„Goroutineä¸­é€‰æ‹©ä¸€ä¸ªç»§ç»­è¿è¡Œã€‚ä¸Šä¸‹æ–‡åˆ‡æ¢æ¶‰åŠåˆ°ä¿å­˜å½“å‰è¿è¡ŒGoroutineçš„ç¨‹åºè®¡æ•°å™¨ã€å †æ ˆæŒ‡é’ˆç­‰ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œå¹¶æ¢å¤ä¸‹ä¸€ä¸ªè¦è¿è¡Œçš„Goroutineçš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œè¿™ä¸ªè¿‡ç¨‹éœ€è¦ä¸€å®šçš„æ—¶é—´å¼€é”€ã€‚</p><h3 id="Goroutineå­˜åœ¨çš„å†…å­˜é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ"><a href="#Goroutineå­˜åœ¨çš„å†…å­˜é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ" class="headerlink" title="Goroutineå­˜åœ¨çš„å†…å­˜é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ"></a>Goroutineå­˜åœ¨çš„å†…å­˜é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ</h3><p>å­˜åœ¨çš„é—®é¢˜ï¼š</p><ul><li><p>æ ˆæº¢å‡ºï¼šæ¯ä¸ªGoroutineéƒ½æœ‰ä¸€ä¸ªç§æœ‰çš„æ ˆï¼Œé»˜è®¤æ ˆå¤§å°ä¸º2MBï¼Œå¦‚æœå‡½æ•°è°ƒç”¨å¤ªæ·±ä¼šå¯¼è‡´æ ˆæº¢å‡ºã€‚</p></li><li><p>å †æº¢å‡ºï¼šå¦‚æœGoroutineä¸­åˆ†é…è¿‡å¤šçš„å †å¯¹è±¡,ä¹Ÿä¼šå¯¼è‡´å†…å­˜æº¢å‡ºã€‚</p></li><li><p>å†…å­˜æ³„éœ²ï¼šå¦‚æœGoroutineé€€å‡ºæ—¶æ²¡æœ‰é‡Šæ”¾ä¹‹å‰åˆ†é…çš„å†…å­˜,ä¼šå¯¼è‡´è¿™éƒ¨åˆ†å†…å­˜æ³„æ¼ã€‚</p></li></ul><p>è§£å†³æ–¹æ¡ˆï¼š</p><ul><li>Goroutineæ ˆå¤§å°</li></ul><p><strong>æ–¹æ³•ä¸€ï¼š</strong>è®¾ç½®<code>runtime.GOMAXPROCS(n, stackSize)</code>ï¼Œå…¶ä¸­ï¼ŒnæŒ‡å®šè¦ä½¿ç”¨çš„Pçš„ä¸ªæ•°ï¼Œè®¾ç½®ä¸º0è¡¨ç¤ºä½¿ç”¨æ‰€æœ‰CPUæ ¸å¿ƒï¼ŒstackSizeæŒ‡å®šæ–°çš„é»˜è®¤Goroutineæ ˆå¤§å°ï¼Œå•ä½ä¸ºå­—èŠ‚ã€‚</p><p><strong>æ–¹æ³•äºŒï¼š</strong>åˆ›å»ºGoroutineæ—¶ï¼ŒæŒ‡å®šæ ˆçš„å¤§å°ã€‚<code>go func(params) &#123; /* ... */ &#125;(stackSize, params)</code>ï¼ŒstackSizeå¿…é¡»æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œåœ¨paramsä¹‹å‰æŒ‡å®šã€‚<font color = 'red'><strong>æ³¨æ„</strong></font>ï¼šstackSizeçš„å‚æ•°åªåœ¨ç¼–è¯‘æ—¶èµ·ä½œç”¨ï¼Œç”¨äºæŒ‡å®šGoroutineçš„æ ˆå¤§å°ï¼Œåœ¨è¢«è°ƒç”¨çš„å‡½æ•°å†…éƒ¨ï¼Œå®ƒæ— æ³•è®¿é—®è¿™ä¸ªå‚æ•°ã€‚</p><ul><li>é¿å…æ— é™é€’å½’</li></ul><p>åœ¨Goroutineä¸­è°ƒç”¨æ— é™é€’å½’å‡½æ•°ä¼šå¼•èµ·æ ˆæº¢å‡º,åº”è¯¥é¿å…è¿™ç§æƒ…å†µå‘ç”Ÿã€‚</p><ul><li>è®¾ç½®åƒåœ¾å›æ”¶é˜ˆå€¼</li></ul><p>å¯ä»¥é€šè¿‡runtime.GOGCæ¥è®¾ç½®åƒåœ¾å›æ”¶å™¨çš„é˜ˆå€¼,è§¦å‘æ›´é¢‘ç¹çš„åƒåœ¾å›æ”¶æ¥é¿å…å †æº¢å‡ºï¼Œä¾‹å¦‚<code>runtime.GOGC=200   </code>è®¾ç½®åƒåœ¾å›æ”¶é˜ˆå€¼ä¸º200ã€‚</p><ul><li>æ‰‹åŠ¨å›æ”¶å †å†…å­˜</li></ul><p>å½“ä¸€ä¸ªGoroutineç»“æŸæ—¶ï¼Œå…¶ç§æœ‰æ ˆå†…å­˜ä¼šè¢«æ”¶å›ï¼Œä½†å †å†…å­˜ä¸ä¼šè‡ªåŠ¨å›æ”¶ã€‚å› æ­¤ï¼Œéœ€è¦åœ¨Goroutineç»“æŸå‰æ‰‹åŠ¨å›æ”¶ä¸å†ä½¿ç”¨çš„å †å†…å­˜ï¼Œå¦åœ¨ä¼šå‘ç”Ÿå†…å­˜æ³„éœ²ã€‚</p><pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// åˆ†é…ä¸€äº›å †ç©ºé—´</span>    buf <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>    <span class="token comment">// ä½¿ç”¨buf...</span>  <span class="token comment">// Goroutineç»“æŸå‰æ‰‹åŠ¨å›æ”¶buf</span>buf <span class="token operator">=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">var</span> wg sync<span class="token punctuation">.</span>WaitGroupwg<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">defer</span> wg<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment">// Goroutineç»“æŸ decrement WaitGroupè®¡æ•°</span>    <span class="token comment">// åˆ†é…å†…å­˜å¹¶ä½¿ç”¨...</span>    buf <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>     <span class="token comment">// ä½¿ç”¨buf...</span>    buf <span class="token operator">=</span> <span class="token boolean">nil</span>        <span class="token comment">// æ‰‹åŠ¨å›æ”¶å†…å­˜</span><span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>wg<span class="token punctuation">.</span><span class="token function">Wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span>           <span class="token comment">// ç­‰å¾…Goroutineç»“æŸ</span></code></pre><h2 id="ChannelğŸ‘"><a href="#ChannelğŸ‘" class="headerlink" title="ChannelğŸ‘"></a>ChannelğŸ‘</h2><h3 id="Channelçš„æ¦‚å¿µä¸ç‰¹ç‚¹"><a href="#Channelçš„æ¦‚å¿µä¸ç‰¹ç‚¹" class="headerlink" title="Channelçš„æ¦‚å¿µä¸ç‰¹ç‚¹"></a>Channelçš„æ¦‚å¿µä¸ç‰¹ç‚¹</h3><blockquote><p>Channels are not closed by default. They need to be closed explicitly with the <code>Close</code> method to indicate that no more values will be sent on the channel. </p></blockquote><p>Channelæ˜¯ä¸€ä¸ªé€šä¿¡æœºåˆ¶ï¼Œå®ƒå¯ä»¥ä½¿å¤šä¸ªGoroutineä¹‹é—´ç›¸äº’å‘é€æ•°æ®ã€‚Channelå…è®¸ä»»æ„ä¸¤ä¸ªGoroutineé€šè¿‡å®ƒå¼‚æ­¥åœ°ä¼ é€’ä¿¡æ¯ã€‚</p><img src="/2023/12/17/go-bing-fa/fig4.png" class="" title="channel"><p><strong>ç‰¹ç‚¹ï¼š</strong></p><ul><li><p>æ–¹å‘æ€§ï¼šChannelå¯ä»¥æ˜¯åŒå‘çš„ï¼ˆdefaultï¼‰æˆ–å•å‘çš„ï¼ˆæŒ‡å®šæ–¹å‘æ—¶ï¼‰ã€‚å•å‘ChannelæŒ‰å‘é€&#x2F;æ¥æ”¶æ–¹å‘åˆ†ä¸ºå‘é€ï¼ˆchan&lt;-ï¼‰å’Œæ¥æ”¶ï¼ˆ&lt;-chanï¼‰Channelã€‚</p></li><li><p>ç±»å‹å®‰å…¨ï¼šChannelåœ¨å£°æ˜æ—¶éœ€æŒ‡å®šå…ƒç´ ç±»å‹ï¼Œä¹‹ååªèƒ½ä¼ é€è¯¥ç±»å‹çš„å…ƒç´ ã€‚è¿™ä¿è¯äº†Channelé€šä¿¡çš„ç±»å‹å®‰å…¨ã€‚</p></li><li><p>FIFOï¼šChannelå®ç°äº†å…ˆå…¥å…ˆå‡ºçš„è§„åˆ™ï¼Œå‘é€çš„å…ƒç´ æŒ‰é¡ºåºè¢«æ¥æ”¶ã€‚</p></li><li><p>é˜»å¡ï¼šå‘ä¸€ä¸ªæ»¡çš„Channelå‘é€æ•°æ®ä¼šå¯¼è‡´å‘é€æ–¹é˜»å¡ï¼Œä»ä¸€ä¸ªç©ºçš„Channelæ¥æ”¶æ•°æ®ä¼šå¯¼è‡´æ¥æ”¶æ–¹é˜»å¡ã€‚</p></li><li><p>ç¼“å†²ï¼šå¯ä»¥æŒ‡å®šChannelçš„ç¼“å†²åŒºå¤§å°ï¼Œå‘ä¸€ä¸ªæœªæ»¡çš„ç¼“å†²Channelå‘é€æ•°æ®ä¸ä¼šé˜»å¡ã€‚</p></li><li><p>å…³é—­ï¼šå…³é—­çš„Channelæ— æ³•å†å‘é€æ•°æ®ï¼Œä½†å¯ä»¥ç»§ç»­ä»ä¸­æ¥æ”¶æ•°æ®ã€‚å‘å…³é—­çš„Channelå‘é€æ•°æ®ä¼španicã€‚</p></li><li><p>æ— ç¼“å†²æˆ–æ»¡çš„Channelå¯¼è‡´Goroutineé˜»å¡ï¼Œè¿™å¯ç”¨äºå®ç°åŒæ­¥å’Œåä½œã€‚</p></li><li><p>Channelæ”¯æŒfor rangeå½¢å¼çš„æ¥æ”¶ï¼Œè¿™ä¼šä¸æ–­æ¥æ”¶Channelçš„æ•°æ®çŸ¥é“å®ƒè¢«å…³é—­ã€‚</p></li><li><p>Channelå¯ç”¨äºå‡½æ•°é—´ä¼ é€’æ•°æ®ï¼Œå®ç°å¼‚æ­¥æ‰§è¡Œçš„å‡½æ•°ä¹‹é—´çš„æ•°æ®é€šä¿¡ã€‚</p></li></ul><h3 id="æ— ç¼“å†²Channelä¸æœ‰ç¼“å†²Channel"><a href="#æ— ç¼“å†²Channelä¸æœ‰ç¼“å†²Channel" class="headerlink" title="æ— ç¼“å†²Channelä¸æœ‰ç¼“å†²Channel"></a>æ— ç¼“å†²Channelä¸æœ‰ç¼“å†²Channel</h3><ul><li>æ— ç¼“å†²Channel</li></ul><p><code>unbuffered channel</code> å°±æ˜¯ç¼“å†²å¤§å°ä¸º 0 çš„ <code>channel</code>ï¼Œæ— ç¼“å†²åŒºçš„ channel æœ¬èº«æ˜¯ä¸å­˜æ”¾æ•°æ®çš„ï¼Œåœ¨å‘é€å’Œæ¥æ”¶éƒ½ä¼šè¢«é˜»å¡ã€‚ä¹Ÿå°±æ˜¯ç›¸å½“äºï¼Œä½ ç°åœ¨æ˜¯ä¸€ä¸ª <code>send</code> èº«ä»½ï¼Œä½†æ˜¯å½“å¦å¤–ä¸€ä¸ªæ²¡æœ‰ <code>receive</code> ä½ å‘é€çš„å€¼ä¹‹å‰ï¼Œä½ ä¸€ç›´å¤„äºé˜»å¡ï¼ˆç­‰å¾…æ¥æ”¶ï¼‰çŠ¶æ€ï¼›å°±å¥½æ¯”ä½ é€’ä¸œè¥¿ç»™åˆ«äººï¼Œåˆ«äººæ²¡æ¥ï¼Œä½ å°±è¦ä¸€ç›´ä¸¾ç€ä¸œè¥¿ã€‚ç›¸åï¼Œå¦‚æœä½ ç°åœ¨æ˜¯ä¸€ä¸ª <code>receive</code> èº«ä»½ï¼Œä½ å°±ä¼šä¸€ç›´é˜»å¡ï¼ˆç­‰å¾…å‘é€ï¼‰çŠ¶æ€ï¼Œåœ¨ä½ æ‹¿åˆ°å€¼ä¹‹å‰ï¼Œä½ ä¼šä¸€ç›´ç­‰å¾…ã€‚å°±å¥½æ¯”ä½ å‡†å¤‡è¦æ¥ä¸œè¥¿ï¼Œåˆ«äººè¿Ÿè¿Ÿä¸ç»™ä½ ï¼Œä½ å°±è¦ä¸€ç›´ç­‰ç€ã€‚</p><pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token punctuation">(</span><span class="token string">"fmt"</span><span class="token punctuation">)</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token keyword">struct</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">defer</span> <span class="token function">close</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span>v <span class="token operator">:=</span> <span class="token operator">&lt;-</span>chfmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"receive a struct: %v\n"</span><span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>ch <span class="token operator">&lt;-</span> <span class="token keyword">struct</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"send a struct"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span></code></pre><ul><li>æœ‰ç¼“å†²Channel</li><li><img src="/2023/12/17/go-bing-fa/fig5.jpg" class="" title="æœ‰ç¼“å†²çš„channel"></li></ul><p>æœ‰ç¼“å†²çš„Channelå°±æ˜¯è®¾ç½®äº†ä¸€ä¸ªbuffersizeï¼Œä½œä¸ºç¼“å†²åŒºçš„å¤§å°ã€‚</p><pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token punctuation">(</span><span class="token string">"fmt"</span><span class="token string">"time"</span><span class="token punctuation">)</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>  <span class="token comment">// è®¾ç½®buffersizeå¤§å°ä¸º1</span><span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">defer</span> <span class="token function">close</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span><span class="token keyword">defer</span> fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"æˆ‘å…³é—­äº†"</span><span class="token punctuation">)</span>ch <span class="token operator">&lt;-</span> <span class="token number">1</span>ch <span class="token operator">&lt;-</span> <span class="token number">2</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"send a struct"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">5</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span><span class="token keyword">for</span> <span class="token punctuation">&#123;</span>v<span class="token punctuation">,</span> ok <span class="token operator">:=</span> <span class="token operator">&lt;-</span>ch<span class="token keyword">if</span> <span class="token operator">!</span>ok <span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"channel closed"</span><span class="token punctuation">)</span><span class="token keyword">break</span><span class="token punctuation">&#125;</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"received a struct %v\n"</span><span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">// output</span>received a <span class="token keyword">struct</span> <span class="token number">1</span>received a <span class="token keyword">struct</span> <span class="token number">2</span>send a <span class="token keyword">struct</span>æˆ‘å…³é—­äº†channel closed</code></pre><p>åˆ›å»ºChannelæ—¶ï¼Œå½“size &#x3D;&#x3D;1æ—¶ï¼Œç›¸å½“äºsize&#x3D;&#x3D;0ï¼Œè¡¨ç¤ºåˆ›å»ºä¸€ä¸ªæ— ç¼“å†²çš„é€šé“ã€‚æ‰€ä»¥ï¼Œå½“å‘é€šé“ä¼ å…¥ä¸€ä¸ª1æ—¶ï¼Œç¼“å†²åŒºå°±æ»¡äº†ã€‚æ­¤æ—¶ï¼Œå¿…é¡»ç­‰æ¥æ”¶ç«¯å°†1è¯»èµ°ï¼Œæ‰èƒ½ç»§ç»­å‘channelå‘é€2ã€‚</p><p>å°†buffersizeä¿®æ”¹ä¸º2æ—¶ï¼Œè¡¨ç¤ºåˆ›å»ºä¸€ä¸ªæœ‰ç¼“å†²çš„é€šé“ã€‚å‘é€è€…ä¼šä¸€æ¬¡æ€§å°†1å’Œ2å‘é€åˆ°é€šé“é‡Œï¼Œç„¶åå°±å…³é—­Channelçš„å†™å…¥ç«¯ã€‚ç¡çœ 5ç§’åï¼Œå°±ç”±æ¥æ”¶ç«¯å°†ç»“æœè¯»å‡ºã€‚</p><pre class="language-go" data-language="go"><code class="language-go"><span class="token comment">// output</span>send a <span class="token keyword">struct</span>æˆ‘å…³é—­äº†received a <span class="token keyword">struct</span> <span class="token number">1</span>received a <span class="token keyword">struct</span> <span class="token number">2</span>channel closed</code></pre><h3 id="åº”ç”¨ï¼šå®ç°ä¸€ä¸ªç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹"><a href="#åº”ç”¨ï¼šå®ç°ä¸€ä¸ªç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹" class="headerlink" title="åº”ç”¨ï¼šå®ç°ä¸€ä¸ªç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹"></a>åº”ç”¨ï¼šå®ç°ä¸€ä¸ªç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹</h3><pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token punctuation">(</span><span class="token string">"fmt"</span><span class="token string">"time"</span><span class="token punctuation">)</span><span class="token keyword">func</span> <span class="token function">producer</span><span class="token punctuation">(</span>out <span class="token keyword">chan</span><span class="token operator">&lt;-</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">&#123;</span>out <span class="token operator">&lt;-</span> i  <span class="token comment">// ç”Ÿäº§ä¸€ä¸ªæ•°æ®ï¼Œå‘é€åˆ°Channel</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"ç”Ÿäº§è€…ï¼š"</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token function">close</span><span class="token punctuation">(</span>out<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">consumer</span><span class="token punctuation">(</span>in <span class="token operator">&lt;-</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">for</span> num <span class="token operator">:=</span> <span class="token keyword">range</span> in <span class="token punctuation">&#123;</span>  <span class="token comment">// ä»Channelä¸­æ¥æ”¶æ•°æ®</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"æ¶ˆè´¹è€…ï¼š"</span><span class="token punctuation">,</span> num<span class="token punctuation">)</span>  <span class="token comment">// æ¶ˆè´¹æ•°æ®</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// åˆ›å»ºä¸€ä¸ªç®¡é“</span>ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">)</span><span class="token keyword">go</span> <span class="token function">producer</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span>  <span class="token comment">// å¯åŠ¨ç”Ÿäº§è€…Goroutine</span><span class="token keyword">go</span> <span class="token function">consumer</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span>  <span class="token comment">// å¯åŠ¨æ¶ˆè´¹è€…Goroutine</span><span class="token keyword">go</span> <span class="token function">consumer</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span>  <span class="token comment">// å¯åŠ¨æ¶ˆè´¹è€…Goroutine</span>time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">5</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>  <span class="token comment">// ç­‰å¾…</span><span class="token punctuation">&#125;</span></code></pre><h2 id="Channelè¶…æ—¶æœºåˆ¶"><a href="#Channelè¶…æ—¶æœºåˆ¶" class="headerlink" title="Channelè¶…æ—¶æœºåˆ¶"></a>Channelè¶…æ—¶æœºåˆ¶</h2><h3 id="ä¸ºä»€ä¹ˆéœ€è¦Channelè¶…æ—¶æœºåˆ¶"><a href="#ä¸ºä»€ä¹ˆéœ€è¦Channelè¶…æ—¶æœºåˆ¶" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦Channelè¶…æ—¶æœºåˆ¶"></a>ä¸ºä»€ä¹ˆéœ€è¦Channelè¶…æ—¶æœºåˆ¶</h3><p>ä½¿ç”¨ select å¯ä»¥å®ç° channel è¶…æ—¶,è¿™å¯ä»¥è§£å†³ä»¥ä¸‹é—®é¢˜:</p><ol><li>é˜²æ­¢åç¨‹é˜»å¡ï¼šå¦‚æœåªè¯»å– channelï¼Œå¹¶ä¸” channel æ²¡æœ‰è¢«å…³é—­ï¼Œåç¨‹ä¼šä¸€ç›´é˜»å¡ã€‚ä½¿ç”¨è¶…æ—¶å¯ä»¥é˜²æ­¢åç¨‹æ— é™é˜»å¡ã€‚</li><li>å®ç°é‡è¯•ï¼šåœ¨è¶…æ—¶åå¯ä»¥é‡æ–°åˆå§‹åŒ– channel è¯»å–ï¼Œå®ç°é‡è¯•çš„æ•ˆæœã€‚</li><li>é™å®šæ“ä½œæ—¶é—´ï¼šæˆ‘ä»¬å¯ä»¥ç»™å®šä¸€ä¸ªæ—¶é—´é™åˆ¶ï¼Œå¦‚æœåœ¨é™å®šæ—¶é—´å†…é€šä¿¡æœªæˆåŠŸï¼Œåˆ™åšé»˜è®¤æ“ä½œã€‚</li></ol><h3 id="selectè¯­å¥ä¸­çš„caseè¯­æ³•"><a href="#selectè¯­å¥ä¸­çš„caseè¯­æ³•" class="headerlink" title="selectè¯­å¥ä¸­çš„caseè¯­æ³•"></a>selectè¯­å¥ä¸­çš„caseè¯­æ³•</h3><pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">select</span> <span class="token punctuation">&#123;</span><span class="token keyword">case</span> <span class="token operator">&lt;</span>communication <span class="token number">1</span><span class="token operator">></span><span class="token punctuation">:</span>    <span class="token operator">&lt;</span>statements<span class="token operator">></span>  <span class="token comment">// æ‰§è¡Œå½“ communication 1 æˆåŠŸæ—¶ </span><span class="token keyword">case</span> <span class="token operator">&lt;</span>communication <span class="token number">2</span><span class="token operator">></span><span class="token punctuation">:</span>    <span class="token operator">&lt;</span>statements<span class="token operator">></span>  <span class="token comment">// ...</span><span class="token keyword">default</span><span class="token punctuation">:</span>    <span class="token operator">&lt;</span>statements<span class="token operator">></span>  <span class="token comment">// é»˜è®¤æ‰§è¡Œçš„è¯­å¥,å½“æ²¡æœ‰caseå¯ä»¥ç»§ç»­æ—¶æ‰§è¡Œ</span><span class="token punctuation">&#125;</span></code></pre><p>select çš„ä¸€äº›è§„åˆ™:</p><ol><li><p>å¦‚æœå¤šä¸ªcaseåŒæ—¶æ»¡è¶³ï¼Œselectä¼šéšæœºé€‰æ‹©ä¸€ä¸ªæ‰§è¡Œã€‚</p></li><li><p>å¦‚æœæ²¡æœ‰caseæ»¡è¶³ï¼Œåˆ™ä¼šæ‰§è¡Œdefaultåˆ†æ”¯ã€‚å¦‚æœdefaultä¹Ÿä¸å­˜åœ¨ï¼Œselectå°†é˜»å¡ï¼Œç›´åˆ°æŸä¸ªé€šä¿¡æ“ä½œæˆåŠŸã€‚</p></li><li><p>å¿…é¡»æœ‰caseå’Œcommunicationï¼Œä¸èƒ½ä¸€ä¸ªç©ºçš„selectã€‚ </p></li><li><p>æ¯ä¸ªcaseå®é™…ä¸Šæ˜¯ä¸€ä¸ªé€šä¿¡æ“ä½œï¼ˆchannelæ¥æ”¶&#x2F;å‘é€ï¼‰ï¼Œè¦æ±‚å¿…é¡»ä¸ºchannelã€‚</p></li></ol><pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token punctuation">(</span>    <span class="token string">"fmt"</span>    <span class="token string">"time"</span><span class="token punctuation">)</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>c1 <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">string</span><span class="token punctuation">)</span>c2 <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>    c1 <span class="token operator">&lt;-</span> <span class="token string">"one"</span><span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>    c2 <span class="token operator">&lt;-</span> <span class="token string">"two"</span><span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">select</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">case</span> msg1 <span class="token operator">:=</span> <span class="token operator">&lt;-</span>c1<span class="token punctuation">:</span>        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"received"</span><span class="token punctuation">,</span> msg1<span class="token punctuation">)</span>    <span class="token keyword">case</span> msg2 <span class="token operator">:=</span> <span class="token operator">&lt;-</span>c2<span class="token punctuation">:</span>        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"received"</span><span class="token punctuation">,</span> msg2<span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="åº”ç”¨-selectå®ç°Channelè¶…æ—¶"><a href="#åº”ç”¨-selectå®ç°Channelè¶…æ—¶" class="headerlink" title="åº”ç”¨ selectå®ç°Channelè¶…æ—¶"></a>åº”ç”¨ selectå®ç°Channelè¶…æ—¶</h3><pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    retry <span class="token operator">:=</span> <span class="token number">3</span>          <span class="token comment">// è®¾ç½®é‡è¯•æ¬¡æ•°</span>    success <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token keyword">struct</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token keyword">for</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">select</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">case</span> <span class="token operator">&lt;-</span>success<span class="token punctuation">:</span>   <span class="token comment">// æ“ä½œæˆåŠŸ</span>        <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"success"</span><span class="token punctuation">)</span>        <span class="token keyword">return</span>    <span class="token keyword">case</span> <span class="token operator">&lt;-</span>time<span class="token punctuation">.</span><span class="token function">After</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment">// è¶…æ—¶åé‡è¯•</span>        <span class="token keyword">if</span> retry <span class="token operator">></span> <span class="token number">0</span> <span class="token punctuation">&#123;</span>            retry<span class="token operator">--</span>            <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"retry..."</span><span class="token punctuation">)</span>            <span class="token keyword">continue</span>         <span class="token punctuation">&#125;</span>        <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"timeout, exit"</span><span class="token punctuation">)</span>        <span class="token keyword">return</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span> </code></pre><p>è¿™é‡Œæˆ‘ä»¬å®ç°äº†é‡è¯•çš„é€»è¾‘ï¼Œåœ¨ 1 ç§’åä¼šè§¦å‘è¶…æ—¶å¹¶é‡è¯•ï¼Œä¸€ç›´é‡è¯• 3 æ¬¡ã€‚å¦‚æœ 3 æ¬¡åè¿˜æ˜¯è¶…æ—¶ï¼Œåˆ™é€€å‡ºæ“ä½œã€‚</p><h2 id="timerå’Œtickers"><a href="#timerå’Œtickers" class="headerlink" title="timerå’Œtickers"></a>timerå’Œtickers</h2><pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token punctuation">(</span><span class="token string">"fmt"</span><span class="token string">"time"</span><span class="token punctuation">)</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>timer1 <span class="token operator">:=</span> time<span class="token punctuation">.</span><span class="token function">NewTimer</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span><span class="token operator">&lt;-</span>timer1<span class="token punctuation">.</span>Cfmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Timer 1 fired"</span><span class="token punctuation">)</span>timer2 <span class="token operator">:=</span> time<span class="token punctuation">.</span><span class="token function">NewTimer</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span><span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token operator">&lt;-</span>timer2<span class="token punctuation">.</span>Cfmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Timer 2 fired"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>stop2 <span class="token operator">:=</span> timer2<span class="token punctuation">.</span><span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">if</span> stop2 <span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Timer 2 stopped"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span>time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">5</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span><span class="token punctuation">&#125;</span></code></pre><p>åœ¨ä»£ç ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ª <code>Timer</code> å¯¹è±¡ <code>timer1</code>ï¼Œå®ƒå°†åœ¨ 2 ç§’é’Ÿåè§¦å‘ã€‚æˆ‘ä»¬ä½¿ç”¨ <code>&lt;-timer1.C</code> è¯­æ³•æ¥ç­‰å¾… <code>timer1</code> çš„è§¦å‘äº‹ä»¶ï¼Œå¹¶åœ¨è§¦å‘åè¾“å‡ºä¸€æ¡æ¶ˆæ¯ã€‚</p><p>æ¥ç€ï¼Œæˆ‘ä»¬åˆåˆ›å»ºäº†å¦ä¸€ä¸ª <code>Timer</code> å¯¹è±¡ <code>timer2</code>ï¼Œå®ƒå°†åœ¨ 1 ç§’é’Ÿåè§¦å‘ã€‚ä¸åŒçš„æ˜¯ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªæ–°çš„ goroutine æ¥ç­‰å¾… <code>timer2</code> çš„è§¦å‘äº‹ä»¶ï¼Œå¹¶åœ¨è§¦å‘åè¾“å‡ºä¸€æ¡æ¶ˆæ¯ã€‚æ³¨æ„ï¼Œåœ¨æˆ‘ä»¬å¯åŠ¨çš„ goroutine ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† <code>&lt;-timer2.C</code> è¯­æ³•æ¥ç­‰å¾… <code>timer2</code> çš„è§¦å‘äº‹ä»¶ã€‚</p><p>ç„¶åï¼Œæˆ‘ä»¬è°ƒç”¨äº† <code>timer2.Stop()</code> æ–¹æ³•æ¥åœæ­¢ <code>timer2</code> çš„è§¦å‘äº‹ä»¶ã€‚ç”±äºæˆ‘ä»¬åœ¨ä¸€ä¸ª goroutine ä¸­ç­‰å¾… <code>timer2</code> çš„è§¦å‘äº‹ä»¶ï¼Œæ‰€ä»¥åœ¨è°ƒç”¨ <code>Stop()</code> æ–¹æ³•åï¼Œæˆ‘ä»¬éœ€è¦åˆ¤æ–­ <code>timer2</code> æ˜¯å¦æˆåŠŸåœæ­¢ï¼Œå¹¶è¾“å‡ºä¸€æ¡ç›¸åº”çš„æç¤ºä¿¡æ¯ã€‚</p><p>æœ€åï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>time.Sleep()</code> å‡½æ•°æ¥è®©ç¨‹åºä¼‘çœ  5 ç§’é’Ÿï¼Œä»¥ç­‰å¾…æ‰€æœ‰å®šæ—¶å™¨äº‹ä»¶çš„å®Œæˆã€‚</p><pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token punctuation">(</span>    <span class="token string">"fmt"</span>    <span class="token string">"time"</span><span class="token punctuation">)</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>ticker <span class="token operator">:=</span> time<span class="token punctuation">.</span><span class="token function">NewTicker</span><span class="token punctuation">(</span><span class="token number">500</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Millisecond<span class="token punctuation">)</span>done <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">bool</span><span class="token punctuation">)</span><span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">for</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">select</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">case</span> <span class="token operator">&lt;-</span>done<span class="token punctuation">:</span>            <span class="token keyword">return</span>        <span class="token keyword">case</span> t <span class="token operator">:=</span> <span class="token operator">&lt;-</span>ticker<span class="token punctuation">.</span>C<span class="token punctuation">:</span>            fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Tick at"</span><span class="token punctuation">,</span> t<span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">1600</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Millisecond<span class="token punctuation">)</span>ticker<span class="token punctuation">.</span><span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>done <span class="token operator">&lt;-</span> <span class="token boolean">true</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Ticker stopped"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span></code></pre><p>åœ¨ä»£ç ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ª <code>Ticker</code> å¯¹è±¡ <code>ticker</code>ï¼Œå®ƒå°†æ¯éš” 500 æ¯«ç§’è§¦å‘ä¸€æ¬¡ã€‚æˆ‘ä»¬ä½¿ç”¨ <code>&lt;-ticker.C</code> è¯­æ³•æ¥ç­‰å¾… <code>ticker</code> çš„è§¦å‘äº‹ä»¶ï¼Œå¹¶åœ¨è§¦å‘åè¾“å‡ºä¸€æ¡æ¶ˆæ¯ã€‚</p><p>æ¥ç€ï¼Œæˆ‘ä»¬å¯åŠ¨äº†ä¸€ä¸ª goroutineï¼Œç”¨äºç­‰å¾… <code>ticker</code> çš„è§¦å‘äº‹ä»¶ã€‚åœ¨ goroutine ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>select</code> è¯­å¥æ¥ç­‰å¾…ä¸¤ä¸ªäº‹ä»¶ï¼š<code>done</code> äº‹ä»¶å’Œ <code>ticker.C</code> äº‹ä»¶ã€‚å½“æ¥æ”¶åˆ° <code>done</code> äº‹ä»¶æ—¶ï¼Œæˆ‘ä»¬å°±é€€å‡º goroutineï¼Œå¹¶ç»“æŸ <code>Ticker</code> çš„å®šæ—¶å™¨äº‹ä»¶ã€‚å½“æ¥æ”¶åˆ° <code>ticker.C</code> äº‹ä»¶æ—¶ï¼Œæˆ‘ä»¬å°±æ‰§è¡Œç›¸åº”çš„æ“ä½œï¼Œè¾“å‡ºä¸€æ¡æ¶ˆæ¯ã€‚</p><p>åœ¨ä¸»å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>time.Sleep()</code> å‡½æ•°è®©ç¨‹åºä¼‘çœ  1.6 ç§’é’Ÿï¼Œä»¥ç­‰å¾…ä¸€äº› <code>ticker.C</code> äº‹ä»¶çš„è§¦å‘ã€‚ç„¶åï¼Œæˆ‘ä»¬è°ƒç”¨äº† <code>ticker.Stop()</code> æ–¹æ³•æ¥åœæ­¢ <code>ticker</code> çš„å®šæ—¶å™¨äº‹ä»¶ï¼Œè¿™å°†å¯¼è‡´ <code>ticker.C</code> äº‹ä»¶çš„åœæ­¢ã€‚æ¥ç€ï¼Œæˆ‘ä»¬å‘ <code>done</code> é€šé“å‘é€äº†ä¸€ä¸ªå€¼ï¼Œä»¥é€šçŸ¥ goroutine é€€å‡ºï¼Œå¹¶è¾“å‡ºä¸€æ¡ç›¸åº”çš„æç¤ºä¿¡æ¯ã€‚</p><h3 id="ç¤ºä¾‹-ä¸€ä¸ªåŸºäºè¶…æ—¶çš„å¹¶å‘TCPæœåŠ¡å™¨"><a href="#ç¤ºä¾‹-ä¸€ä¸ªåŸºäºè¶…æ—¶çš„å¹¶å‘TCPæœåŠ¡å™¨" class="headerlink" title="ç¤ºä¾‹:ä¸€ä¸ªåŸºäºè¶…æ—¶çš„å¹¶å‘TCPæœåŠ¡å™¨"></a>ç¤ºä¾‹:ä¸€ä¸ªåŸºäºè¶…æ—¶çš„å¹¶å‘TCPæœåŠ¡å™¨</h3><pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token punctuation">(</span>    <span class="token string">"fmt"</span>    <span class="token string">"time"</span><span class="token punctuation">)</span><span class="token keyword">func</span> <span class="token function">worker</span><span class="token punctuation">(</span>id <span class="token builtin">int</span><span class="token punctuation">,</span> jobs <span class="token operator">&lt;-</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> results <span class="token keyword">chan</span><span class="token operator">&lt;-</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">for</span> j <span class="token operator">:=</span> <span class="token keyword">range</span> jobs <span class="token punctuation">&#123;</span>        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"worker"</span><span class="token punctuation">,</span> id<span class="token punctuation">,</span> <span class="token string">"started  job"</span><span class="token punctuation">,</span> j<span class="token punctuation">)</span>        time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"worker"</span><span class="token punctuation">,</span> id<span class="token punctuation">,</span> <span class="token string">"finished job"</span><span class="token punctuation">,</span> j<span class="token punctuation">)</span>        results <span class="token operator">&lt;-</span> j <span class="token operator">*</span> <span class="token number">2</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">const</span> numJobs <span class="token operator">=</span> <span class="token number">5</span>jobs <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> numJobs<span class="token punctuation">)</span>results <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> numJobs<span class="token punctuation">)</span><span class="token keyword">for</span> w <span class="token operator">:=</span> <span class="token number">1</span><span class="token punctuation">;</span> w <span class="token operator">&lt;=</span> <span class="token number">3</span><span class="token punctuation">;</span> w<span class="token operator">++</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">go</span> <span class="token function">worker</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span> jobs<span class="token punctuation">,</span> results<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">for</span> j <span class="token operator">:=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> numJobs<span class="token punctuation">;</span> j<span class="token operator">++</span> <span class="token punctuation">&#123;</span>    jobs <span class="token operator">&lt;-</span> j<span class="token punctuation">&#125;</span><span class="token function">close</span><span class="token punctuation">(</span>jobs<span class="token punctuation">)</span><span class="token keyword">for</span> a <span class="token operator">:=</span> <span class="token number">1</span><span class="token punctuation">;</span> a <span class="token operator">&lt;=</span> numJobs<span class="token punctuation">;</span> a<span class="token operator">++</span> <span class="token punctuation">&#123;</span>    <span class="token operator">&lt;-</span>results<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>è¿™æ®µä»£ç æ¼”ç¤ºäº† Go è¯­è¨€ä¸­çš„ç»å…¸å¹¶å‘æ¨¡å¼â€”â€”å·¥ä½œæ± æ¨¡å¼ã€‚</p><p>åœ¨ä»£ç ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª <code>worker()</code> å‡½æ•°ï¼Œå®ƒå°†åœ¨ä¸€ä¸ª goroutine ä¸­è¿è¡Œã€‚<code>worker()</code> å‡½æ•°æ¥å—ä¸¤ä¸ªé€šé“å‚æ•°ï¼š<code>jobs</code> å’Œ <code>results</code>ã€‚<code>jobs</code> é€šé“ç”¨äºæ¥æ”¶ä»»åŠ¡ï¼Œ<code>results</code> é€šé“ç”¨äºå‘é€ä»»åŠ¡ç»“æœã€‚</p><p>åœ¨ <code>worker()</code> å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>range</code> å¾ªç¯æ¥éå† <code>jobs</code> é€šé“ä¸­çš„æ‰€æœ‰ä»»åŠ¡ã€‚å¯¹äºæ¯ä¸ªä»»åŠ¡ï¼Œæˆ‘ä»¬è¾“å‡ºä¸€æ¡æ¶ˆæ¯è¡¨ç¤ºå½“å‰ worker å¼€å§‹æ‰§è¡Œä»»åŠ¡ï¼Œå¹¶åœ¨ä»»åŠ¡ä¸­ä½¿ç”¨ <code>time.Sleep()</code> å‡½æ•°æ¥æ¨¡æ‹Ÿä¸€äº›å·¥ä½œï¼Œç„¶åå†è¾“å‡ºä¸€æ¡æ¶ˆæ¯è¡¨ç¤ºä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œå¹¶å°†ä»»åŠ¡ç»“æœå‘é€åˆ° <code>results</code> é€šé“ä¸­ã€‚</p><p>åœ¨ä¸»å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆåˆ›å»ºäº†ä¸¤ä¸ªé€šé“ï¼š<code>jobs</code> å’Œ <code>results</code>ã€‚ç„¶åï¼Œæˆ‘ä»¬å¯åŠ¨äº† 3 ä¸ª goroutine æ¥æ‰§è¡Œ <code>worker()</code> å‡½æ•°ï¼Œå¹¶å°†å®ƒä»¬çš„ <code>jobs</code> å’Œ <code>results</code> é€šé“ç»‘å®šåˆ°ç›¸åº”çš„é€šé“ã€‚</p><p>æ¥ç€ï¼Œæˆ‘ä»¬å°† 5 ä¸ªä»»åŠ¡å‘é€åˆ° <code>jobs</code> é€šé“ä¸­ï¼Œå¹¶åœ¨å‘é€å®Œæ¯•åå…³é—­ <code>jobs</code> é€šé“ï¼Œä»¥é€šçŸ¥ worker æ‰€æœ‰ä»»åŠ¡éƒ½å·²ç»å‘é€å®Œæ¯•ã€‚</p><p>æœ€åï¼Œæˆ‘ä»¬ä» <code>results</code> é€šé“ä¸­æ¥æ”¶æ‰€æœ‰çš„ä»»åŠ¡ç»“æœï¼Œå¹¶è¾“å‡ºç›¸åº”çš„ä¿¡æ¯ã€‚ç”±äº <code>results</code> é€šé“çš„ç¼“å†²åŒºå¤§å°ä¸º 5ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä¸€æ¬¡æ€§æ¥æ”¶æ‰€æœ‰çš„ä»»åŠ¡ç»“æœã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Goè¯­è¨€å…¥é—¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸåˆ› </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è¶…å®ç”¨çš„Goè¯­è¨€åŸºç¡€æ•™ç¨‹ï¼Œè®©ä½ å¿«é€Ÿä¸Šæ‰‹ï¼</title>
      <link href="/2023/12/17/chao-shi-yong-de-go-yu-yan-ji-chu-jiao-cheng-rang-ni-kuai-su-shang-shou/"/>
      <url>/2023/12/17/chao-shi-yong-de-go-yu-yan-ji-chu-jiao-cheng-rang-ni-kuai-su-shang-shou/</url>
      
        <content type="html"><![CDATA[<h1 id="è¶…å®ç”¨çš„Goè¯­è¨€åŸºç¡€æ•™ç¨‹ï¼Œè®©ä½ å¿«é€Ÿä¸Šæ‰‹ï¼"><a href="#è¶…å®ç”¨çš„Goè¯­è¨€åŸºç¡€æ•™ç¨‹ï¼Œè®©ä½ å¿«é€Ÿä¸Šæ‰‹ï¼" class="headerlink" title="è¶…å®ç”¨çš„Goè¯­è¨€åŸºç¡€æ•™ç¨‹ï¼Œè®©ä½ å¿«é€Ÿä¸Šæ‰‹ï¼"></a>è¶…å®ç”¨çš„Goè¯­è¨€åŸºç¡€æ•™ç¨‹ï¼Œè®©ä½ å¿«é€Ÿä¸Šæ‰‹ï¼</h1><h2 id="èƒŒæ™¯ğŸ˜"><a href="#èƒŒæ™¯ğŸ˜" class="headerlink" title="èƒŒæ™¯ğŸ˜"></a>èƒŒæ™¯ğŸ˜</h2><blockquote><p>å·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨ã€‚æŒæ¡Goçš„åŸºç¡€è¯­æ³•è¿˜ä¸å¤Ÿï¼Œè¿˜éœ€è¦å‹¤åŠ ç»ƒä¹ ï¼Œä¿®ä¹ â€œå¤–åŠŸâ€ï¼Œæ‰èƒ½è¾¾åˆ°å‡ºå¥‡åˆ¶èƒœçš„æ•ˆæœã€‚</p></blockquote><p>åœ¨å¤§è‡´äº†è§£Goè¯­è¨€çš„åŸºæœ¬è¯­æ³•åï¼Œæˆ‘å°±è¿«ä¸å¾—å·²åœ°æƒ³ä½¿ç”¨è¿™é—¨è¯­è¨€ã€‚å¯æ˜¯æˆ‘å‘ç°ç¼–ç¨‹æ€è·¯ä¸æ˜¯é—®é¢˜ï¼Œå¾ˆå¤§çš„é—®é¢˜æ˜¯â€œæ‰‹æ…¢â€ï¼Œä¸ç†Ÿæ‚‰å¸¸ç”¨å†™æ³•ï¼ˆå¯èƒ½è¿™å°±æ˜¯å¿«é€Ÿè¿‡è¯­æ³•çš„ç¼ºç‚¹å§ï¼Œè„‘å­ä¼šäº†ï¼Œæ‰‹æ²¡ä¼šï¼‰Ï†(*ï¿£0ï¿£)ã€‚</p><p>åœ¨æˆ‘çœ‹æ¥ï¼Œç”¨Goè¯­è¨€åˆ·ç®—æ³•é¢˜æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„ç»ƒä¹ â€œå¤–åŠŸâ€çš„æ³•é—¨ï¼Œå¯ä»¥å¸®åŠ©æˆ‘æé«˜æ€ç»´çš„çµæ•æ€§å’Œè§£å†³æŠ½è±¡åŒ–é—®é¢˜çš„èƒ½åŠ›ã€‚æ›´é‡è¦åœ°æ˜¯å¤ä¹ æˆ‘å­¦ä¹ è¿‡çš„è¯­æ³•çŸ¥è¯†ï¼Œä¸ç„¶çœŸçš„å¾ˆå®¹æ˜“å¿˜ã€‚è™½ç„¶å®ƒå’ŒCè¯­è¨€æœ‰ç‚¹åƒï¼Œä½†æ˜¯æˆ‘ä¹Ÿå¹¶ä¸ç»å¸¸ä½¿ç”¨Cï¼Œä¸¤è€…ä¸å¤ªå¥½å»ºç«‹èµ·æ¸…æ™°çš„å…³è”å›¾ã€‚å› æ­¤ï¼Œæˆ‘ä¼šä¸€è¾¹å‹¤èƒ½è¡¥æ‹™ï¼Œä¸€è¾¹æ€»ç»“ä¸€äº›è¯­æ³•çŸ¥è¯†ï¼Œä¸€è¾¹å»ºç«‹è¯­è¨€ä¹‹é—´çš„è”ç³»ï¼Œæ–¹ä¾¿æˆ‘åŠ æ·±è®°å¿†ã€‚</p><p>æˆ‘åˆ·çš„ä¸æ˜¯Leetcodeå½¢å¼çš„é¢˜ç›®ï¼Œè€Œæ˜¯ACMå½¢å¼çš„é¢˜ç›®ã€‚å› ä¸ºACMå½¢å¼éœ€è¦å¤„ç†è¾“å…¥è¾“å‡ºï¼Œè¿™å¯¹æˆ‘çš„è¦æ±‚ä¼šæ›´é«˜ç‚¹ã€‚</p><p>åˆ·é¢˜å¹³å°ï¼š<a href="https://www.luogu.com.cn/">æ´›è°·</a></p><h2 id="åŸºç¡€çŸ¥è¯†ğŸ¤”"><a href="#åŸºç¡€çŸ¥è¯†ğŸ¤”" class="headerlink" title="åŸºç¡€çŸ¥è¯†ğŸ¤”"></a>åŸºç¡€çŸ¥è¯†ğŸ¤”</h2><img src="/2023/12/17/chao-shi-yong-de-go-yu-yan-ji-chu-jiao-cheng-rang-ni-kuai-su-shang-shou/fig1.png" class="" title="Goè¯­è¨€åŸºç¡€è¯­æ³•å¤§çº²"><h3 id="è¾“å…¥å¤„ç†"><a href="#è¾“å…¥å¤„ç†" class="headerlink" title="è¾“å…¥å¤„ç†"></a>è¾“å…¥å¤„ç†</h3><p>Goæ¥æ”¶è¾“å…¥çš„æ–¹å¼æœ‰å››ç±»ï¼Œåˆ†åˆ«æ˜¯ fmt åŒ…ä¸­çš„ Scan ã€Scanf å’ŒScanlnå‡½æ•°ä»¥åŠbufio.Scannerå¯¹è±¡å®ç°ã€‚</p><ul><li>Scanå‡½æ•°</li></ul><p><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šå¯ä»¥ç”¨äºè¯»å–ä¸€æ®µ<font color="blue"><strong>ç©ºæ ¼åˆ†éš”</strong></font>çš„å­—ç¬¦ä¸²æˆ–å¤šä¸ªæ•°å€¼ç±»å‹çš„è¾“å…¥ï¼Œä¾‹å¦‚è¯»å–æ•°å­—æˆ–æ—¶é—´ç­‰ï¼›</p><p>ç¤ºä¾‹ä¸€ï¼šè®¡ç®—æµ®ç‚¹æ•°ç›¸é™¤çš„ä½™ã€‚</p><p>è¾“å…¥æ ¼å¼ï¼šè¾“å…¥ä»…ä¸€è¡Œï¼ŒåŒ…æ‹¬ä¸¤ä¸ªåŒç²¾åº¦æµ®ç‚¹æ•°aå’Œbã€‚</p><p>è¾“å…¥æ ·ä¾‹ï¼š</p><pre class="language-none"><code class="language-none">13.55 24.88</code></pre><p>å¤„ç†æ–¹å¼ï¼š</p><pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// æ¥æ”¶ä¸¤ä¸ªåŒç²¾åº¦æµ®ç‚¹æ•°a,b</span><span class="token keyword">var</span> a<span class="token punctuation">,</span> b <span class="token builtin">float64</span><span class="token boolean">_</span><span class="token punctuation">,</span> err <span class="token operator">:=</span> fmt<span class="token punctuation">.</span><span class="token function">Scan</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>a<span class="token punctuation">,</span> <span class="token operator">&amp;</span>b<span class="token punctuation">)</span><span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><ul><li>Scanfå‡½æ•°</li></ul><p><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šé€‚ç”¨äºéœ€è¦<font color="blue"><strong>æŒ‰ç‰¹å®šæ ¼å¼</strong></font>è¯»å–å’Œå¤„ç†è¾“å…¥æ•°æ®çš„åœºæ™¯ï¼Œä¾‹å¦‚è¯»å–æ—¶é—´ã€æ—¥æœŸã€é‡‘é¢ç­‰ï¼›</p><p>ç¤ºä¾‹äºŒï¼šæ•°å­—æ’åº</p><p>è¾“å…¥æ ¼å¼ï¼šè¾“å…¥ä¸‰ä¸ªæ•°å­—ï¼Œæ•°å­—ä¹‹é—´ç”¨é€—å·éš”å¼€ã€‚</p><p>è¾“å…¥æ ·ä¾‹ï¼š</p><pre class="language-none"><code class="language-none">1,4,6</code></pre><p>å¤„ç†æ–¹å¼ï¼š</p><pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token punctuation">(</span><span class="token string">"fmt"</span><span class="token punctuation">)</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">var</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c <span class="token builtin">int</span>fmt<span class="token punctuation">.</span><span class="token function">Scanf</span><span class="token punctuation">(</span><span class="token string">"%d,%d,%d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>a<span class="token punctuation">,</span> <span class="token operator">&amp;</span>b<span class="token punctuation">,</span> <span class="token operator">&amp;</span>c<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">&#125;</span></code></pre><p><font color="red"><strong>å¦‚æœè¾“å…¥ä¸æ­¢ä¸‰ä¸ªæ•°å­—ï¼Œè¾“å…¥å¾ˆé•¿æ€ä¹ˆåŠï¼Ÿ</strong></font></p><p>æˆ‘æƒ³åˆ°çš„æ˜¯ç›´æ¥å½“å­—ç¬¦ä¸²ä¿å­˜ï¼Œç„¶åç”¨â€œï¼Œâ€åˆ†å‰²æ¯ä¸€ä¸ªå…ƒç´ ï¼Œè·å¾—ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ï¼Œæœ€ååˆ©ç”¨Atoiå‡½æ•°å°†å­—ç¬¦ä¸²è½¬ä¸ºæ•´æ•°ï¼Œå­˜å‚¨åˆ°ä¸€ä¸ªæ–°çš„intç±»å‹æ•°ç»„ä¸­ã€‚</p><p>å…·ä½“åšæ³•å¦‚ä¸‹ï¼š</p><pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token punctuation">(</span><span class="token string">"bufio"</span><span class="token string">"fmt"</span><span class="token string">"os"</span><span class="token string">"strconv"</span><span class="token string">"strings"</span><span class="token punctuation">)</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">var</span> input <span class="token builtin">string</span>scanner <span class="token operator">:=</span> bufio<span class="token punctuation">.</span><span class="token function">NewScanner</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>Stdin<span class="token punctuation">)</span><span class="token keyword">if</span> scanner<span class="token punctuation">.</span><span class="token function">Scan</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>input <span class="token operator">=</span> scanner<span class="token punctuation">.</span><span class="token function">Text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Error"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span>strArray <span class="token operator">:=</span> strings<span class="token punctuation">.</span><span class="token function">Split</span><span class="token punctuation">(</span>input<span class="token punctuation">,</span> <span class="token string">","</span><span class="token punctuation">)</span>intArray <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>strArray<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">// æ ¹æ®strArrayçš„é•¿åº¦ç¡®å®šintArrayeçš„é•¿åº¦</span><span class="token keyword">for</span> i<span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> strArray <span class="token punctuation">&#123;</span><span class="token keyword">var</span> err <span class="token builtin">error</span>intArray<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> err <span class="token operator">=</span> strconv<span class="token punctuation">.</span><span class="token function">Atoi</span><span class="token punctuation">(</span>strings<span class="token punctuation">.</span><span class="token function">TrimSpace</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">// strings.TrimSpace å‡½æ•°å»æ‰å­—ç¬¦ä¸²ä¸­çš„å¤šä½™ç©ºç™½å­—ç¬¦</span><span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Error"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"The input integers are: %v\n"</span><span class="token punctuation">,</span> intArray<span class="token punctuation">)</span><span class="token punctuation">&#125;</span></code></pre><ul><li>Scanlnå‡½æ•°</li></ul><p><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šé€‚ç”¨äº<font color="blue"><strong>è¯»å–ç©ºæ ¼æˆ–æ¢è¡Œ</strong></font>åˆ†éš”çš„å­—ç¬¦ä¸²æˆ–å¤šä¸ªæ•°å€¼ç±»å‹çš„è¾“å…¥ï¼Œä¾‹å¦‚è¯»å–å•è¯æˆ–åç§°ç­‰ã€‚ç”¨æ³•å’ŒScanç›¸ä¼¼ï¼Œå°±ä¸ä¸¾ä¾‹å­äº†ã€‚(ï½ï¿£â–½ï¿£)ï½</p><ul><li>bufio.Scannerå¯¹è±¡</li></ul><p><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šè¿™ä¸ªå¯¹è±¡å¯ä»¥ä»æ ‡å‡†è¾“å…¥ä¸­<font color="blue"><strong>é€è¡Œè¯»å–è¾“å…¥</strong></font>ï¼Œç›´åˆ°é‡åˆ°æ–‡ä»¶ç»“å°¾æˆ–è¾“å…¥æµå…³é—­ä¸ºæ­¢ã€‚ç‰¹åˆ«é€‚åˆå¾ªç¯è¯»å…¥æ•°æ®ï¼</p><p>ç¤ºä¾‹ä¸‰ï¼šå­—ç¬¦ä¸²è¯»å–ï¼Œå¹¶æ‰“å°</p><p>è¾“å…¥æ ¼å¼ï¼šè¾“å…¥å¤šè¡Œè‹±æ–‡å¥å­ã€‚</p><p>è¾“å…¥æ ·ä¾‹ï¼š</p><pre class="language-none"><code class="language-none">wow!you are pretty good at printing!you win.</code></pre><p>å¤„ç†æ–¹å¼ï¼š</p><pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token punctuation">(</span><span class="token string">"bufio"</span><span class="token string">"fmt"</span><span class="token string">"os"</span><span class="token punctuation">)</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">var</span> strArray <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span>scanner <span class="token operator">:=</span> bufio<span class="token punctuation">.</span><span class="token function">NewScanner</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>Stdin<span class="token punctuation">)</span><span class="token keyword">for</span> scanner<span class="token punctuation">.</span><span class="token function">Scan</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>input <span class="token operator">:=</span> scanner<span class="token punctuation">.</span><span class="token function">Text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">if</span> input <span class="token operator">==</span> <span class="token string">""</span> <span class="token punctuation">&#123;</span><span class="token keyword">break</span><span class="token punctuation">&#125;</span>strArray <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>strArray<span class="token punctuation">,</span> input<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">if</span> err <span class="token operator">:=</span> scanner<span class="token punctuation">.</span><span class="token function">Err</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"Error reading standard input: %s\n"</span><span class="token punctuation">,</span> err<span class="token punctuation">.</span><span class="token function">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span>â€‹    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"Read %d lines:\n"</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>strArray<span class="token punctuation">)</span><span class="token punctuation">)</span>â€‹    <span class="token keyword">for</span> i<span class="token punctuation">,</span> line <span class="token operator">:=</span> <span class="token keyword">range</span> strArray <span class="token punctuation">&#123;</span>â€‹    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%d: %s\n"</span><span class="token punctuation">,</span> i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> line<span class="token punctuation">)</span>â€‹    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="è¾“å‡ºå¤„ç†"><a href="#è¾“å‡ºå¤„ç†" class="headerlink" title="è¾“å‡ºå¤„ç†"></a>è¾“å‡ºå¤„ç†</h3><p>Goå¤„ç†è¾“å‡ºçš„æ–¹å¼æ ¹æ®åœºæ™¯çš„ä¸åŒï¼Œå¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ç§ï¼š</p><ul><li><font color="blue"><strong>ç»ˆç«¯æˆ–æ§åˆ¶å°ä¸­è¾“å‡ºä¸€äº›ä¿¡æ¯</strong></font>ï¼Œä½¿ç”¨fmtåŒ…ä¸­çš„å‡½æ•°ã€‚</li></ul><pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token punctuation">(</span><span class="token string">"fmt"</span><span class="token punctuation">)</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>name <span class="token operator">:=</span> <span class="token string">"Tom"</span>age <span class="token operator">:=</span> <span class="token number">18</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"name:"</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> <span class="token string">"age:"</span><span class="token punctuation">,</span> age<span class="token punctuation">)</span> <span class="token comment">// Println()å‡½æ•°ä¼šè‡ªåŠ¨æ·»åŠ ç©ºæ ¼</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"name: %s age: %d\n"</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">)</span>str1 <span class="token operator">:=</span> fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">"name: %s age: %d\n"</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">)</span> <span class="token comment">// Sprintf()å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span>str1<span class="token punctuation">)</span><span class="token punctuation">&#125;</span></code></pre><ul><li><font color="blue"><strong>è®°å½•ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­çš„æ—¥å¿—ä¿¡æ¯</strong></font>æ—¶ï¼Œå¯ä»¥ä½¿ç”¨logåŒ…ä¸­çš„å‡½æ•°ã€‚</li></ul><pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token punctuation">(</span><span class="token string">"fmt"</span><span class="token string">"log"</span><span class="token punctuation">)</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Starting the application..."</span><span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Hello, World!"</span><span class="token punctuation">)</span>log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Terminating the application..."</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span></code></pre><ul><li><font color="blue"><strong>è¯»å†™æ–‡ä»¶æˆ–ç½‘ç»œè¿æ¥</strong></font>æ—¶ï¼Œå¯ä»¥ä½¿ç”¨osåŒ…ä¸­çš„å‡½æ•°ã€‚</li></ul><pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token punctuation">(</span><span class="token string">"fmt"</span><span class="token string">"log"</span><span class="token string">"os"</span><span class="token punctuation">)</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>file<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token string">"test.txt"</span><span class="token punctuation">)</span><span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">defer</span> file<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>buffer <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token number">1024</span><span class="token punctuation">)</span> <span class="token comment">// read 1024 bytes at a time</span><span class="token keyword">for</span> <span class="token punctuation">&#123;</span>bytesRead<span class="token punctuation">,</span> err <span class="token operator">:=</span> file<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span> <span class="token comment">// read bytes from file</span><span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">&#125;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"bytes read: "</span><span class="token punctuation">,</span> bytesRead<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"bytes:"</span><span class="token punctuation">,</span> buffer<span class="token punctuation">[</span><span class="token punctuation">:</span>bytesRead<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">if</span> bytesRead <span class="token operator">&lt;</span> <span class="token number">1024</span> <span class="token punctuation">&#123;</span><span class="token keyword">break</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"File contents: %s"</span><span class="token punctuation">,</span> buffer<span class="token punctuation">)</span> <span class="token comment">// print file contents</span><span class="token punctuation">&#125;</span></code></pre><ul><li><font color="blue"><strong>æ‰§è¡Œç³»ç»Ÿå‘½ä»¤æˆ–åˆ›å»ºè¿›ç¨‹</strong></font>æ—¶ï¼Œå¯ä»¥ä½¿ç”¨osåŒ…ä¸­çš„å‡½æ•°ã€‚</li></ul><pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token punctuation">(</span><span class="token string">"fmt"</span><span class="token string">"log"</span><span class="token string">"os"</span><span class="token string">"os/exec"</span><span class="token punctuation">)</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>cmd <span class="token operator">:=</span> exec<span class="token punctuation">.</span><span class="token function">Command</span><span class="token punctuation">(</span><span class="token string">"whoami"</span><span class="token punctuation">)</span>cmd<span class="token punctuation">.</span>Stdout <span class="token operator">=</span> os<span class="token punctuation">.</span>Stdoutcmd<span class="token punctuation">.</span>Stderr <span class="token operator">=</span> os<span class="token punctuation">.</span>Stderrerr <span class="token operator">:=</span> cmd<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">&#125;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Done"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span></code></pre><p>ACMå½¢å¼çš„é¢˜ç›®æ›´å¤šè€ƒå¯Ÿçš„æ˜¯ç¬¬ä¸€ç§åœ¨ç»ˆç«¯&#x2F;æ§åˆ¶å°è¾“å‡ºä¿¡æ¯çš„æ ¼å¼ã€‚è¿™ä¸ªå°±è¦æ¶‰åŠåˆ°Goè¯­è¨€æ ¼å¼åŒ–å­—ç¬¦ä¸²çš„æ–¹å¼çš„çŸ¥è¯†ç‚¹ã€‚åœ¨æˆ‘çœ‹æ¥ï¼Œæ ¼å¼åŒ–å­—ç¬¦ä¸²åœ¨æ¯ç§è¯­è¨€é‡Œéƒ½äº«æœ‰å¾ˆé«˜çš„åœ°ä½ã€‚æ¯•ç«Ÿæ›´ç¾è§‚çš„æ‰“å°æ•°æ®ï¼Œä¹Ÿæœ‰åŠ©äºæˆ‘ä»¬æ›´å¥½çš„ç†è§£ä¿¡æ¯ã€‚</p><ul><li><font color="blue"><strong>æ ¼å¼åŒ–å­—ç¬¦ä¸²</strong></font></li></ul><table><thead><tr><th align="left">æ ¼å¼</th><th>æè¿°</th></tr></thead><tbody><tr><td align="left">%v</td><td>è¡¨ç¤ºæŒ‰ç…§å€¼çš„é»˜è®¤æ ¼å¼è¾“å‡ºï¼Œå¯ä»¥è¾“å‡ºä»»æ„ç±»å‹çš„æ•°æ®ã€‚</td></tr><tr><td align="left">%s</td><td>è¡¨ç¤ºè¾“å‡ºå­—ç¬¦ä¸²ç±»å‹çš„æ•°æ®ã€‚</td></tr><tr><td align="left">%d</td><td>è¡¨ç¤ºè¾“å‡ºåè¿›åˆ¶æ•´æ•°ç±»å‹çš„æ•°æ®ã€‚</td></tr><tr><td align="left">%f</td><td>è¡¨ç¤ºè¾“å‡ºæµ®ç‚¹æ•°ç±»å‹çš„æ•°æ®ã€‚</td></tr><tr><td align="left">%t</td><td>è¡¨ç¤ºè¾“å‡ºå¸ƒå°”ç±»å‹çš„æ•°æ®ï¼Œtrueå’Œfalseåˆ†åˆ«å¯¹åº”è¾“å‡º1å’Œ0ã€‚</td></tr><tr><td align="left">%p</td><td>è¡¨ç¤ºè¾“å‡ºæŒ‡é’ˆç±»å‹çš„æ•°æ®ã€‚</td></tr><tr><td align="left">%c</td><td>è¡¨ç¤ºè¾“å‡ºå­—ç¬¦ç±»å‹çš„æ•°æ®ã€‚</td></tr><tr><td align="left">%q</td><td>è¡¨ç¤ºè¾“å‡ºå¸¦å¼•å·çš„å­—ç¬¦ä¸²ç±»å‹çš„æ•°æ®ã€‚</td></tr><tr><td align="left">%b</td><td>è¡¨ç¤ºè¾“å‡ºäºŒè¿›åˆ¶æ•°ç±»å‹çš„æ•°æ®ã€‚</td></tr><tr><td align="left">%x</td><td>è¡¨ç¤ºè¾“å‡ºåå…­è¿›åˆ¶æ•°ç±»å‹çš„æ•°æ®ã€‚</td></tr><tr><td align="left">%o</td><td>è¡¨ç¤ºè¾“å‡ºå…«è¿›åˆ¶æ•°ç±»å‹çš„æ•°æ®ã€‚</td></tr><tr><td align="left">%05d</td><td>è¡¨ç¤ºè¾“å‡º5ä½ï¼Œä¸è¶³çš„ä½æ•°ç”¨0è¡¥é½ã€‚</td></tr><tr><td align="left">%.2f</td><td>è¡¨ç¤ºè¾“å‡ºå°æ•°ç‚¹åä¸¤ä½ã€‚</td></tr><tr><td align="left">%10s</td><td>è¾“å‡º10ä¸ªå­—ç¬¦é•¿åº¦ï¼Œä¸è¶³çš„ä½æ•°ç”¨ç©ºæ ¼è¡¥é½</td></tr></tbody></table><pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token string">"fmt"</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    name <span class="token operator">:=</span> <span class="token string">"Tom"</span>    age <span class="token operator">:=</span> <span class="token number">18</span>    height <span class="token operator">:=</span> <span class="token number">1.75</span>  fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"My name is %s, I'm %d years old, and I'm %.2f meters tall.\n"</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> height<span class="token punctuation">)</span>  fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"My name is %10s, I'm %05d years old, and I'm %.2f meters tall.\n"</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> height<span class="token punctuation">)</span><span class="token punctuation">&#125;</span></code></pre><pre class="language-none"><code class="language-none">My name is Tom, I&#39;m 18 years old, and I&#39;m 1.75 meters tall.My name is        Tom, I&#39;m 00018 years old, and I&#39;m 1.75 meters tall.</code></pre><h3 id="æ•°ç»„ï¼Ÿåˆ‡ç‰‡ï¼Ÿ"><a href="#æ•°ç»„ï¼Ÿåˆ‡ç‰‡ï¼Ÿ" class="headerlink" title="æ•°ç»„ï¼Ÿåˆ‡ç‰‡ï¼Ÿ"></a>æ•°ç»„ï¼Ÿåˆ‡ç‰‡ï¼Ÿ</h3><p>åœ¨Goè¯­è¨€ä¸­ï¼Œæ•°ç»„æ˜¯ä¸€ç§<font color="red"><strong>å›ºå®šé•¿åº¦</strong></font>çš„æ•°æ®ç»“æ„ï¼Œä¸€æ—¦å®šä¹‰äº†æ•°ç»„çš„é•¿åº¦ï¼Œå°±æ— æ³•å†å‘æ•°ç»„ä¸­æ·»åŠ æ–°çš„å…ƒç´ ã€‚å¦‚æœæƒ³åŠ¨æ€æ›´æ”¹ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨åˆ‡ç‰‡ã€‚æ ¹æ®ä½¿ç”¨æ–¹æ³•å¯ä»¥å¤§è‡´åˆ†ä¸ªç±»ï¼š</p><table><thead><tr><th>å…±æ€§</th><th>å·®å¼‚</th></tr></thead><tbody><tr><td>ä¸‹æ ‡è®¿é—®</td><td>å®šä¹‰æ–¹å¼ä¸åŒ</td></tr><tr><td>å¾ªç¯éå†</td><td>åˆ‡ç‰‡å¯ä»¥æ·»åŠ &#x2F;åˆ é™¤å…ƒç´ </td></tr><tr><td>é•¿åº¦è®¡ç®—</td><td></td></tr><tr><td>åˆ‡ç‰‡[start:end]</td><td></td></tr></tbody></table><ul><li>é¢˜å·ï¼š<a href="https://www.luogu.com.cn/problem/B2094">B2094 ä¸ä¸æœ€å¤§æ•°ç›¸åŒçš„æ•°å­—ä¹‹å’Œ</a></li></ul><pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token punctuation">(</span><span class="token string">"fmt"</span><span class="token punctuation">)</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">var</span> n <span class="token builtin">int</span>fmt<span class="token punctuation">.</span><span class="token function">Scan</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>n<span class="token punctuation">)</span><span class="token keyword">var</span> arr <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token keyword">var</span> max <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">10000000</span><span class="token keyword">var</span> sum <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">&#123;</span><span class="token keyword">var</span> x <span class="token builtin">int</span>fmt<span class="token punctuation">.</span><span class="token function">Scan</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>x<span class="token punctuation">)</span>sum <span class="token operator">+=</span> x<span class="token keyword">if</span> max <span class="token operator">&lt;</span> x <span class="token punctuation">&#123;</span>max <span class="token operator">=</span> x<span class="token punctuation">&#125;</span>arr <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">var</span> count <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token comment">// æ‰¾åˆ°æ•°ç»„é‡Œé¢æœ€å¤§çš„æ•°åŠå®ƒå‡ºç°çš„æ¬¡æ•°</span><span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> max <span class="token operator">==</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token punctuation">&#123;</span>count<span class="token operator">++</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>sum <span class="token operator">-</span> max<span class="token operator">*</span>count<span class="token punctuation">)</span><span class="token punctuation">&#125;</span></code></pre><ul><li>é¢˜å·ï¼š<a href="https://www.luogu.com.cn/problem/B2098">B2098 æ•´æ•°å»é‡</a></li></ul><pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token punctuation">(</span><span class="token string">"fmt"</span><span class="token punctuation">)</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">var</span> n <span class="token builtin">int</span>fmt<span class="token punctuation">.</span><span class="token function">Scan</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>n<span class="token punctuation">)</span><span class="token keyword">var</span> used <span class="token punctuation">[</span><span class="token number">110</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">&#123;</span><span class="token keyword">var</span> x <span class="token builtin">int</span>fmt<span class="token punctuation">.</span><span class="token function">Scan</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>x<span class="token punctuation">)</span>used<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token operator">++</span><span class="token keyword">if</span> used<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">&lt;</span> <span class="token number">2</span> <span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="å­—ç¬¦ä¸²å¤„ç†"><a href="#å­—ç¬¦ä¸²å¤„ç†" class="headerlink" title="å­—ç¬¦ä¸²å¤„ç†"></a>å­—ç¬¦ä¸²å¤„ç†</h3><ul><li>å­—ç¬¦ä¸²é•¿åº¦è®¡ç®—</li></ul><p>åœ¨Goè¯­è¨€ä¸­ï¼Œå­—ç¬¦ä¸²çš„é•¿åº¦æ˜¯æŒ‡å­—ç¬¦ä¸²ä¸­å­—èŠ‚çš„ä¸ªæ•°ï¼Œè€Œä¸æ˜¯å­—ç¬¦çš„ä¸ªæ•°ã€‚å¯¹äºåŒ…å«éASCIIå­—ç¬¦çš„å­—ç¬¦ä¸²ï¼Œä¸€ä¸ªå­—ç¬¦å¯èƒ½ä¼šå ç”¨å¤šä¸ªå­—èŠ‚ã€‚</p><pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token punctuation">(</span><span class="token string">"fmt"</span><span class="token punctuation">)</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>str <span class="token operator">:=</span> <span class="token string">"hello world"</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// è¾“å‡º11</span>str <span class="token operator">=</span> <span class="token string">"hello ä¸–ç•Œ"</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// è¾“å‡º12</span><span class="token punctuation">&#125;</span></code></pre><ul><li>å­—ç¬¦ä¸²éå†</li></ul><p>æ—¢å¯ä»¥ä½¿ç”¨ä¼ ç»Ÿçš„ä¸‹æ ‡éå†ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨rangeéå†ã€‚å»ºè®®ä½¿ç”¨rangeéå†ï¼Œå› ä¸ºå½“å­—ç¬¦ä¸²ä¸­å‡ºç°ä¸­æ–‡æ—¶ï¼Œä¸‹æ ‡éå†è·å–çš„æ˜¯byteç±»å‹çš„å€¼ï¼Œä¹Ÿå°±æ„å‘³ç€å®ƒæ˜¯å°†ä¸€ä¸ªæ±‰å­—æ‹†æˆäº†3ä¸ªbyteç±»å‹å­—èŠ‚åˆ†åˆ«è¾“å‡ºã€‚</p><pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token punctuation">(</span><span class="token string">"fmt"</span><span class="token punctuation">)</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>str <span class="token operator">:=</span> <span class="token string">"hello world"</span><span class="token keyword">for</span> i<span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> str <span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"å­—ç¬¦ä¸²ä¸­ä¸‹æ ‡ä¸º %d çš„å­—ç¬¦æ˜¯ %c\n"</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><ul><li>å­—ç¬¦ä¸²åˆ‡ç‰‡</li></ul><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ä½¿ç”¨å­—ç¬¦ä¸²åˆ‡ç‰‡æ—¶ï¼Œä¸‹æ ‡æ˜¯<font color="red"><strong>æŒ‰å­—èŠ‚è®¡ç®—çš„ï¼Œè€Œä¸æ˜¯æŒ‰å­—ç¬¦</strong></font>è®¡ç®—çš„ã€‚</p><pre class="language-go" data-language="go"><code class="language-go">str <span class="token operator">:=</span> <span class="token string">"hello world"</span>slice <span class="token operator">:=</span> str<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token number">5</span><span class="token punctuation">]</span>  <span class="token comment">// è·å–strä¸­ä¸‹æ ‡ä¸º1åˆ°4çš„å­—ç¬¦ï¼Œä¸åŒ…æ‹¬ä¸‹æ ‡ä¸º5çš„å­—ç¬¦</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>slice<span class="token punctuation">)</span>  <span class="token comment">// è¾“å‡º"ello"</span></code></pre><ul><li>å­—ç¬¦ä¸²è¿æ¥</li></ul><p>å¯ä»¥ä½¿ç”¨åŠ å·è¿ç®—ç¬¦æˆ–fmt.Sprintfå‡½æ•°æ¥è¿æ¥å­—ç¬¦ä¸²ã€‚</p><pre class="language-go" data-language="go"><code class="language-go">str1 <span class="token operator">:=</span> <span class="token string">"hello"</span>str2 <span class="token operator">:=</span> <span class="token string">"world"</span>str3 <span class="token operator">:=</span> str1 <span class="token operator">+</span> <span class="token string">" "</span> <span class="token operator">+</span> str2  <span class="token comment">// ä½¿ç”¨åŠ å·è¿ç®—ç¬¦è¿æ¥å­—ç¬¦ä¸²</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>str3<span class="token punctuation">)</span>  <span class="token comment">// è¾“å‡º"hello world"</span>str4 <span class="token operator">:=</span> fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">"%s %s"</span><span class="token punctuation">,</span> str1<span class="token punctuation">,</span> str2<span class="token punctuation">)</span>  <span class="token comment">// ä½¿ç”¨fmt.Sprintfå‡½æ•°è¿æ¥å­—ç¬¦ä¸²</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>str4<span class="token punctuation">)</span>  <span class="token comment">// è¾“å‡º"hello world"</span></code></pre><ul><li>å­—ç¬¦ä¸²æŸ¥æ‰¾</li></ul><p>ä½¿ç”¨stringsåŒ…ä¸­çš„å‡½æ•°æ¥æŸ¥æ‰¾å­—ç¬¦ä¸²ä¸­çš„å­ä¸²ã€‚</p><pre class="language-go" data-language="go"><code class="language-go">str <span class="token operator">:=</span> <span class="token string">"hello world"</span>index <span class="token operator">:=</span> strings<span class="token punctuation">.</span><span class="token function">Index</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> <span class="token string">"world"</span><span class="token punctuation">)</span>  <span class="token comment">// æŸ¥æ‰¾å­ä¸²"world"åœ¨strä¸­çš„ä½ç½®</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span>  <span class="token comment">// è¾“å‡º6</span></code></pre><ul><li>å­—ç¬¦ä¸²æ›¿æ¢</li></ul><p>ä½¿ç”¨stringsåŒ…ä¸­çš„å‡½æ•°æ¥æ›¿æ¢å­—ç¬¦ä¸²ä¸­çš„å­ä¸²ã€‚</p><pre class="language-go" data-language="go"><code class="language-go">str <span class="token operator">:=</span> <span class="token string">"hello world"</span>newstr <span class="token operator">:=</span> strings<span class="token punctuation">.</span><span class="token function">Replace</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> <span class="token string">"world"</span><span class="token punctuation">,</span> <span class="token string">"golang"</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// å°†å­ä¸²"world"æ›¿æ¢ä¸º"golang", -1è¡¨ç¤ºå…¨éƒ¨æ›¿æ¢</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>newstr<span class="token punctuation">)</span>                                   <span class="token comment">// è¾“å‡º"hello golang"</span></code></pre><ul><li>å­—ç¬¦ä¸²è½¬æ¢</li></ul><p>ä½¿ç”¨strconvåŒ…ä¸­çš„å‡½æ•°è¿›è¡Œè½¬æ¢ã€‚</p><pre class="language-go" data-language="go"><code class="language-go">str <span class="token operator">:=</span> <span class="token string">"123"</span>num<span class="token punctuation">,</span> err <span class="token operator">:=</span> strconv<span class="token punctuation">.</span><span class="token function">Atoi</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span> <span class="token comment">// å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•´å‹</span><span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">&#123;</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"è½¬æ¢å¤±è´¥"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"è½¬æ¢ç»“æœæ˜¯ %T\n"</span><span class="token punctuation">,</span> num<span class="token punctuation">)</span><span class="token punctuation">&#125;</span>num <span class="token operator">=</span> <span class="token number">123</span>str <span class="token operator">=</span> strconv<span class="token punctuation">.</span><span class="token function">Itoa</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span> <span class="token comment">// å°†æ•´å‹è½¬æ¢ä¸ºå­—ç¬¦ä¸²</span>fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"è½¬æ¢ç»“æœæ˜¯ %T\n"</span><span class="token punctuation">,</span> str<span class="token punctuation">)</span></code></pre><ul><li>æ­£åˆ™åŒ¹é…ï¼ˆâœ¨âœ¨âœ¨âœ¨ï¼‰</li></ul><table><thead><tr><th>é¢„å®šä¹‰å­—ç¬¦é›†</th><th>æè¿°</th></tr></thead><tbody><tr><td>\d</td><td>åŒ¹é…ä¸€ä¸ªæ•°å­—å­—ç¬¦ã€‚ç­‰ä»·äºå­—ç¬¦é›† [0-9]ã€‚</td></tr><tr><td>\s</td><td>åŒ¹é…ä¸€ä¸ªç©ºç™½å­—ç¬¦ï¼ˆç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€æ¢è¡Œç¬¦ç­‰ï¼‰ã€‚ç­‰ä»·äºå­—ç¬¦é›† [ \t\n\r\f\v]ã€‚</td></tr><tr><td>\w</td><td>åŒ¹é…ä¸€ä¸ªå•è¯å­—ç¬¦ã€‚ç­‰ä»·äºå­—ç¬¦é›† [a-zA-Z0-9_]ã€‚</td></tr><tr><td>\W</td><td>åŒ¹é…ä¸€ä¸ªéå•è¯å­—ç¬¦ã€‚ç­‰ä»·äºå­—ç¬¦é›† [^a-zA-Z0-9_]ã€‚</td></tr><tr><td>\S</td><td>åŒ¹é…ä¸€ä¸ªéç©ºç™½å­—ç¬¦ã€‚ç­‰ä»·äºå­—ç¬¦é›† [^ \t\n\r\f\v]ã€‚</td></tr><tr><td>\D</td><td>åŒ¹é…ä¸€ä¸ªéæ•°å­—å­—ç¬¦ã€‚ç­‰ä»·äºå­—ç¬¦é›† [^0-9]ã€‚</td></tr><tr><td>\b</td><td>è¡¨ç¤ºå•è¯è¾¹ç•Œï¼Œæˆ‘çš„ç†è§£æ˜¯èƒ½å‡†ç¡®åŒ¹é…åˆ°æŸä¸ªå•è¯ï¼Œä¸æŠŠåŒ…å«è¿™ä¸ªå•è¯çš„å‰ç¼€è¯ç®—åœ¨å†…ã€‚æ¯”å¦‚gotestå°±æ— æ³•åŒ¹é…testã€‚</td></tr></tbody></table><p>åŒ¹é…ä¸€ä¸ªç”±æ±‰å­—ç»„æˆçš„å­—ç¬¦ä¸²ï¼ˆæ•°æ®æ¸…æ´—æ—¶å¸¸ç”¨ï¼ï¼‰ï¼š</p><pre class="language-none"><code class="language-none">^[\u4e00-\u9fa5]+$</code></pre><p>åŒ¹é…ä¸€ä¸ªç”±é‚®ç®±åœ°å€ç»„æˆçš„å­—ç¬¦ä¸²ï¼ˆåŒ¹é…æ¶æ„URLã€åŒ¹é…é’“é±¼é‚®ç®±å¸¸ç”¨ï¼‰ï¼š</p><pre class="language-none"><code class="language-none">^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$</code></pre><p><strong>æ¼”ç¤º1</strong>ï¼šåŒ¹é…ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ç¬¦åˆæŸä¸ªæ­£åˆ™è¡¨è¾¾å¼ã€‚</p><pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">import</span> <span class="token punctuation">(</span><span class="token string">"fmt"</span><span class="token string">"regexp"</span><span class="token punctuation">)</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// å®šä¹‰ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼</span>pattern <span class="token operator">:=</span> <span class="token string">"^\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*$"</span><span class="token comment">// ç¼–è¯‘æ­£åˆ™è¡¨è¾¾å¼</span>reg <span class="token operator">:=</span> regexp<span class="token punctuation">.</span><span class="token function">MustCompile</span><span class="token punctuation">(</span>pattern<span class="token punctuation">)</span><span class="token comment">// è¦åŒ¹é…çš„å­—ç¬¦ä¸²</span>str <span class="token operator">:=</span> <span class="token string">"abc123@11-2.com"</span><span class="token comment">// åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦åŒ¹é…</span>matched <span class="token operator">:=</span> reg<span class="token punctuation">.</span><span class="token function">MatchString</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>matched<span class="token punctuation">)</span><span class="token punctuation">&#125;</span></code></pre><p><strong>æ¼”ç¤º2</strong>ï¼šåˆ©ç”¨æ­£åˆ™è¿›è¡ŒæŸ¥æ‰¾å’Œæ›¿æ¢å­—ç¬¦ä¸²</p><pre class="language-go" data-language="go"><code class="language-go"><span class="token comment">// æŸ¥æ‰¾</span>str <span class="token operator">:=</span> <span class="token string">"hello world"</span>re <span class="token operator">:=</span> regexp<span class="token punctuation">.</span><span class="token function">MustCompile</span><span class="token punctuation">(</span><span class="token string">`\b\w+o\w+\b`</span><span class="token punctuation">)</span> <span class="token comment">// åŒ¹é…åŒ…å«å­—æ¯oçš„å•è¯</span>newstr <span class="token operator">:=</span> re<span class="token punctuation">.</span><span class="token function">FindAllString</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>     <span class="token comment">// å°†æŸ¥æ‰¾æ‰€æœ‰åŒ¹é…çš„å­—ç¬¦ä¸²</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>newstr<span class="token punctuation">)</span><span class="token comment">// æ›¿æ¢</span>str <span class="token operator">:=</span> <span class="token string">"hello world"</span>re <span class="token operator">:=</span> regexp<span class="token punctuation">.</span><span class="token function">MustCompile</span><span class="token punctuation">(</span><span class="token string">`\b\w+o\w+\b`</span><span class="token punctuation">)</span>  <span class="token comment">// åŒ¹é…åŒ…å«å­—æ¯oçš„å•è¯</span>newstr <span class="token operator">:=</span> re<span class="token punctuation">.</span><span class="token function">ReplaceAllString</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> <span class="token string">"golang"</span><span class="token punctuation">)</span>  <span class="token comment">// å°†æ‰€æœ‰åŒ¹é…çš„å­—ç¬¦ä¸²æ›¿æ¢ä¸º"golang"</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>newstr<span class="token punctuation">)</span>  <span class="token comment">// è¾“å‡º"golang golang"</span></code></pre><ul><li><p>é¢˜å·ï¼š<a href="https://www.luogu.com.cn/problem/B2109">B2109 ç»Ÿè®¡æ•°å­—å­—ç¬¦ä¸ªæ•°</a></p></li><li><pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token punctuation">(</span><span class="token string">"bufio"</span><span class="token string">"fmt"</span><span class="token string">"os"</span><span class="token punctuation">)</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>scanner <span class="token operator">:=</span> bufio<span class="token punctuation">.</span><span class="token function">NewScanner</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>Stdin<span class="token punctuation">)</span>scanner<span class="token punctuation">.</span><span class="token function">Scan</span><span class="token punctuation">(</span><span class="token punctuation">)</span>sentence <span class="token operator">:=</span> scanner<span class="token punctuation">.</span><span class="token function">Text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">var</span> count <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> sentence <span class="token punctuation">&#123;</span><span class="token keyword">if</span> v <span class="token operator">>=</span> <span class="token char">'0'</span> <span class="token operator">&amp;&amp;</span> v <span class="token operator">&lt;=</span> <span class="token char">'9'</span> <span class="token punctuation">&#123;</span>count<span class="token operator">++</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">&#125;</span></code></pre></li></ul><h3 id="ç»“æ„ä½“"><a href="#ç»“æ„ä½“" class="headerlink" title="ç»“æ„ä½“"></a>ç»“æ„ä½“</h3><p>Goè¯­è¨€çš„ç»“æ„ä½“å’ŒCè¯­è¨€å¾ˆç›¸ä¼¼ã€‚</p><ul><li>ç»“æ„ä½“å®šä¹‰</li></ul><pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">type</span> Person <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span>    Name <span class="token builtin">string</span>    Age <span class="token builtin">int</span>    Height <span class="token builtin">float32</span><span class="token punctuation">&#125;</span></code></pre><ul><li>ç»“æ„ä½“åˆå§‹åŒ–</li></ul><pre class="language-go" data-language="go"><code class="language-go">p1 <span class="token operator">:=</span> Person<span class="token punctuation">&#123;</span>Name<span class="token punctuation">:</span> <span class="token string">"Alice"</span><span class="token punctuation">,</span> Age<span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">,</span> Height<span class="token punctuation">:</span> <span class="token number">1.65</span><span class="token punctuation">&#125;</span>  <span class="token comment">// å®šä¹‰ä¸€ä¸ªPersonç±»å‹çš„ç»“æ„ä½“å˜é‡p1å¹¶åˆå§‹åŒ–</span>p2 <span class="token operator">:=</span> <span class="token function">new</span><span class="token punctuation">(</span>Person<span class="token punctuation">)</span>  <span class="token comment">// å®šä¹‰ä¸€ä¸ªæŒ‡å‘Personç±»å‹çš„æŒ‡é’ˆå˜é‡p2ï¼Œå¹¶åˆ†é…å†…å­˜ç©ºé—´</span></code></pre><ul><li>ç»“æ„ä½“å…ƒç´ è®¿é—®ï¼ˆâ€.â€å·è®¿é—®ï¼‰</li></ul><p>æŒ‡é’ˆå’Œæ™®é€šçš„å¯¹è±¡ç±»å‹éƒ½æ˜¯ä½¿ç”¨â€œ.â€å·è®¿é—®ã€‚</p><pre class="language-go" data-language="go"><code class="language-go">p1<span class="token punctuation">.</span>Name <span class="token operator">=</span> <span class="token string">"Alice"</span>  <span class="token comment">// ç»™p1çš„Nameèµ‹å€¼ä¸º"Alice"</span>p1<span class="token punctuation">.</span>Age <span class="token operator">=</span> <span class="token number">20</span>  <span class="token comment">// ç»™p1çš„Ageèµ‹å€¼ä¸º20</span>p1<span class="token punctuation">.</span>Height <span class="token operator">=</span> <span class="token number">1.65</span>  <span class="token comment">// ç»™p1çš„Heightèµ‹å€¼ä¸º1.65</span></code></pre><p>åˆ†ç•Œçº¿ï¼šâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</p><p>Goè¿˜æ”¯æŒä¸€äº›é¢å‘å¯¹è±¡çš„ç¼–ç¨‹ç‰¹æ€§ï¼Œéå¸¸çš„çµæ´»å’Œå¼ºå¤§ï¼ï¼ï¼</p><pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token punctuation">(</span>p <span class="token operator">*</span>Person<span class="token punctuation">)</span> <span class="token function">GetInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">"Name: %s, Age: %d, Height: %.2f"</span><span class="token punctuation">,</span> p<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> p<span class="token punctuation">.</span>Age<span class="token punctuation">,</span> p<span class="token punctuation">.</span>Height<span class="token punctuation">)</span><span class="token punctuation">&#125;</span>p1<span class="token punctuation">.</span><span class="token function">GetInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// è°ƒç”¨p1çš„GetInfoæ–¹æ³•ï¼Œè¿”å›"Name: Alice, Age: 20, Height: 1.65"</span></code></pre><p>è¿™ä¸ªæ–¹æ³•å®šä¹‰äº†ä¸€ä¸ª<font color="red"><strong>æŒ‡é’ˆç±»å‹ä¸ºPersonçš„æ–¹æ³•GetInfo</strong></font>ï¼Œç”¨æ¥è¿”å›ä¸€ä¸ªåŒ…å«Personå¯¹è±¡ä¿¡æ¯çš„å­—ç¬¦ä¸²ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒç”¨ç»“æ„ä½“å˜é‡çš„æ–¹æ³•æ¥å®ç°å¯¹ç»“æ„ä½“å¯¹è±¡çš„æ“ä½œã€‚è¿™ç§ä½¿ç”¨æ–¹æ³•å°±å¾ˆæ£’ï¼è¿™å°±æœ‰ç‚¹åƒç±»æ–¹æ³•ï¼ŒGetInfoå‡½æ•°å°±æ˜¯Personç»“æ„ä½“çš„ç±»æ–¹æ³•ã€‚æƒ³è¦ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œé‚£ä¹ˆå°±éœ€è¦å…ˆæ„é€ ä¸€ä¸ªPersonçš„ç»“æ„ä½“å¯¹è±¡ï¼Œç„¶åé€šè¿‡å¯¹è±¡è°ƒç”¨ã€‚</p><p>æ­¤å¤–ï¼ŒGoè¿˜æ”¯æŒå°è£…ã€ç»§æ‰¿ã€å¤šæ€çš„ç‰¹æ€§ï¼Œç”¨æ¥å®ç°å¤æ‚çš„å¯¹è±¡æ¨¡å‹å’Œæ•°æ®ç»“æ„ã€‚</p><ul><li>å°è£…</li></ul><pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">type</span> Person <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span>    name <span class="token builtin">string</span>    age <span class="token builtin">int</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token punctuation">(</span>p <span class="token operator">*</span>Person<span class="token punctuation">)</span> <span class="token function">SetName</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    p<span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token punctuation">(</span>p <span class="token operator">*</span>Person<span class="token punctuation">)</span> <span class="token function">GetName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> p<span class="token punctuation">.</span>name<span class="token punctuation">&#125;</span></code></pre><p>è¿™ä¸ªç»“æ„ä½“å®šä¹‰äº†ä¸€ä¸ªåä¸ºPersonçš„ç»“æ„ä½“ç±»å‹ï¼ŒåŒ…å«äº†<font color="red"><strong>ä¸¤ä¸ªç§æœ‰çš„æˆå‘˜å˜é‡nameå’Œage</strong></font>ï¼Œä»¥åŠä¸¤ä¸ªå…¬æœ‰çš„æ–¹æ³•SetNameå’ŒGetNameï¼Œç”¨æ¥è®¾ç½®å’Œè·å–nameæˆå‘˜å˜é‡çš„å€¼ã€‚ä¸åŒäºå…¶å®ƒè¯­è¨€ä½¿ç”¨Publicï¼ŒPrivateå®šä¹‰å…¬æœ‰å’Œç§æœ‰ï¼ŒGoä½¿ç”¨ç¼–ç¨‹è§„èŒƒæ¥å®šä¹‰è¿™ä¸ªæ¦‚å¿µã€‚<strong>å˜é‡åé¦–å­—æ¯å¤§å†™ä»£è¡¨å…¬æœ‰ï¼Œå¯¹å¤–å¯è§ï¼›å˜é‡åé¦–å­—æ¯å°å†™ä»£è¡¨ç§æœ‰ï¼Œå¯¹å¤–ä¸å¯è§ã€‚</strong>ï¼ˆç»è¿‡å®éªŒï¼Œä¸Šé¢çš„è¯´æ³•æ˜¯æœ‰ä¸€ä¸ªå¤§å‰æçš„ã€‚<font color="red"><strong>åŒä¸€ä¸ªåŒ…å†…ï¼Œæ— è®ºæ˜¯å…¬æœ‰å˜é‡è¿˜æ˜¯ç§æœ‰å˜é‡ï¼Œåœ¨ä»»ä½•åœ°æ–¹éƒ½å¯ä»¥è®¿é—®ï¼ï¼ï¼ï¼</strong></font>ï¼Œåªæœ‰åœ¨<strong>ä¸åŒçš„åŒ…</strong>é‡Œï¼Œæ‰æœ‰ä¸Šé¢å˜é‡åå¤§å°å†™æ¥æ§åˆ¶å¯è§æ€§çš„è¯´æ³•ã€‚ğŸ˜£ğŸ˜£ğŸ˜£ï¼‰Goçš„å˜é‡å‘½åä¸»è¦ä½¿ç”¨é©¼å³°å‘½åæ³•ï¼Œä¹Ÿç®—æ˜¯çº¦å®šä¿—æˆå§ã€‚</p><ul><li>ç»§æ‰¿å’Œç»„åˆ</li></ul><pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">type</span> Person <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span>    name <span class="token builtin">string</span>    age <span class="token builtin">int</span><span class="token punctuation">&#125;</span><span class="token keyword">type</span> Student <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span>    Person  <span class="token comment">// åŒ¿ååµŒå¥—Personç»“æ„ä½“</span>    id <span class="token builtin">string</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token punctuation">(</span>s <span class="token operator">*</span>Student<span class="token punctuation">)</span> <span class="token function">SetId</span><span class="token punctuation">(</span>id <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    s<span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">&#125;</span></code></pre><p>è¿™ä¸ªç»“æ„ä½“å®šä¹‰äº†ä¸€ä¸ªåä¸ºStudentçš„ç»“æ„ä½“ç±»å‹ï¼Œé€šè¿‡åŒ¿ååµŒå¥—Personç»“æ„ä½“ï¼Œå®ç°äº†ä»Personç»“æ„ä½“ç»§æ‰¿äº†nameå’Œageæˆå‘˜å˜é‡å’Œæ–¹æ³•ï¼Œå¹¶æ·»åŠ äº†ä¸€ä¸ªidæˆå‘˜å˜é‡å’ŒSetIdæ–¹æ³•ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡Studentç»“æ„ä½“æ¥è®¿é—®å’Œæ“ä½œPersonç»“æ„ä½“çš„æˆå‘˜å˜é‡å’Œæ–¹æ³•ã€‚<strong>åŒ¿ååµŒå¥—æ˜¯ç»§æ‰¿ï¼Œä¸åŒ¿åå°±æ˜¯ç»„åˆçš„ä½¿ç”¨æ–¹æ³•äº†ã€‚</strong></p><ul><li>æ¥å£å¤šæ€</li></ul><p>å£°æ˜ä¸€ä¸ªShapeç±»å‹çš„æ¥å£ï¼Œè¯¥æ¥å£é‡Œå®šä¹‰äº†Area()å‡½æ•°ã€‚Rectangleå’ŒCircleå®ç°äº†Shapeç±»å‹æ¥å£é‡Œçš„Area()çš„æ–¹æ³•ï¼Œå¯ä»¥è®¤å®šä¸ºæ˜¯ä¸€ä¸ªå®ç°ç±»ã€‚PrintAreaæ–¹æ³•æ¥å—ä¸€ä¸ªShapeç±»å‹çš„æ•°æ®ï¼Œç„¶åè¾“å‡ºé¢ç§¯ã€‚è¿™ä¸ªå½¢å‚æ˜¯Shapeç±»å‹ï¼Œå› æ­¤ï¼Œå°±æœ‰äº†ä¸€ä¸ªâ€œ<strong>å‘ä¸Šè½¬å‹</strong>â€çš„æ•ˆæœã€‚</p><pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token punctuation">(</span><span class="token string">"fmt"</span><span class="token string">"math"</span><span class="token punctuation">)</span><span class="token keyword">type</span> Shape <span class="token keyword">interface</span> <span class="token punctuation">&#123;</span><span class="token function">Area</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">float64</span><span class="token punctuation">&#125;</span><span class="token keyword">type</span> Rectangle <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span>Width  <span class="token builtin">float64</span>Height <span class="token builtin">float64</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token punctuation">(</span>r Rectangle<span class="token punctuation">)</span> <span class="token function">Area</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">float64</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> r<span class="token punctuation">.</span>Width <span class="token operator">*</span> r<span class="token punctuation">.</span>Height<span class="token punctuation">&#125;</span><span class="token keyword">type</span> Circle <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span>Radius <span class="token builtin">float64</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token punctuation">(</span>c Circle<span class="token punctuation">)</span> <span class="token function">Area</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">float64</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> math<span class="token punctuation">.</span>Pi <span class="token operator">*</span> c<span class="token punctuation">.</span>Radius <span class="token operator">*</span> c<span class="token punctuation">.</span>Radius<span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">PrintArea</span><span class="token punctuation">(</span>s Shape<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">Area</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>r <span class="token operator">:=</span> Rectangle<span class="token punctuation">&#123;</span>Width<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> Height<span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">&#125;</span>c <span class="token operator">:=</span> Circle<span class="token punctuation">&#123;</span>Radius<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">&#125;</span>  <span class="token function">PrintArea</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span> <span class="token comment">// è¾“å‡º 12</span><span class="token function">PrintArea</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token comment">// è¾“å‡º 78.53981633974483</span><span class="token punctuation">&#125;</span></code></pre><ul><li>é¢˜å·ï¼š<a href="https://www.luogu.com.cn/problem/B3679">B3679 [è¯­è¨€æœˆèµ›202211] Zone Selection</a></li></ul><pre class="language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token punctuation">(</span><span class="token string">"fmt"</span><span class="token string">"math"</span><span class="token punctuation">)</span><span class="token keyword">type</span> coordinate <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span>x<span class="token punctuation">,</span> y     <span class="token builtin">int</span>isMarked <span class="token builtin">bool</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">distence</span><span class="token punctuation">(</span>x1 <span class="token builtin">int</span><span class="token punctuation">,</span> y1 <span class="token builtin">int</span><span class="token punctuation">,</span> x2 <span class="token builtin">int</span><span class="token punctuation">,</span> y2 <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">float64</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> math<span class="token punctuation">.</span><span class="token function">Sqrt</span><span class="token punctuation">(</span>math<span class="token punctuation">.</span><span class="token function">Pow</span><span class="token punctuation">(</span><span class="token function">float64</span><span class="token punctuation">(</span>x1<span class="token operator">-</span>x2<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> math<span class="token punctuation">.</span><span class="token function">Pow</span><span class="token punctuation">(</span><span class="token function">float64</span><span class="token punctuation">(</span>y1<span class="token operator">-</span>y2<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">var</span> n<span class="token punctuation">,</span> k<span class="token punctuation">,</span> t <span class="token builtin">int</span>fmt<span class="token punctuation">.</span><span class="token function">Scan</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>n<span class="token punctuation">,</span> <span class="token operator">&amp;</span>k<span class="token punctuation">,</span> <span class="token operator">&amp;</span>t<span class="token punctuation">)</span>coordinates <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span>coordinate<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">&#123;</span>fmt<span class="token punctuation">.</span><span class="token function">Scan</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>coordinates<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span> <span class="token operator">&amp;</span>coordinates<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">&#125;</span>  <span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> k<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">&#123;</span><span class="token keyword">var</span> x<span class="token punctuation">,</span> y <span class="token builtin">int</span>fmt<span class="token punctuation">.</span><span class="token function">Scan</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>x<span class="token punctuation">,</span> <span class="token operator">&amp;</span>y<span class="token punctuation">)</span><span class="token keyword">for</span> j <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> j<span class="token operator">++</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> x <span class="token operator">==</span> coordinates<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">&amp;&amp;</span> y <span class="token operator">==</span> coordinates<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>y <span class="token punctuation">&#123;</span>coordinates<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>isMarked <span class="token operator">=</span> <span class="token boolean">true</span><span class="token keyword">break</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">// è®°å½•æœ€è¿œè·ç¦»çš„åæ ‡ï¼Œä»¥åŠæœ€è¿œè·ç¦»</span><span class="token keyword">var</span> maxDistence <span class="token builtin">float64</span> <span class="token operator">=</span> <span class="token number">0.0</span><span class="token keyword">var</span> maxDistenceid <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token keyword">var</span> res <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> t<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">&#123;</span><span class="token keyword">var</span> x<span class="token punctuation">,</span> y <span class="token builtin">int</span>fmt<span class="token punctuation">.</span><span class="token function">Scan</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>x<span class="token punctuation">,</span> <span class="token operator">&amp;</span>y<span class="token punctuation">)</span><span class="token keyword">for</span> j <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> j<span class="token operator">++</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token function">distence</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> coordinates<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span> coordinates<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span> <span class="token operator">></span> maxDistence <span class="token punctuation">&#123;</span><span class="token comment">// fmt.Println(x, y, coordinates[j].x, coordinates[j].y)</span><span class="token comment">// fmt.Println("distence:", distence(x, y, coordinates[j].x, coordinates[j].y))</span>maxDistence <span class="token operator">=</span> <span class="token function">distence</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> coordinates<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span> coordinates<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span>maxDistenceid <span class="token operator">=</span> j<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">if</span> coordinates<span class="token punctuation">[</span>maxDistenceid<span class="token punctuation">]</span><span class="token punctuation">.</span>isMarked <span class="token punctuation">&#123;</span>res<span class="token operator">++</span><span class="token punctuation">&#125;</span><span class="token comment">// æ›´æ–°æœ€è¿œè·ç¦»</span>maxDistence <span class="token operator">=</span> <span class="token number">0.0</span>maxDistenceid <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">&#125;</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">&#125;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Goè¯­è¨€å…¥é—¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸåˆ› </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
